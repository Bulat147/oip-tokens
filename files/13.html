<!doctype html>
<html lang="ru">
 <head>
  <title>Game++. while (!game(over)) / Хабр</title>
  <meta property="fb:app_id" content="444736788986613">
  <meta property="fb:pages" content="472597926099084">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@habr_com">
  <meta property="og:site_name" content="Хабр">
  <link href="https://habr.com/ru/rss/post/907146/?fl=ru" type="application/rss+xml" title rel="alternate" name="rss">
  <link href="https://habr.com/ru/articles/907146/" rel="canonical" data-hid="e3fa780">
  <link rel="image_src" href="https://habrastorage.org/getpro/habr/upload_files/271/9e6/152/2719e6152b24f96a617e88bc174ba39b.png" data-hid="2a79c45">
  <link rel="amphtml" href="https://habr.com/ru/amp/publications/907146/">
  <meta property="og:title" content="Game++. while (!game(over))">
  <meta name="twitter:title" content="Game++. while (!game(over))">
  <meta name="aiturec:title" content="Game++. while (!game(over))">
  <meta name="description" content="Когда деревья были большими, а игровые движки маленькими - выбора писать или не писать свой не стояло - если у тебя нет своего движка, фактически у тебя нет игры. Кто-то покупал чужой движок и...">
  <meta itemprop="description" content="Когда деревья были большими, а игровые движки маленькими - выбора писать или не писать свой не стояло - если у тебя нет своего движка, фактически у тебя нет игры. Кто-то покупал чужой движок и...">
  <meta property="og:description" content="Когда деревья были большими, а игровые движки маленькими - выбора писать или не писать свой не стояло - если у тебя нет своего движка, фактически у тебя нет игры. Кто-то покупал чужой движок и...">
  <meta name="twitter:description" content="Когда деревья были большими, а игровые движки маленькими - выбора писать или не писать свой не стояло - если у тебя нет своего движка, фактически у тебя нет игры. Кто-то покупал чужой движок и...">
  <meta property="aiturec:description" content="Когда деревья были большими, а игровые движки маленькими - выбора писать или не писать свой не стояло - если у тебя нет своего движка, фактически у тебя нет игры. Кто-то покупал чужой движок и...">
  <meta itemprop="image" content="https://habrastorage.org/getpro/habr/upload_files/271/9e6/152/2719e6152b24f96a617e88bc174ba39b.png">
  <meta property="og:image" content="https://habrastorage.org/getpro/habr/upload_files/271/9e6/152/2719e6152b24f96a617e88bc174ba39b.png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="aiturec:image" content="https://habrastorage.org/getpro/habr/upload_files/271/9e6/152/2719e6152b24f96a617e88bc174ba39b.png">
  <meta name="twitter:image" content="https://habrastorage.org/getpro/habr/upload_files/271/9e6/152/2719e6152b24f96a617e88bc174ba39b.png">
  <meta property="vk:image" content="https://habrastorage.org/getpro/habr/upload_files/271/9e6/152/2719e6152b24f96a617e88bc174ba39b.png?format=vk">
  <meta property="vk:image" content="https://habrastorage.org/getpro/habr/upload_files/271/9e6/152/2719e6152b24f96a617e88bc174ba39b.png?format=vk">
  <meta property="aiturec:item_id" content="907146">
  <meta property="aiturec:datetime" content="2025-05-06T18:55:43.000Z">
  <meta content="https://habr.com/ru/articles/907146/" property="og:url">
  <meta property="og:type" content="article">
  <meta property="og:locale" content="ru_RU">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta name="keywords" content="с++, game++, разработка игр, игры и игровые консоли">
  <script type="application/ld+json" data-hid="1e0f0a2">{"@context":"http:\/\/schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/habr.com\/ru\/articles\/907146\/"},"headline":"Game++. while (!game(over))","datePublished":"2025-05-06T21:55:43+03:00","dateModified":"2025-05-07T00:45:14+03:00","author":{"@type":"Person","name":"Sergei Kushnirenko"},"publisher":{"@type":"Organization","name":"Habr","logo":{"@type":"ImageObject","url":"https:\/\/habrastorage.org\/webt\/a_\/lk\/9m\/a_lk9mjkccjox-zccjrpfolmkmq.png"}},"description":"Когда деревья были большими, а игровые движки маленькими - выбора писать или не писать свой не стояло - если у тебя нет своего движка, фактически у тебя нет игры...","url":"https:\/\/habr.com\/ru\/articles\/907146\/#post-content-body","about":["h_cpp","h_programming","h_gamedev","h_games","f_develop","f_popsci"],"image":["https:\/\/habr.com\/share\/publication\/907146\/3b4a8d3e6d655e50d56ab17e538f88f6\/","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/271\/9e6\/152\/2719e6152b24f96a617e88bc174ba39b.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/aa0\/ea7\/acc\/aa0ea7accb8222bcb6031fb027f0c9a4.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/5bd\/f69\/c2e\/5bdf69c2e99ebc6f8de3884a64b7000b.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/b33\/1db\/317\/b331db317dc39d2f8d5d1f46b1538a78.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/87b\/1c7\/1d3\/87b1c71d3716d5933e600c132f8f96a5.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/15b\/f0b\/663\/15bf0b6639997c77903a0936c7821b7c.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/4b3\/3ee\/205\/4b33ee205256ec3cb8bb3716684ba7c7.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/a02\/c27\/ef6\/a02c27ef614bc11076e162638ef91af4.png"]}</script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover,maximum-scale=1,user-scalable=0">
  <meta name="referrer" content="unsafe-url">
  <style>
      /* cyrillic-ext */
      @font-face {
        font-family: 'Fira Sans';
        font-style: normal;
        font-weight: 400;
        font-display: swap;
        src: url(https://fonts.gstatic.com/s/firasans/v17/va9E4kDNxMZdWfMOD5VvmojLazX3dGTP.woff2) format('woff2');
        unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
      }

      /* cyrillic */
      @font-face {
        font-family: 'Fira Sans';
        font-style: normal;
        font-weight: 400;
        font-display: swap;
        src: url(https://fonts.gstatic.com/s/firasans/v17/va9E4kDNxMZdWfMOD5Vvk4jLazX3dGTP.woff2) format('woff2');
        unicode-range: U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
      }

      /* latin-ext */
      @font-face {
        font-family: 'Fira Sans';
        font-style: normal;
        font-weight: 400;
        font-display: swap;
        src: url(https://fonts.gstatic.com/s/firasans/v17/va9E4kDNxMZdWfMOD5VvmYjLazX3dGTP.woff2) format('woff2');
        unicode-range: U+0100-02AF, U+0304, U+0308, U+0329, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
      }

      /* latin */
      @font-face {
        font-family: 'Fira Sans';
        font-style: normal;
        font-weight: 400;
        font-display: swap;
        src: url(https://fonts.gstatic.com/s/firasans/v17/va9E4kDNxMZdWfMOD5Vvl4jLazX3dA.woff2) format('woff2');
        unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
      }

      /* cyrillic-ext */
      @font-face {
        font-family: 'Fira Sans';
        font-style: normal;
        font-weight: 500;
        font-display: swap;
        src: url(https://fonts.gstatic.com/s/firasans/v17/va9B4kDNxMZdWfMOD5VnZKveSxf6Xl7Gl3LX.woff2) format('woff2');
        unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
      }

      /* cyrillic */
      @font-face {
        font-family: 'Fira Sans';
        font-style: normal;
        font-weight: 500;
        font-display: swap;
        src: url(https://fonts.gstatic.com/s/firasans/v17/va9B4kDNxMZdWfMOD5VnZKveQhf6Xl7Gl3LX.woff2) format('woff2');
        unicode-range: U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
      }

      /* latin-ext */
      @font-face {
        font-family: 'Fira Sans';
        font-style: normal;
        font-weight: 500;
        font-display: swap;
        src: url(https://fonts.gstatic.com/s/firasans/v17/va9B4kDNxMZdWfMOD5VnZKveSBf6Xl7Gl3LX.woff2) format('woff2');
        unicode-range: U+0100-02AF, U+0304, U+0308, U+0329, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
      }

      /* latin */
      @font-face {
        font-family: 'Fira Sans';
        font-style: normal;
        font-weight: 500;
        font-display: swap;
        src: url(https://fonts.gstatic.com/s/firasans/v17/va9B4kDNxMZdWfMOD5VnZKveRhf6Xl7Glw.woff2) format('woff2');
        unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
      }

      /* cyrillic-ext */
      @font-face {
        font-family: 'Fira Sans';
        font-style: normal;
        font-weight: 700;
        font-display: swap;
        src: url(https://fonts.gstatic.com/s/firasans/v17/va9B4kDNxMZdWfMOD5VnLK3eSxf6Xl7Gl3LX.woff2) format('woff2');
        unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
      }

      /* cyrillic */
      @font-face {
        font-family: 'Fira Sans';
        font-style: normal;
        font-weight: 700;
        font-display: swap;
        src: url(https://fonts.gstatic.com/s/firasans/v17/va9B4kDNxMZdWfMOD5VnLK3eQhf6Xl7Gl3LX.woff2) format('woff2');
        unicode-range: U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
      }

      /* latin-ext */
      @font-face {
        font-family: 'Fira Sans';
        font-style: normal;
        font-weight: 700;
        font-display: swap;
        src: url(https://fonts.gstatic.com/s/firasans/v17/va9B4kDNxMZdWfMOD5VnLK3eSBf6Xl7Gl3LX.woff2) format('woff2');
        unicode-range: U+0100-02AF, U+0304, U+0308, U+0329, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
      }

      /* latin */
      @font-face {
        font-family: 'Fira Sans';
        font-style: normal;
        font-weight: 700;
        font-display: swap;
        src: url(https://fonts.gstatic.com/s/firasans/v17/va9B4kDNxMZdWfMOD5VnLK3eRhf6Xl7Glw.woff2) format('woff2');
        unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
      }
    </style>
  <link rel="preload" href="https://assets.habr.com/habr-web/css/theme/light-v1.css" as="style" media="(prefers-color-scheme: light)">
  <link rel="preload" href="https://assets.habr.com/habr-web/css/theme/dark-v1.css" as="style" media="(prefers-color-scheme: dark)">
  <link id="light-colors" rel="stylesheet" href="https://assets.habr.com/habr-web/css/theme/light-v1.css" media="(prefers-color-scheme: light)">
  <link id="dark-colors" rel="stylesheet" href="https://assets.habr.com/habr-web/css/theme/dark-v1.css" media="(prefers-color-scheme: dark)">
  <script>window.i18nFetch = new Promise((res, rej) => {
          const xhr = new XMLHttpRequest();
          xhr.open('GET', '/js/i18n/ru-compiled.635b6c39236ebd33fa716c71ab0131a0.json');
          xhr.responseType = 'json';
          xhr.onload = function(e) {
            if (this.status === 200) {
              res({ru: xhr.response});
            } else {
              rej(e);
            }
          };
          xhr.send();
        });</script>
  <style>
      .grecaptcha-badge {
        visibility: hidden;
      }
    </style>
  <meta name="habr-version" content="2.241.0">
  <meta name="apple-mobile-web-app-status-bar-style" content="#303b44">
  <meta name="msapplication-TileColor" content="#629FBC">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <link rel="shortcut icon" type="image/png" sizes="16x16" href="https://assets.habr.com/habr-web/img/favicons/favicon-16.png">
  <link rel="shortcut icon" type="image/png" sizes="32x32" href="https://assets.habr.com/habr-web/img/favicons/favicon-32.png">
  <link rel="apple-touch-icon" type="image/png" sizes="76x76" href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-76.png">
  <link rel="apple-touch-icon" type="image/png" sizes="120x120" href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.png">
  <link rel="apple-touch-icon" type="image/png" sizes="152x152" href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-152.png">
  <link rel="apple-touch-icon" type="image/png" sizes="180x180" href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-180.png">
  <link rel="apple-touch-icon" type="image/png" sizes="256x256" href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-256.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="https://assets.habr.com/habr-web/img/splashes/splash_1136x640.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="https://assets.habr.com/habr-web/img/splashes/splash_2436x1125.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="https://assets.habr.com/habr-web/img/splashes/splash_1792x828.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="https://assets.habr.com/habr-web/img/splashes/splash_828x1792.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="https://assets.habr.com/habr-web/img/splashes/splash_1334x750.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2668.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="https://assets.habr.com/habr-web/img/splashes/splash_2208x1242.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="https://assets.habr.com/habr-web/img/splashes/splash_1125x2436.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2208.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="https://assets.habr.com/habr-web/img/splashes/splash_2732x2048.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="https://assets.habr.com/habr-web/img/splashes/splash_2688x1242.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="https://assets.habr.com/habr-web/img/splashes/splash_2224x1668.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="https://assets.habr.com/habr-web/img/splashes/splash_750x1334.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="https://assets.habr.com/habr-web/img/splashes/splash_2048x2732.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="https://assets.habr.com/habr-web/img/splashes/splash_2388x1668.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2224.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="https://assets.habr.com/habr-web/img/splashes/splash_640x1136.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2388.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="https://assets.habr.com/habr-web/img/splashes/splash_2048x1536.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="https://assets.habr.com/habr-web/img/splashes/splash_1536x2048.png">
  <link rel="mask-icon" color="#77a2b6" href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.svg">
  <link crossorigin="use-credentials" href="/manifest.webmanifest" rel="manifest">
  <script async src="https://unpkg.com/pwacompat" crossorigin="anonymous"></script>
  <script>window.yaContextCb = window.yaContextCb || []</script>
  <script src="https://yandex.ru/ads/system/context.js" async></script>
  <link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-vendors.04465f7c.css" as="style">
  <link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-vendors.978df117.js" as="script">
  <link rel="preload" href="https://assets.habr.com/habr-web/css/app.8599692f.css" as="style">
  <link rel="preload" href="https://assets.habr.com/habr-web/js/app.58b8c457.js" as="script">
  <link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-vendors.04465f7c.css">
  <link rel="stylesheet" href="https://assets.habr.com/habr-web/css/app.8599692f.css">
 </head>
 <body>
  <div id="mount">
   <div id="app">
    <div class="tm-layout__wrapper">
     <!--[--><!---->
     <div></div><!---->
     <header class="tm-header" data-test-id="header">
      <div class="tm-page-width">
       <!--[-->
       <div class="tm-header__container">
        <!----><span class="tm-header__logo-wrap"><a class="tm-header__logo tm-header__logo_hl-ru tm-header__logo" href="/ru/">
          <svg class="tm-svg-img tm-header__icon" height="16" width="16">
           <title>
            Хабр
           </title><use xlink:href="/img/habr-logo-ru.svg#logo"></use>
          </svg></a><span style="display:none;" class="tm-header__beta-sign">β</span></span><!--[-->
        <div class="tm-dropdown tm-header__projects">
         <div class="tm-dropdown__head">
          <!--[-->
          <button class="tm-header__dropdown-toggle">
           <svg class="tm-svg-img tm-header__icon tm-header__icon_dropdown" height="16" width="16">
            <title>
             Открыть список
            </title><use xlink:href="/img/megazord-v28.7909a852..svg#arrow-down"></use>
           </svg></button><!--]-->
         </div><!---->
        </div><a href="/ru/sandbox/start/" class="tm-header__become-author-btn">Как стать автором</a>
        <div class="tm-feature tm-feature tm-feature_variant-inline tm-header__feature">
         <!---->
        </div><!----><!--]--><!---->
       </div><!--]-->
      </div>
     </header>
     <div class="tm-layout">
      <div class="tm-page-progress-bar"></div>
      <div class="tm-base-layout__header_is-sticky tm-base-layout__header" data-menu-sticky="true">
       <div class="tm-page-width">
        <!--[-->
        <div class="tm-base-layout__header-wrapper">
         <div class="tm-main-menu">
          <div class="tm-main-menu__section">
           <nav class="tm-main-menu__section-content">
            <!--[--><a class="tm-main-menu__item" data-test-id="main-menu-item" href="/ru/feed/">Моя лента</a><!--]--><!--[--><a class="tm-main-menu__item" href="/ru/articles/">Все потоки</a><!--]--><!--[--><!--[--><a class="tm-main-menu__item" data-test-id="main-menu-item" href="/ru/flows/develop/">Разработка</a><!--]--><!--[--><a class="tm-main-menu__item" data-test-id="main-menu-item" href="/ru/flows/admin/">Администрирование</a><!--]--><!--[--><a class="tm-main-menu__item" data-test-id="main-menu-item" href="/ru/flows/design/">Дизайн</a><!--]--><!--[--><a class="tm-main-menu__item" data-test-id="main-menu-item" href="/ru/flows/management/">Менеджмент</a><!--]--><!--[--><a class="tm-main-menu__item" data-test-id="main-menu-item" href="/ru/flows/marketing/">Маркетинг</a><!--]--><!--[--><a class="tm-main-menu__item" data-test-id="main-menu-item" href="/ru/flows/popsci/">Научпоп</a><!--]--><!--]-->
           </nav>
          </div>
         </div>
         <div class="tm-header-user-menu tm-base-layout__user-menu">
          <a href="/ru/search/" class="tm-header-user-menu__item tm-header-user-menu__search" data-test-id="search-button">
           <svg class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_search tm-header-user-menu__icon_dark" height="24" width="24">
            <title>
             Поиск
            </title><use xlink:href="/img/megazord-v28.7909a852..svg#search"></use>
           </svg></a><!----><!---->
          <div class="tm-header-user-menu__item tm-header-user-menu__write">
           <div>
            <svg class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_write tm-header-user-menu__icon_dark" height="24" width="24">
             <title>
              Написать публикацию
             </title><use xlink:href="/img/megazord-v28.7909a852..svg#write"></use>
            </svg>
           </div><!---->
          </div><!--[-->
          <div class="tm-header-user-menu__item">
           <button class="tm-header-user-menu__toggle" data-test-id="user-menu-settings">
            <svg class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_dark" height="24" width="24">
             <title>
              Настройки
             </title><use xlink:href="/img/megazord-v28.7909a852..svg#page-settings"></use>
            </svg></button>
          </div><a href="https://habr.com/kek/v1/auth/habrahabr/?back=/ru/articles/907146/&amp;hl=ru" rel="nofollow" class="tm-header-user-menu__item"><!--[-->
           <button class="btn btn_solid btn_small tm-header-user-menu__login" type="button"><!--[-->Войти<!--]--></button><!--]--></a><!--]--><!----><!--teleport start--><!--teleport end--><!---->
         </div>
        </div><!--]-->
       </div>
      </div><!---->
      <div class="tm-page-width">
       <!--[--><!--]-->
      </div>
      <main class="tm-layout__container">
       <div class="tm-page" hl="ru" data-async-called="true" style="--5ab2e5a8:16px;--44c4f6f6:100%;--45ba7a3b:0;">
        <div class="tm-page-width">
         <!--[--><!---->
         <div class="tm-page__wrapper">
          <div class="tm-page__main_has-sidebar tm-page__main">
           <div class="pull-down">
            <!---->
            <div class="pull-down__header" style="height:0px;">
             <div class="pull-down__content" style="bottom:10px;">
              <svg class="tm-svg-img pull-down__icon pull-down__arrow" height="24" width="24">
               <title>
                Обновить
               </title><use xlink:href="/img/megazord-v28.7909a852..svg#pull-arrow"></use>
              </svg>
             </div>
            </div><!--[--><!--[--><!---->
            <div class="tm-article-presenter">
             <!--[--><!--]-->
             <div class="tm-article-presenter__body" data-test-id="article-body">
              <div class="tm-misprint-area">
               <div class="tm-misprint-area__wrapper">
                <!--[-->
                <article class="tm-article-presenter__content tm-article-presenter__content_narrow">
                 <!--[-->
                 <div class="tm-article-presenter__header">
                  <!--[--><!--]-->
                  <div class="tm-article-snippet tm-article-snippet tm-article-presenter__snippet">
                   <!--[--><!--]-->
                   <div class="tm-article-snippet__meta-container">
                    <div class="tm-article-snippet__meta">
                     <span class="tm-user-info tm-article-snippet__author"><a href="/ru/users/dalerank/" class="tm-user-info__userpic" data-test-id="user-info-pic" title="dalerank">
                       <div class="tm-entity-image">
                        <img alt="" class="tm-entity-image__pic" height="24" src="//habrastorage.org/r/w48/getpro/habr/avatars/ae5/f74/b00/ae5f74b00f68105d98362bd11f263809.jpg" width="24">
                       </div></a><span class="tm-user-info__user tm-user-info__user_appearance-default" data-test-id="user-info-description"><a href="/ru/users/dalerank/" class="tm-user-info__username">dalerank <!----></a><!--[--><span class="tm-article-datetime-published"><time datetime="2025-05-06T18:55:43.000Z" title="2025-05-06, 21:55">11 часов назад</time></span><!--]--></span></span>
                    </div><!---->
                   </div>
                   <h1 class="tm-title tm-title_h1" lang="ru" data-test-id="articleTitle"><span>Game++. while (!game(over))</span></h1>
                   <div class="tm-article-snippet__stats" data-test-id="articleStats">
                    <div class="tm-article-complexity tm-article-complexity_complexity-low">
                     <span class="tm-svg-icon__wrapper tm-article-complexity__icon">
                      <svg class="tm-svg-img tm-svg-icon" height="24" width="24">
                       <title>
                        Уровень сложности
                       </title><use xlink:href="/img/megazord-v28.7909a852..svg#complexity-low"></use>
                      </svg></span><span class="tm-article-complexity__label">Простой</span>
                    </div>
                    <div class="tm-article-reading-time">
                     <span class="tm-svg-icon__wrapper tm-article-reading-time__icon">
                      <svg class="tm-svg-img tm-svg-icon" height="24" width="24">
                       <title>
                        Время на прочтение
                       </title><use xlink:href="/img/megazord-v28.7909a852..svg#clock"></use>
                      </svg></span><span class="tm-article-reading-time__label">35 мин</span>
                    </div><span class="tm-icon-counter tm-data-icons__item">
                     <svg class="tm-svg-img tm-icon-counter__icon" height="24" width="24">
                      <title>
                       Количество просмотров
                      </title><use xlink:href="/img/megazord-v28.7909a852..svg#counter-views"></use>
                     </svg><span class="tm-icon-counter__value" title="2205">2.2K</span></span>
                   </div>
                   <div class="tm-publication-hubs__container" data-test-id="articleHubsList">
                    <div class="tm-publication-hubs">
                     <!--[--><span class="tm-publication-hub__link-container"><a href="/ru/hubs/cpp/" class="tm-publication-hub__link"><!--[--><span>C++</span><span class="tm-article-snippet__profiled-hub" title="Профильный хаб">*</span><!--]--></a></span><span class="tm-publication-hub__link-container"><a href="/ru/hubs/programming/" class="tm-publication-hub__link"><!--[--><span>Программирование</span><span class="tm-article-snippet__profiled-hub" title="Профильный хаб">*</span><!--]--></a></span><span class="tm-publication-hub__link-container"><a href="/ru/hubs/gamedev/" class="tm-publication-hub__link"><!--[--><span>Разработка игр</span><span class="tm-article-snippet__profiled-hub" title="Профильный хаб">*</span><!--]--></a></span><span class="tm-publication-hub__link-container"><a href="/ru/hubs/games/" class="tm-publication-hub__link"><!--[--><span>Игры и игровые консоли</span><!----><!--]--></a></span><!--]-->
                    </div>
                   </div>
                   <div class="tm-article-labels" data-test-id="articleLabels">
                    <div class="tm-article-labels__container">
                     <div class="tm-publication-label tm-publication-label_variant-opinion">
                      <span>Мнение</span>
                     </div><!--[--><!--]-->
                    </div>
                   </div><!----><!---->
                  </div>
                 </div><!--[--><!---->
                 <div class="tm-article-body" data-gallery-root lang="ru">
                  <div>
                   <!--[--><!--]-->
                  </div>
                  <div id="post-content-body">
                   <div>
                    <div class="article-formatted-body article-formatted-body article-formatted-body_version-2">
                     <div xmlns="http://www.w3.org/1999/xhtml">
                      <figure class="full-width ">
                       <img src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/271/9e6/152/2719e6152b24f96a617e88bc174ba39b.png" width="740" height="380" sizes="(max-width: 780px) 100vw, 50vw" srcset="https://habrastorage.org/r/w780/getpro/habr/upload_files/271/9e6/152/2719e6152b24f96a617e88bc174ba39b.png 780w,
       https://habrastorage.org/r/w1560/getpro/habr/upload_files/271/9e6/152/2719e6152b24f96a617e88bc174ba39b.png 781w" loading="lazy" decode="async">
                      </figure>
                      <p>Когда деревья были большими, а игровые движки маленькими - выбора писать или не писать свой не стояло - если у тебя нет своего движка, фактически у тебя нет игры. Кто-то покупал чужой движок и наслаждался прекрасными велосипедами импортной сборки, в то время как другие пилили свое, на что уходили месяцы, если не годы.</p>
                      <p>Эта серия статей родилась как заметки на полях к замечательной книге <code>Game Engine Architecture</code>, книга большая, объемная и охватывает все аспекты создания движка. Но там нет нюансов практической разработки. А чтобы видеть нюансы надо понимать не только теорию, все же GAE больше теория, но знать как работает код игры изнутри. Чтобы понимать как, и главное почему, используются выбранные механизмы внутри игры, чтобы видеть проблемы с производительностью и архитектурой, как их искать и как чинить, для этого придется понять как работают и как создавались игровые движки.</p>
                      <p>Если мне не изменяет память - Кармак сказал, что лучший способ [создания игр] — написать собственный движок ( "The right move is to build your own engine" ), на что многие возразят: это вовсе не так просто. Но папа Doom'a известен не только своим вкладом в разработку игровых движков, но и довольно часто высказывался критически о развитии игровых движков в целом, и о преимуществах создания собственных технологических решений вместо использования готовых.</p>
                      <p>Эта философия, которой он придерживается на протяжении всей карьеры, была связана с тем, что собственный движок даёт разработчикам полный контроль над технологией и возможность создавать решения, заточенные под конкретные нужды их проектов.</p>
                      <hr>
                      <ul>
                       <li>
                        <p><a href="https://habr.com/ru/articles/873016/" rel="noopener noreferrer nofollow">Game++. String interning</a></p></li>
                       <li>
                        <p><a href="https://habr.com/ru/articles/873990/" rel="noopener noreferrer nofollow">Game++. Cooking vectors</a></p></li>
                       <li>
                        <p><a href="https://habr.com/ru/articles/876804/" rel="noopener noreferrer nofollow">Game++. Dancing with allocators</a></p></li>
                       <li>
                        <p><a href="https://habr.com/ru/articles/880918/" rel="noopener noreferrer nofollow">Game++. Juggling STL algoritms</a></p></li>
                       <li>
                        <p><a href="https://habr.com/ru/articles/882684/" rel="noopener noreferrer nofollow">Game++. run, thread, run...</a></p></li>
                       <li>
                        <p><a href="https://habr.com/ru/articles/885780/" rel="noopener noreferrer nofollow">Game++. Building arcs</a></p></li>
                       <li>
                        <p><a href="https://habr.com/ru/articles/891700/" rel="noopener noreferrer nofollow">Game++. Unpacking containers</a></p></li>
                       <li>
                        <p><a href="https://habr.com/ru/articles/896958/" rel="noopener noreferrer nofollow">Game++. Heap? Less</a></p></li>
                       <li>
                        <p><a href="https://habr.com/ru/articles/898930/" rel="noopener noreferrer nofollow">Game++. Work hard</a></p></li>
                       <li>
                        <p><a href="https://habr.com/ru/articles/903744/" rel="noopener noreferrer nofollow">Game++. Patching patterns</a></p></li>
                       <li>
                        <p>Game++. while (!game(over)) &lt;=== Вы тут</p></li>
                       <li>
                        <p>Game++. Bonus. Performance traps</p></li>
                      </ul>
                      <p>Но, знаете, каждый по-своему прав — универсального ответа нет, всё зависит от конкретной ситуации. Может быть, создание собственного движка не так уж и сложно, как кажется? Зачем вообще это делать? И что вообще значит «создать игровой движок»?</p>
                      <p>Я работал с разными игровыми движками, и сделал с нуля парочку своих, а еще два до них ушли в мусорную корзину. На первом(третьем) было шипнуто три коммерческих игры, но без особо успеха и в итоге он ушел одной питерской студии за бешенную толпу вечнозеленых енотов в количестве аж 70^2 - это было 15 лет назад. И видел, как разработчики используют другие движки, как жалуются на них, как рассказывают о своих собственных решениях. Изучал исходный код других (открытых и не очень) движков. И думаю - есть кое-что сказать по этому вопросу, хотя, признаюсь, мой опыт может быть несколько предвзятым или однобоким, всегда хотел делать стратегии, но предлагали почему-то преимущественно шутеры.</p>
                      <h3>Первый главный вопрос - зачем?</h3>
                      <ul>
                       <li>
                        <p>Во первых, вторых и третьих - это очень весело, обещаю</p></li>
                       <li>
                        <p>В четвертых - это опыт, за который многие компании готовы платить хорошие деньги.</p></li>
                       <li>
                        <p>Вы точно очень многому научитесь в процессе, что поможет вам лучше понимать другие движки, да и не только движки и, как следствие, поможет вам создавать игры в будущем, даже если вы выбросите свой собственный движок в мусорное ведро.</p></li>
                       <li>
                        <p>Кстати про мусорное ведро, первый и скорее всего второй движок уйдут именно туда, судя по моему опыту и опыту знакомых, не зря говорят про правило трех систем.</p></li>
                       <li>
                        <p>Собственный игровой движок бесплатен настолько, насколько бесплатно ваше вечернее время — ничто не бывает по-настоящему бесплатным.</p></li>
                       <li>
                        <p>Движок можно оптимизировать под свои хотелки (или нужды конкретного проекта) с точки зрения производительности, времени итерации, архитектуры движка и многих других вещей. Я вот в какой-то момент захотел хот-релоад конфигов на JS, да странное желание, но пришлось выучить и JS и понять как всё работает под капотом VM. А потом мне надоели текстуры из паков и захотелось сделать батчинг текстур с диска в рантайме (динамический атлас). У меня странные желания.</p></li>
                       <li>
                        <p>У вас будет полный контроль над тем, как все работает внутри и какие технологии используются</p></li>
                       <li>
                        <p>Можно использовать свой любимый язык программирования - хотя, вероятно, игровые движки написаны пожалуй на всех возможных языках программирования этой планеты, видел даже на erlang - на коболе вот не видел, но думаю тоже где-то есть.</p></li>
                       <li>
                        <p>Можно сделать очень маленький дистрибутив, бинарник Akhenaten.exe занимает около 2Мб, с учетом что часть ресурсов и скриптов упакованы прямо в него, графика конечно отдельно.</p></li>
                       <li>
                        <p>Вы скорее всего захотите сделать свой движок открытым и посмотреть, как его используют другие. Я не очень понимаю зачем скрывать именно код движка, движок - это не игра - но даже если отдать весь код репозитория(со всеми ресурсами, моделями, музыкой, скриптами и подробным описанием как собирать) на гитхаб, собрать его смогут 0.1% людей, от тех что скачали репо. Тех что осилили, можно позвать в студию в качестве разработчиков. Хм, а ведь Unreal провернул именно это, предлагая позиции в команде разработчиков отличившимся в комитах.</p></li>
                       <li>
                        <p>Вы даже можете продать свой движок, но имейте в виду, что поддержка движка под чужие хотелки — это отдельный уровень в аду</p></li>
                       <li>
                        <p>Вы никогда не будете разочарованы из-за того, что разработчики движка не реализовали нужную функцию</p></li>
                       <li>
                        <p>На техсобесах (проверено не одной студией) разговоры так или иначе приходят к обсуждению решений, которые вы делаете в своем движке, и вот уже вы задаёте вопросы, а как у вас? :)</p></li>
                      </ul>
                      <p>Для меня важнее всего оказались первые два и последний пункт. Обучение — это весело, обучение и создание игры - весело в квадрате. А еще я просто обожаю программировать, делать то, что язык "как-бы" не позволяет, разбираться в алгоритмах и системах, ковыряться в сложных деталях и тонкостях языка. Ну а задушевные разговоры на собесах уже идут бонусом.</p>
                      <p>Люди жалуются на движки: то не работает, это ломалось, это новое не поддерживает вот то старое, а то старое просили добавить ещё десять лет назад, и до сих пор ничего не добавили. Конечно, у всего этого есть причины — если вы когда-нибудь работали в крупной компании, вы точно меня поймёте. Но всегда легче винить кого-то другого, чем себя. Если тебе так нужна эта функция возьми и напиши, разве нет? Нет, потому что это не твой движок. Движок чужой - а вот разочарование твоё. Это ожидаемо. Как ожидаемо что нужная фича в своем движке будет добавлена, когда она действительно понадобится.</p>
                      <h3>Второй главный вопрос - а надо ли?</h3>
                      <ul>
                       <li>
                        <p>Свой проект это всегда тяжело и требует много времени, реально много времени. Конечно, многое зависит от конечных целей, но не стоит ожидать, что вы за год напишете клон Unreal Engine, особенно учитывая что сам анриал пишут уже вот лет двадцать командой топовых инженеров, а сейчас еще и комьюнити.</p></li>
                       <li>
                        <p>В собственном движке постоянно будет чего-то не хватать. Нужно будет потратить долгие годы упорной работы, чтобы достичь хотя бы части функциональности и удобства использования, которыми обладают зрелые движки.</p></li>
                       <li>
                        <p>Вы никогда не сможете соперничать с крупными индустриальными движками вроде того же Unreal, Unity, СryEngine и даже Godot. Разве что вы — большая и богатая студия, но тогда эта статья вам, скорее всего, уже не особо нужна, потому у вас уже есть свой движок, или вы использутет что-то из вышеперечисленного.</p></li>
                       <li>
                        <p>В 99 случаев из 100 разработчики движка так никогда и не добираются до самой игры, если ставить целью разработать движок. Это прямой путь к выкидыванию проекта.</p></li>
                       <li>
                        <p>Большинство людей будут считать вас очень неумным человеком, просто за то, что вы тратите время чтобы делать свой движок.</p></li>
                       <li>
                        <p>Лучше потратить время на доработку фичей и исправление багов того же Unreal, это даст больше опыта в плане Unreal и бонусы при устройстве в студии, которые его используют</p></li>
                       <li>
                        <p>Если вы дочитали, до этого пункта, значит я вас не убедил, что это неблагодарное занятие, тогда идем дальше...</p></li>
                      </ul>
                      <p>Тут надо понимать: затраты на разработку собственного движка никогда не окупятся, не будет такого момента, что со вчерашнего дня движок стал выходить по нулям. Нет, даже у топовых студий это убыточная статья. Деньги зарабатывают игры, движке - нет. Из отчета того-же Unreal, затраты на разработку движка за последние только четыре года соcтавили больше 160$ млн, фактически эпики каждый год делают новую AAA-игру, только мы этого не видим.</p>
                      <p>Но написав хорошую основу, можно будет использовать её снова и снова, улучшая с каждой новой игрой. Если ваша цель — выпустить игру как можно быстрее, просто выберите готовый движок и используйте тот функционал, который там есть. Если же вы хотите расти как разработчик, обеспечить себе базу для будущих проектов, не только в игрострое, и у вас есть время, силы и терпение, — тогда дерзайте, свой движок это пожалуй лучшее применение знаний!</p>
                      <p>Так стоит ли делать свой движок? Как минимум, стоит думать самому и не полагаться на мнение автора случайной статьи на Хабре.</p>
                      <figure class="full-width ">
                       <img src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/aa0/ea7/acc/aa0ea7accb8222bcb6031fb027f0c9a4.png" width="669" height="299" sizes="(max-width: 780px) 100vw, 50vw" srcset="https://habrastorage.org/r/w780/getpro/habr/upload_files/aa0/ea7/acc/aa0ea7accb8222bcb6031fb027f0c9a4.png 780w,
       https://habrastorage.org/r/w1560/getpro/habr/upload_files/aa0/ea7/acc/aa0ea7accb8222bcb6031fb027f0c9a4.png 781w" loading="lazy" decode="async">
                      </figure>
                      <h3>Что такое игровой движок?</h3>
                      <p>Является ли SDL/SFML/Allegro игровым движком, хотя на них сделаны бесчетное число инди игр? Точно нет — это библиотеки для обертки над платформенным кодом, хотя они умеют все что умеет базовый игровой движок. А Vulkan/DX11? Точно нет - это графический API. А FMOD/WWISE? Тоже нет — но они позволяют реализовать двух/трехмерную сцену, правда звуковую.</p>
                      <p>А теперь представьте себе маленький проект, который объединяет Allegro, Dx11 и stbi (библиотека для загрузки изображений разных форматов), чтобы рисовать на экране движущиеся спрайты. Будет ли это игровым движком? Тоже нет, хотя очень близко - игровой движок появляется, когда есть игра, или игры на нем сделанные. Пока игр нет, это всего лишь набор библиотек, как-то слепленных вместе через cmake.</p>
                      <p>Может быть, это просто сочетание графики, анимации и обработки пользовательского ввода? Игровой движок без игры — это просто набор инструментов, библиотек и других компонентов, предназначенных для помощи в создании игр. Если вам показалось, что это определение расплывчатое, почти бесполезное — вам не показалось.</p>
                      <p>Если вы делаете 2D платформер с пиксельной графикой, вам действительно нужны сложные редакторы материалов и километровые шейдеры, бесшовная геометрия глобальное освещение для неё, 3D-физика с обратной кинематикой и поддержка сетевой игры? У анриала всё это есть и в неплохом качестве, но нужно ли всё это вам. А оно требует опыта, привыкания и умения настроить и пользоваться.</p>
                      <p>Всё, что потребуется — это обрабатывать инпут, рендерить спрайты, возможно даже cырые png на экране и воспроизводить звук. Всё это пишется за пару дней по открытым гайдам на ютубе. И эти пара вечеров будут потрачены с пользой, и вот вы перешли к самому главному ради чего это всё затевалось, к созданию игры.</p>
                      <p>А если вы хотите создать ААА-хит с топовой графикой, физикой и всем прочим? Тогда да, вам понадобятся все эти сложнейшие системы. И пара десятков свободных лет жизни, чтобы ежедневно работать только над движком и всё это реализовать - да, современные игровые движки безнадежно далеко ушли от ретро-платформера.</p>
                      <h3>Что умеет игровой движок?</h3>
                      <p>Первое что хочу сказать - движок могет быть маленьким, конкретно под вашу игру. Но давайте будем честными - мы разбалованы возможностями больших движков и переносим эти ожидания и ждем того же поведения от всех других. Но если движок изначально заточен под какую-то одну игру мало фичей — это тоже нормально. Тем не менее большинство игровых движков будут уметь следующее:</p>
                      <details class="spoiler">
                       <summary>Крутить игровой цикл и обрабатывать события</summary>
                       <div class="spoiler__content">
                        <ul>
                         <li>
                          <p>визуальные редакторы уровней и UI</p></li>
                         <li>
                          <p>обновление логики</p></li>
                         <li>
                          <p>систему сцен/уровней</p></li>
                         <li>
                          <p>менеджер сущностей (Entity Manager)</p></li>
                         <li>
                          <p>система сериализации состояния игры</p></li>
                         <li>
                          <p>откат состояния (для тестирования и дебага)</p></li>
                         <li>
                          <p>инспектор переменных</p></li>
                        </ul>
                       </div>
                      </details>
                      <details class="spoiler">
                       <summary>Обрабатывать инпут</summary>
                       <div class="spoiler__content">
                        <ul>
                         <li>
                          <p>клавиатура, мышь, контроллер, тач</p></li>
                         <li>
                          <p>поддержка мультиинпута (одновременные контроллеры, локальный кооп)</p></li>
                         <li>
                          <p>переназначаемые клавиши и профили управления</p></li>
                        </ul>
                       </div>
                      </details>
                      <details class="spoiler">
                       <summary>Искусственный интеллект</summary>
                       <div class="spoiler__content">
                        <ul>
                         <li>
                          <p>дебаггер AI и поведения</p></li>
                         <li>
                          <p>встроенная система навигации, прокладку пути по карте</p></li>
                         <li>
                          <p>динамическое обновление навмеша</p></li>
                         <li>
                          <p>систему поведения (например, behavior trees или FSM)</p></li>
                         <li>
                          <p>perception (видимость, слух, агро)</p></li>
                        </ul>
                       </div>
                      </details>
                      <details class="spoiler">
                       <summary>Обрабатывать физику: 2D или 3D</summary>
                       <div class="spoiler__content">
                        <ul>
                         <li>
                          <p>джойнты (соединения между объектами)</p></li>
                         <li>
                          <p>raycast (проверка линий на столкновение)</p></li>
                         <li>
                          <p>столкновения и триггеры (коллайдеры)</p></li>
                         <li>
                          <p>динамика (масса, силы, импульсы)</p></li>
                        </ul>
                       </div>
                      </details>
                      <details class="spoiler">
                       <summary>Загружать и управлять ресурсами</summary>
                       <div class="spoiler__content">
                        <ul>
                         <li>
                          <p>упаковка ресурсов в архивы</p></li>
                         <li>
                          <p>текстуры, модели, звуки, скрипты, уровни</p></li>
                         <li>
                          <p>уметь загружать форматы (через библиотеки: <code>stb_image</code>, <code>Assimp</code>, <code>FMOD</code>)</p></li>
                         <li>
                          <p>кэшировать и повторно использовать данные</p></li>
                         <li>
                          <p>поддерживать hot-reload (перезагрузка на лету, без перезапуска игры)</p></li>
                         <li>
                          <p>следить за зависимостями (если шейдер использует текстуру — перезагружать вместе)</p></li>
                         <li>
                          <p>генерации билдов под разные платформы</p></li>
                         <li>
                          <p>инспекторы объектов и компонентов</p></li>
                         <li>
                          <p>горячую замену кода или данных (hot reload)</p></li>
                         <li>
                          <p>поддержку "префабов" — шаблонов объектов</p></li>
                         <li>
                          <p>поддерживать auto-update и патчи</p></li>
                        </ul>
                       </div>
                      </details>
                      <details class="spoiler">
                       <summary>Рендерить финальное изображение</summary>
                       <div class="spoiler__content">
                        <ul>
                         <li>
                          <p>профилировщики CPU/GPU/памяти</p></li>
                         <li>
                          <p>скелетная анимация</p></li>
                         <li>
                          <p>blend trees и анимационные слои,</p></li>
                         <li>
                          <p>абстракции над низкоуровневыми API (OpenGL, Vulkan, Direct3D, Metal)</p></li>
                         <li>
                          <p>поддержка камер, перспективы, освещения, теней, постобработки</p></li>
                         <li>
                          <p>возможность отрисовать как 2D UI, так и 3D сцену</p></li>
                         <li>
                          <p>материалы, шейдеры, LOD, batching, occlusion culling</p></li>
                        </ul>
                       </div>
                      </details>
                      <details class="spoiler">
                       <summary>Поддерживать скриптовый язык или языки</summary>
                       <div class="spoiler__content">
                        <ul>
                         <li>
                          <p>писать поведение объектов на удобном языке (Lua, Python, GDScript)</p></li>
                         <li>
                          <p>не пересобирать игру при каждом изменении логики</p></li>
                         <li>
                          <p>реализовать hot-reload</p></li>
                        </ul>
                       </div>
                      </details>
                      <details class="spoiler">
                       <summary>Аудио</summary>
                       <div class="spoiler__content">
                        <ul>
                         <li>
                          <p>Играть медиа, звуки и эффекты</p></li>
                         <li>
                          <p>многоканальный звук (музыка, эффекты, речь)</p></li>
                         <li>
                          <p>позиционирования звука</p></li>
                         <li>
                          <p>эффекты (эхо, реверберация, фильтры)</p></li>
                         <li>
                          <p>микширования (сведение звуков в финальный поток)</p></li>
                         <li>
                          <p>управления громкостью по группам (музыка, UI, эффекты)</p></li>
                         <li>
                          <p>загрузки форматов (через OpenAL, SDL_Audio, FMOD, Wwise)</p></li>
                        </ul>
                       </div>
                      </details>
                      <details class="spoiler">
                       <summary>Пользовательский интерфейс</summary>
                       <div class="spoiler__content">
                        <ul>
                         <li>
                          <p>кнопки,</p></li>
                         <li>
                          <p>слайдеры,</p></li>
                         <li>
                          <p>текст,</p></li>
                         <li>
                          <p>списки, вкладки, панели.</p></li>
                        </ul>
                       </div>
                      </details>
                      <details class="spoiler">
                       <summary>Сеть</summary>
                       <div class="spoiler__content">
                        <ul>
                         <li>
                          <p>юнит-тесты для игровых систем</p></li>
                         <li>
                          <p>запись и воспроизведение сессий</p></li>
                         <li>
                          <p>сокеты, UDP/TCP</p></li>
                         <li>
                          <p>синхронизация состояния игры (состояния объектов, действия игроков)</p></li>
                         <li>
                          <p>репликация, интерполяция, предсказание</p></li>
                         <li>
                          <p>lobby-система, матчмейкинг, авторизация</p></li>
                        </ul>
                       </div>
                      </details>
                      <p>Наличие архитектуры, которая объединяет все эти подсистемы в единое целое необязательно, пока необязательно, но надо понимать - ваш конкретный движок может содержать лишь часть из этого списка — и при этом оставаться игровым движком. Не каждой игре нужны все функции сразу - иначе бы ни одна инди-игра не увидела свет.</p>
                      <h3>Программирование: нюансы</h3>
                      <p>Это может показаться странным, но для реализации игровой логики классическое программирование не является обязательным. Достаточно посмотреть на системы визуального программирования (Blueprints, VisualScript, ICS), которые существуют уже десятилетия и позволяют создавать сложные механики без написания самого кода. Это особенно популярно среди дизайнеров и художников, которые хотят быстро прототипировать идеи, не погружаясь в синтаксис языков программирования.</p>
                      <p>И да, дизайнеры тоже пишут код, визуальное программирование — это полноценный вид кодинга, просто слова <code>class, if, for</code> выглядят по другому. Однако суть не в терминах, а в практических аспектах. Реализация визуального скриптинга в движке требует создания специализированных инструментов: редакторов узлов, визуального же дебаггера, систем визуализации потоков данных, оптимизаторов и много чего еще. Это значительно усложняет разработку движка, например, в Unreal Engine за Blueprints стоит огромный объем низкоуровневого кода на C++, сравнимый с рендером или движком анимаций.</p>
                      <p>Классический код остаётся наиболее универсальным и гибким способом реализации логики, но все больше сдает свои позиции. Он не зависит от ограничений визуальных инструментов и позволяет работать на уровне системных ресурсов. Однако классический подход тянет за собой классические проблемы, вроде перекомпиляции, остановки движка для пересборки и потери времени на все эти операции, не говоря уже о том, что обучение дизайнеров разным языкам программирования вроде C++ оборачивается большими финансовыми и временными затратами, а цена ошибки та же, что и для игрового программиста - краш движка.</p>
                      <p>Поэтому для встраиваемой логики используют скриптовые языки вроде Lua, Python, Js, Angel - особенно если движок написан на C++. Они намного более лояльны к ошибкам в рантайме и позволят сэкономить кучу времени. Даже если вы разрабатываете движок с нуля, проще заложить сразу возможность скриптования и использования возможностей, на котором написан сам движок — это снижает накладные расходы и упрощает интеграцию.</p>
                      <p><strong>... и мифы</strong><br>
                       Создание движка всё равно требует программирования, здесь не будет коротких и легких путей. Какой язык выбрать? Честно, это не критично - лучший язык тот, который вы знаете, опытный разработчик критичные к производительности места сумеет оптимизировать намного лучше в своем языке и попутно избежит проблем новичков. Низкоуровневые языки вроде C++ дают прозрачность в управлении ресурсами, но и требуют качественно большего понимания архитектуры и теории разработки.</p>
                      <ul>
                       <li>
                        <p><strong>C++</strong>&nbsp;— эталон в геймдеве благодаря производительности и контролю над памятью.</p></li>
                       <li>
                        <p><strong>Rust</strong>&nbsp;— набирает популярность как безопасная альтернатива C++, но крупные студии пока обходят его стороной, ограничиваясь небольшими модулями от энтузиастов или в качестве экспериментов.</p></li>
                       <li>
                        <p><strong>C#</strong>&nbsp;— используется в Unity, и это является хорошим стимулом, чтобы другие начали смотреть на него с интересом, удобен благодаря .NET и богатым библиотекам.</p></li>
                       <li>
                        <p><strong>Python</strong>, <strong>Java и миллион других</strong>&nbsp;используют в качестве VM для прототипов - не все готовы учить плюсы, несмотря на их производительность.</p></li>
                      </ul>
                      <h3>Main window</h3>
                      <details class="spoiler">
                       <summary>Скрытый текст</summary>
                       <div class="spoiler__content">
                        <ul>
                         <li>
                          <p>EABase is a small set of header files that define platform-independent data types <br><a href="https://github.com/electronicarts/EABase" rel="noopener noreferrer nofollow">https://github.com/electronicarts/EABase</a></p></li>
                         <li>
                          <p>Minimal cross-platform standalone C headers <br><a href="https://github.com/floooh/sokol" rel="noopener noreferrer nofollow">https://github.com/floooh/sokol</a></p></li>
                         <li>
                          <p>stb single-file public domain libraries for C/C++ <br><a href="https://github.com/nothings/stb" rel="noopener noreferrer nofollow">https://github.com/nothings/stb</a></p></li>
                         <li>
                          <p>Abseil Common Libraries (C++) <br><a href="https://github.com/abseil/abseil-cpp" rel="noopener noreferrer nofollow">https://github.com/abseil/abseil-cpp</a></p></li>
                         <li>
                          <p>A C++ Template library, developed by Andrei Alexandrescu <br><a href="https://github.com/dutor/loki" rel="noopener noreferrer nofollow">https://github.com/dutor/loki</a></p></li>
                         <li>
                          <p>Generic game loop implementation <br><a href="https://github.com/ggabriel96/lasso" rel="noopener noreferrer nofollow">https://github.com/ggabriel96/lasso</a></p></li>
                        </ul>
                       </div>
                      </details>
                      <p>Большинство игр требуют окно для работы целиком. Даже браузерные игры здесь не исключение: окно может быть либо вся веб-страница целиком, либо конкретный элемент <code>&lt;canvas&gt;</code>, внутри которого исполняется игра. Создание окна обычно происходит через платформо-зависимые механизмы, эти низкоуровневые интерфейсы, как правило, выглядят громоздкими и неудобными, более того, для каждой платформы (Windows, Linux, macOS, iOS, Android) придётся писать отдельный код для создания окна - но пишутся один раз. И потом к ним уже никто не возвращается.</p>
                      <p>Помимо окна, обычно присутствует контекст графического API (OpenGL, Vulkan, DirectX), который тоже создаётся через страшные платформо-зависимые вызовы. Но опять же написать их придется всего один раз, или взять готовую библиотеку, которая возьмет это всё это на себя. (SDL2, glfw, SFML или любую из одну тысяч других библиотек).</p>
                      <p>После создания окна, следующим шагом будет организация <code>игрового цикла </code>— именно он будет обрабатывать события, обновлять игровую логику и перерисовывать экран.</p>
                      <h3>Игровой цикл</h3>
                      <details class="spoiler">
                       <summary>Немного полезных ссылок</summary>
                       <div class="spoiler__content">
                        <ul>
                         <li>
                          <p>Animated sprite editor &amp; pixel art tool <br><a href="https://github.com/LibreSprite/LibreSprite" rel="noopener noreferrer nofollow">https://github.com/LibreSprite/LibreSprite</a></p></li>
                         <li>
                          <p>Source code analyzer for large code bases <br><a href="https://github.com/myint/cppclean" rel="noopener noreferrer nofollow">https://github.com/myint/cppclean</a></p></li>
                         <li>
                          <p>AddressSanitizer, ThreadSanitizer, MemorySanitizer <br><a href="https://github.com/google/sanitizers" rel="noopener noreferrer nofollow">https://github.com/google/sanitizers</a></p></li>
                         <li>
                          <p>Memory debugging, memory leak detection, and profiling <br><a href="http://valgrind.org/" rel="noopener noreferrer nofollow">http://valgrind.org/</a></p></li>
                         <li>
                          <p>Tool for static C/C++ code analysis <br><a href="http://cppcheck.sourceforge.net/" rel="noopener noreferrer nofollow">http://cppcheck.sourceforge.net/</a></p></li>
                        </ul>
                       </div>
                      </details>
                      <p>Вот что объединяет практически все игры и игровые движки, хотя сам цикл может быть довольно глубоко скрыт внутри движка, заменен на абстракции или колбеки. Но в конечном итоге код игрового цикла выглядит так:</p>
                      <pre><code class="cpp">int main()
{
    createWindow();
    init();
    while (isRunning())
    {
        handle(InputEvent());
        updateFrame();
        drawFrame();
    }
    shutdown();
    destroyWindow();
}</code></pre>
                      <p><em>Игровой цикл</em> заставляет игру работать, без него функция <code>main</code> просто завершилась бы, и игра закрылась. Существует множество способов представления цикла в API движка. Он может быть полностью явным, когда пользователь движка где-то в своей функции <code>main</code> пишет <code>while (engine::isRunning())</code>.</p>
                      <p>Он может быть скрыт внутри движка, например, в какой-нибудь функции <code>engine::run()</code>, которая, в свою очередь, вызывает некоторые функции, предоставляемые пользователем (колбеки). Что бы вы ни выбрали, вам все равно будет нужен игровой цикл.</p>
                      <h3>Обработка ввода</h3>
                      <details class="spoiler">
                       <summary>Базовые решения</summary>
                       <div class="spoiler__content">
                        <ul>
                         <li>
                          <p>Cross-platform library for gamepad input <br><a href="https://github.com/mtwilliams/libgamepad" rel="noopener noreferrer nofollow">https://github.com/mtwilliams/libgamepad</a></p></li>
                         <li>
                          <p>Cross-platform C++ input library supporting gamepads, keyboard, mouse, touch <br><a href="https://github.com/jkuhlmann/gainput" rel="noopener noreferrer nofollow">https://github.com/jkuhlmann/gainput</a></p></li>
                         <li>
                          <p>Cross-platform 2D game library&nbsp; <br><a href="https://github.com/jhasse/jngl/" rel="noopener noreferrer nofollow">https://github.com/jhasse/jngl/</a></p></li>
                         <li>
                          <p>KlayGE is a cross-platform game engine, plugin-based architecture <br><a href="https://github.com/gongminmin/KlayGE" rel="noopener noreferrer nofollow">https://github.com/gongminmin/KlayGE</a></p></li>
                         <li>
                          <p>Cross-platform 2D game engine <br><a href="https://github.com/nCine/nCine" rel="noopener noreferrer nofollow">https://github.com/nCine/nCine</a></p></li>
                        </ul>
                       </div>
                      </details>
                      <p>Пользовательский ввод — одна из базовых составляющих любой игры, даже если ему придется всего лишь тапать хомяка.</p>
                      <p>На самом базовом уровне ввод любой ввоод обрабатывается с помощью платформенно-зависимых API вроде WinAPI, X11, Cocoa, но работать ними неудобно: они не сложные, но очень уж многословные и требуют индивидуального кода для каждой поддерживаемой платформы. Но почти все эти API предоставляют возможность вытащить события в функцию вроде <code>pollEvents()</code>, с помощью которой уже можно последовательно получать события от пользователя.</p>
                      <p>Когда приходит время интегрировать ввод в игровой движок, возможны разные подходы. Один из них — предоставить пользователю прямой доступ к системе событий. В этом случае разработчик игры сам запрашивает события через <code>pollEvent()</code> и сам решает, как их обрабатывать.</p>
                      <p>Базовая структура обработки событий обычно выглядит так: в игровом цикле на каждой итерации вызывается функция обработки событий, где происходит последовательный разбор всех пришедших событий. В зависимости от типа события вызываются соответствующие функции или предпринимаются определённые действия — например, обработка движения мыши, нажатия клавиш или закрытия окна.</p>
                      <pre><code class="cpp">while (engine.isRunning()) {
    Event event;
    while (engine.pollEvent(event)) {
        switch (event.type) {
            case Event::MouseMove:
                application.onMouseMove(event.mouseX, event.mouseY);
                break;
            case Event::KeyPressed:
                application.onKeyPressed(event.keyCode);
                break;
            case Event::WindowClose:
                engine.quit();
                break;
        }
    }

    engine.update(); // Логика игры
    engine.render(); // Рендеринг кадра
}</code></pre>
                      <p>Такой способ даёт максимальную гибкость, но требует от пользователя большего объёма кода и знания структуры событий.</p>
                      <p>Другой вариант — встроить обработку событий внутрь движка и предоставить пользователю только колбэк-функции. Это делает начальную разработку проще и быстрее, однако требует продуманной архитектуры регистрации этих колбэков.</p>
                      <pre><code class="cpp">void onMouseMove(MouseEvent event) {
  application.onMouseMove(event.mouseX, event.mouseY);
}
void onKeyPressed(KbEvent event) {
  application.onKeyPressed(event.keyCode);
}
void onWindowClose(AppCloseEvent ev) {
   engine.quit();
}

int main() {
  engine.subscribe(onMouseMove);
  engine.subscribe(onKeyPressed);
  engine.subscribe(onWindowClose);
  while (engine.isRunning()) {
      Event event;
      updateFrame();
  
      engine.update(); // Логика игры
      engine.render(); // Рендеринг кадра
  }
}</code></pre>
                      <h3>Графика</h3>
                      <details class="spoiler">
                       <summary>SDK</summary>
                       <div class="spoiler__content">
                        <ul>
                         <li>
                          <p>Universal Scene Description<br><a href="https://github.com/PixarAnimationStudios/USD" rel="noopener noreferrer nofollow">https://github.com/PixarAnimationStudios/USD</a></p></li>
                         <li>
                          <p>An open source render engine <br><a href="https://github.com/kimkulling/osre" rel="noopener noreferrer nofollow">https://github.com/kimkulling/osre</a></p></li>
                         <li>
                          <p>A vector graphics renderer for bgfx <br><a href="https://github.com/jdryg/vg-renderer" rel="noopener noreferrer nofollow">https://github.com/jdryg/vg-renderer</a></p></li>
                         <li>
                          <p>Lightweight and modular C++11/C++14 graphics middleware <br><a href="https://github.com/mosra/magnum" rel="noopener noreferrer nofollow">https://github.com/mosra/magnum</a></p></li>
                         <li>
                          <p>OpenGL C++ Graphics Engine <br><a href="https://github.com/JoeyDeVries/Cell" rel="noopener noreferrer nofollow">https://github.com/JoeyDeVries/Cell</a></p></li>
                         <li>
                          <p>Simple and Fast Multimedia Library <br><a href="https://github.com/SFML/SFML" rel="noopener noreferrer nofollow">https://github.com/SFML/SFML</a></p></li>
                         <li>
                          <p>Vulkan SDK <br><a href="https://github.com/ARM-software/vulkan-sdk" rel="noopener noreferrer nofollow">https://github.com/ARM-software/vulkan-sdk</a></p></li>
                         <li>
                          <p>High level vulkan 2D vector-like graphics api <br><a href="https://github.com/nyorain/rvg" rel="noopener noreferrer nofollow">https://github.com/nyorain/rvg</a></p></li>
                         <li>
                          <p>DirectX Graphics samples <br><a href="https://github.com/microsoft/DirectX-Graphics-Samples" rel="noopener noreferrer nofollow">https://github.com/microsoft/DirectX-Graphics-Samples</a></p></li>
                         <li>
                          <p>Rendering base for animation and visual effects <br><a href="https://github.com/appleseedhq/appleseed" rel="noopener noreferrer nofollow">https://github.com/appleseedhq/appleseed</a></p></li>
                         <li>
                          <p>A fully featured, open source, MIT licensed, game engine <br><a href="https://github.com/godotengine/godot" rel="noopener noreferrer nofollow">https://github.com/godotengine/godot</a></p></li>
                        </ul>
                       </div>
                      </details>
                      <p>Окно у нас уже есть. Мы даже умеем как-то реагировать на мышку и клавиатуру. Но… показать эту реакцию мы пока не можем. Пора заняться графикой. Честно, мне 3D всегда давалось трудом, всегда завидовал своему товарищу @megai2, который с легкостью пишет рендеры под что угодно, от плойки до мобилок.</p>
                      <p>Большинство библиотек для создания окон, таких как SDL2, уже содержат поддержку 2D-графики — можно рисовать прямо в окне, можно текстурами, можно вручную заливая пиксели любимыми цветами. Примитивно, но честно.</p>
                      <p>Допустим, движок заточен под 2D-игры с тайлами и спрайтами. Тогда, скорее всего, придется реализовать что-то вроде <code>drawSprite(image, x, y)</code>. Возможно, с поддержкой всяких приятностей: масштабирование, вращение, наложение цвета, обесцвечивание, альфа-блендинг. Внутри это может быть реализовано вручную — прямым копированием пикселей с какими-то расчётами и блиттингом. А может — через другую библиотеку вроде cairo, которая внутри оказывается очень даже неплохо уровня рендером, способным если не на всё, то очень на многое. Или через OpenGL/Dx/Vulkan, если душа просит хардкора и скоростей.</p>
                      <p>А можно вообще не специализироваться, и просто дать пользователю движка в руки универсальные обёртки, как это делают большинство библиотек SDL/SFML/Allegro — пускай сам ковыряется. В моей реализации для Фараона есть обёртка над SDL2 (которая умеет в нативные GAPI), но полноценного рендерера в привычном смысле нет. Для каждого движка я писал собственноую систему отрисовки заново. С одной стороны, это было больно. С другой можно экспериментировать с графикой. Как бы ни была построена система отрисовки - рано или поздно, понадобится рендерить текст. Для интерфейса, отладочной информации и прочего. Можно, конечно, отрисовывать буквы вручную пикселями, но лучше взять нормальную библиотеку для работы со шрифтами — например, FreeType. Для мазохистов и любителей юникода — harfbuzz. Только не надо писать свой парсер шрифтов - этот путь ведёт к боли.</p>
                      <h3>Accеты</h3>
                      <details class="spoiler">
                       <summary>Ресурсы</summary>
                       <div class="spoiler__content">
                        <ul>
                         <li>
                          <p>ASTC texture decompression in C++ <br><a href="https://github.com/richgel999/astc_dec" rel="noopener noreferrer nofollow">https://github.com/richgel999/astc_dec</a></p></li>
                         <li>
                          <p>Dynamic texture atlas<br><a href="https://github.com/septag/atlasc" rel="noopener noreferrer nofollow">https://github.com/septag/atlasc</a></p></li>
                         <li>
                          <p>Texture Packer for Game Development Using MaxRects Algorithm <br><a href="https://github.com/huxingyi/squeezer" rel="noopener noreferrer nofollow">https://github.com/huxingyi/squeezer</a></p></li>
                         <li>
                          <p>Image loading library <br><a href="https://github.com/rampantpixels/image_lib" rel="noopener noreferrer nofollow">https://github.com/rampantpixels/image_lib</a></p></li>
                         <li>
                          <p>Fast PNG encoder and decoder&nbsp; <br><a href="https://github.com/lvandeve/lodepng" rel="noopener noreferrer nofollow">https://github.com/lvandeve/lodepng</a></p></li>
                        </ul>
                       </div>
                      </details>
                      <p>Ресурсы — это всё, что оживляет будущую игру: спрайты, конфиги, скрипты, текстуры, звуковые файлы, 3D-модели, уровни, аишка и прочие куски контента, без которых вся ваша великая система рендеринга и физики — просто дорогая поделка на гитхабе.</p>
                      <p>Как их хранить и загружать? Ну… способов, как обычно, миллион.</p>
                      <p>Можно, например, скомпилировать все ресурсы в один большой бинарный blob и запечь внутрь исполняемого файла, так делали и делают многие игры. Так делал андроид и iOS поначалу. Преимущества? Всё рядом, всё быстро — никаких «подгрузок», никаких путей к файлам - просто достаешь массив байт и работаешь с ним, как с ресурсом. Иногда это спасало в разных проектах, по-настоящему спасало, и позволяло пройти сертификацию для сони или моек — а что бинарник 700 мегабайт, так это всё кот виноват и джуны погромисты, понаписали шаблонов.</p>
                      <p>Но, конечно, есть и минусы. Не получится изменить ни один ассет, не перекомпилировав всю игру. Даже если просто хочется поменять цвет пикселя в текстуре — жди билд. А ещё это делает моддинг практически невозможным. Как игроки будут вставлять свои кастомные шляпы, если весь контент запаян в <code>.exe</code>?</p>
                      <p>Можно хранить ресурсы как обычные файлы в папке <code>assets/</code> рядом с исполняемым файлом. Тогда движок просто загружает нужный файл при запуске уровня если мы заранее не озаботились перфомансом. Такой метод — идеален для разработки: быстро, прозрачно, можно в любой момент зайти в папку, заменить текстуру и увидеть изменения в игре. А ещё — настоящий подарок для моддеров: бери, меняй, добавляй — всё открыто.</p>
                      <p>Можно пойти дальше и упаковать все ассеты в архив. Это может быть обычный ZIP (и тогда тебе пригодится zlib), или самодельный формат, заточенный под особенности движка. Большие коммерческие движки, кстати, обычно идут именно по этому пути. Архивы удобно грузить, удобно кешировать, и никто не лазит туда с руками… кроме тех, кто очень хочет. Тут на помощь приходят VFS (Virtual File System) или архивы, которые понимают что где лежит, и как его оттуда взять.</p>
                      <p>Как бы в итоге не хранились ассеты, их нужно ещё <em>как-то</em> превратить из сырых байтов в осмысленные данные. Тут понадобятся форматные библиотеки, <code>stb_image</code> — чтобы превратить PNG в массив пикселей. Или разные<code>JSON</code> — чтобы вытащить информацию о сущностях из json подбных конфигов, если вы ещё не разочаровались в JSON как формате для конфигов. В какой-то момент в команде приходит понимание, что чисто декларативный формат конфигов не покрывает все кейсы, и тогда в движок приходят VM (Virtual Machine) для js/lua/squirrel/anglelscript, которые вроде как скриптовые языки, но используются для парсинга конфигов, ну или изобретается собственный формат, который тоже в итоге приходит к VM стайл виду.</p>
                      <p>А ещё можно, я бы сказал нужно вторым шагом после конфигов, сделать поддержку <em>горячей перезагрузки ассетов</em>, чтобы не перезапускать игру тысячу раз в день. То есть меняешь картинку, звук или конфиг — и хоп, всё это уже подхватилось прямо в игре. Магия? Нет, просто ещё одна причина, почему ресурсный менеджер вырастает в чудовище, от которого страдают весь остальной движок.</p>
                      <h3>Аудио</h3>
                      <details class="spoiler">
                       <summary>Sound&amp;Fx</summary>
                       <div class="spoiler__content">
                        <ul>
                         <li>
                          <p>Portable audio engine for games <br><a href="https://github.com/jarikomppa/soloud" rel="noopener noreferrer nofollow">https://github.com/jarikomppa/soloud</a></p></li>
                         <li>
                          <p>C++ graph-based audio engine <br><a href="https://github.com/LabSound/LabSound" rel="noopener noreferrer nofollow">https://github.com/LabSound/LabSound</a></p></li>
                         <li>
                          <p>MP3 decoder single header library <br><a href="https://github.com/lieff/minimp3" rel="noopener noreferrer nofollow">https://github.com/lieff/minimp3</a></p></li>
                         <li>
                          <p>Portable speech synthesis system <br><a href="https://github.com/festvox/flite" rel="noopener noreferrer nofollow">https://github.com/festvox/flite</a></p></li>
                         <li>
                          <p>Fx sounds generator <br><a href="https://github.com/raysan5/rfxgen" rel="noopener noreferrer nofollow">https://github.com/raysan5/rfxgen</a></p></li>
                        </ul>
                       </div>
                      </details>
                      <p>Вывод звука — это, как вы уже догадались, ад на платформенно-зависимых API. Уродливые, неинтуитивные, капризные, XBox вообще любит плеваться исключениями если запишешь лишнее в буфер, а... впрочем если положишь меньше чем выделил памяти под буфер, тоже будет плеваться. Я не настоящий сварщик, т.е. не аудио программер, но и малой доли приключений хватило понять - хочешь просто воспроизвести звук — приготовься страдать. Или… можно взять библиотеку, которая спрячет весь этот кошмар за нормальным интерфейсом. Например, <code>OpenAL </code>или <code>SDL2</code>. Последнее время я использую вторую, потому что, она очень лояльна к ошибкам, даже если делаешь что-то совсем не так.</p>
                      <p>Эти библиотеки обычно ожидают от движка так называемый <em>аудио-колбэк</em> — функцию, которую будет вызывать система (обычно из отдельного потока) десятки или даже сотни раз в секунду. Каждый вызов — надо вернуть немного аудиоданных - всё остальное — твоя забота. Хочешь — крути головой в тишине. Хочешь — проигрывай один единственный MP3 на фоне. Но, скорее всего, нужно будет «немножко больше»: музыка, эффекты, голос, всё в разных потоках, с разной громкостью, с плавным затуханием, без щелчков, без дрожания, с эффектами реверберации… ну вы поняли.</p>
                      <p>Чтобы всё это заработало как надо — нужен микшер. Не человек, конечно (хотя иногда и это бы не помешало), а аудиомикшер — библиотека, которая будет сводить многочисленные звуковые потоки в один, аккуратно контролировать их громкость, фильтровать резкие пики, добавлять эффекты и не давать звуку превратиться в кашу, если всё проигрывается одновременно. Особенно если у тебя в игре внезапно начинается бой, где 15 звуков разных юнитов, фанфары и тревожная музыка.</p>
                      <p>Хороший движок обычно реализует собственный аудиомикшер. Он бывает большой и сложный, со сведением и реверберацией, эффектами и постполлингом или простой на четыре канала и фоновую музыку, но суть одна - микшер работает с абстрактными звуковыми потоками, позволяет комбинировать их как угодно, и на выходе получать один финальный стрим, который уже подаётся на аудиовывод. Наверное один раз стоит попробовать написать свой собственный, чтобы понимать как он работает. А можно поискать библиотеку, которая уже всё это делает — микширует, балансирует, сжимает. Их, наверное, сотни… но, если честно, я особо не искал. Написал свой в итоге поверх SDL2. Зато теперь знаю, как работает каждая щелчкающая дрянь в наушниках.</p>
                      <figure class="full-width ">
                       <img src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/5bd/f69/c2e/5bdf69c2e99ebc6f8de3884a64b7000b.png" width="600" height="300" sizes="(max-width: 780px) 100vw, 50vw" srcset="https://habrastorage.org/r/w780/getpro/habr/upload_files/5bd/f69/c2e/5bdf69c2e99ebc6f8de3884a64b7000b.png 780w,
       https://habrastorage.org/r/w1560/getpro/habr/upload_files/5bd/f69/c2e/5bdf69c2e99ebc6f8de3884a64b7000b.png 781w" loading="lazy" decode="async">
                      </figure>
                      <h3>Физика</h3>
                      <details class="spoiler">
                       <summary>Хорошие решения</summary>
                       <div class="spoiler__content">
                        <ul>
                         <li>
                          <p>Box2D is a 2D physics engine for games<br><a href="https://github.com/erincatto/Box2D" rel="noopener noreferrer nofollow">https://github.com/erincatto/Box2D</a></p></li>
                         <li>
                          <p>2D physics engine for games <br><a href="https://github.com/google/liquidfun" rel="noopener noreferrer nofollow">https://github.com/google/liquidfun</a></p></li>
                         <li>
                          <p>Newton Dynamics - real time simulation of physics environment<br><a href="https://github.com/MADEAPPS/newton-dynamics" rel="noopener noreferrer nofollow">https://github.com/MADEAPPS/newton-dynamics</a></p></li>
                         <li>
                          <p>Fluid simulation engine <br><a href="https://github.com/doyubkim/fluid-engine-dev" rel="noopener noreferrer nofollow">https://github.com/doyubkim/fluid-engine-dev</a></p></li>
                         <li>
                          <p>Invk - Inverse Kinematics Library<br><a href="https://github.com/ramakarl/invk" rel="noopener noreferrer nofollow">https://github.com/ramakarl/invk</a></p></li>
                        </ul>
                       </div>
                      </details>
                      <p>Если честно… большинству игр физика вообще не нужна. Вот прям настоящая физика — с силами, импульсами, трением и всем этим академическим багажом. Большинству нужно нечто попроще: анимации, логика, скрипты — то, что создаёт <em>впечатление</em> физики, не имея к ней почти никакого отношения.</p>
                      <p>Вот, например, шестая цива — одна из самых сложных стратегий современности. Но физика там не нужна. Совсем. Или разные ситибилдеры — банально, но дома не падают, дороги не трескаются, и никто не просчитывает вектор падения водонапорной башни. Просто потому, что оно не нужно. Зачем усложнять? Но и Цива, и Cities Skylines зачем-то тащут зависимости на PhysX, а возможно не просто тащут, но и как-то его используют.</p>
                      <p>Платформер или 2D-RPG сверху — вся "физика" обычно ограничивается перемещением персонажа и простыми столкновениями со стенами, врагами и ящиками. Это пишется за пару вечеров, если ты, конечно, не залипаешь на каждую строчку, как это делал я пытаясь разобраться. Главное — всё будет под твоим контролем: хочешь, чтобы герой скользил как по льду — пожалуйста. Хочешь, чтобы враги отскакивали нелепо, как резиновые утки — вперёд.</p>
                      <p>А если у тебя <em>слишком много</em> столкновений и всё начинает тормозить — можно оптимизировать. Пространственное хеширование, квадродеревья, и ограничение по дальности от ГГ. Но… если вы всё же упрямы и точно знаете, что потребуется <em>реальная</em> физика — берите готовую библиотеку: Box2D для 2D или Bullet для 3D. Не изобретайте велосипед, их и так будет предостаточно в самописном движке.</p>
                      <p>А когда понадобиться разобраться в том, как такие движки работают под капотом — лучше посмотреть на ютубе видео от<strong> </strong>автора Box2D. Он очень подробно рассказывает, как работает физика с ограничениями через импульсы и вообще даёт редкий взгляд изнутри.</p>
                      <p>Когда-то я думал, что физика — это про массу, скорость и формулы. Теперь я знаю, что настоящая физика — это когда в 3 часа ночи пытаешься понять, почему персонаж застревает в лестнице, у который не прогрузился колижен-меш.</p>
                      <h3>Скрипты и Конфиги</h3>
                      <details class="spoiler">
                       <summary>Конфиги</summary>
                       <div class="spoiler__content">
                        <ul>
                         <li>
                          <p>Simple .INI file parser in C, good for embedded systems<br><a href="https://github.com/benhoyt/inih" rel="noopener noreferrer nofollow">https://github.com/benhoyt/inih</a></p></li>
                         <li>
                          <p>Header-file-only, JSON parser serializer in C++<br><a href="https://github.com/kazuho/picojson" rel="noopener noreferrer nofollow">https://github.com/kazuho/picojson</a></p></li>
                         <li>
                          <p>Jsmn is a world fastest JSON parser/tokenizer<br><a href="https://github.com/zserge/jsmn" rel="noopener noreferrer nofollow">https://github.com/zserge/jsmn</a></p></li>
                         <li>
                          <p>Mesh loader for OBJ, glTF2 and PLY <br><a href="https://github.com/jing-interactive/melo" rel="noopener noreferrer nofollow">https://github.com/jing-interactive/melo</a></p></li>
                         <li>
                          <p>C++ Library for reading and writing FBX files<br><a href="https://github.com/jskorepa/fbx" rel="noopener noreferrer nofollow">https://github.com/jskorepa/fbx</a></p></li>
                         <li>
                          <p>A C++ library for reading, writing, and analyzing CSV<br><a href="https://github.com/vincentlaucsb/csv-parser" rel="noopener noreferrer nofollow">https://github.com/vincentlaucsb/csv-parser</a></p></li>
                         <li>
                          <p>C++ SVG library <br><a href="https://github.com/svgpp/svgpp" rel="noopener noreferrer nofollow">https://github.com/svgpp/svgpp</a></p></li>
                         <li>
                          <p>A YAML parser and emitter in C++ <br><a href="https://github.com/jbeder/yaml-cpp" rel="noopener noreferrer nofollow">https://github.com/jbeder/yaml-cpp</a></p></li>
                         <li>
                          <p>Light-weight, simple and fast XML parser for C++ <br><a href="https://github.com/zeux/pugixml" rel="noopener noreferrer nofollow">https://github.com/zeux/pugixml</a></p></li>
                        </ul>
                       </div>
                      </details>
                      <details class="spoiler">
                       <summary>Скрипты</summary>
                       <div class="spoiler__content">
                        <ul>
                         <li>
                          <p>Embedded Scripting Language Designed for C++ <br><a href="https://github.com/ChaiScript/ChaiScript" rel="noopener noreferrer nofollow">https://github.com/ChaiScript/ChaiScript</a></p></li>
                         <li>
                          <p>Higher level programming in C <br><a href="https://github.com/orangeduck/Cello" rel="noopener noreferrer nofollow">https://github.com/orangeduck/Cello</a></p></li>
                         <li>
                          <p>Lua 5.3.4 re-written in C++ 17 <br><a href="https://github.com/Rseding91/LuaPlusPlus" rel="noopener noreferrer nofollow">https://github.com/Rseding91/LuaPlusPlus</a></p></li>
                         <li>
                          <p>A simple Python 2.7 interpreter, with predictable memory management <br><a href="https://github.com/shooshx/zippypy" rel="noopener noreferrer nofollow">https://github.com/shooshx/zippypy</a></p></li>
                         <li>
                          <p>Embedded JavaScript engine for C/C++<br><a href="https://github.com/cesanta/mjs" rel="noopener noreferrer nofollow">https://github.com/cesanta/mjs</a></p></li>
                         <li>
                          <p>MuJS lightweight Javascript interpreter designed for embedding&nbsp; <br><a href="https://github.com/dalerank/Akhenaten/tree/master/ext/mujs" rel="noopener noreferrer nofollow">https://github.com/dalerank/Akhenaten/tree/master/ext/mujs</a></p></li>
                         <li>
                          <p>The official mirror of the V8 Git repository<br><a href="https://github.com/v8/v8" rel="noopener noreferrer nofollow">https://github.com/v8/v8</a></p></li>
                         <li>
                          <p>daslang - high-performance statically strong typed scripting language<br><a href="https://github.com/GaijinEntertainment/daScript" rel="noopener noreferrer nofollow">https://github.com/GaijinEntertainment/daScript</a></p></li>
                         <li>
                          <p>Programming language Squirrel<br><a href="https://github.com/albertodemichelis/squirrel" rel="noopener noreferrer nofollow">https://github.com/albertodemichelis/squirrel</a></p></li>
                         <li>
                          <p>AngelScript is a game-oriented interpreted/compiled scripting language <br><a href="https://www.angelcode.com/angelscript/" rel="noopener noreferrer nofollow">https://www.angelcode.com/angelscript/</a></p></li>
                        </ul>
                       </div>
                      </details>
                      <p>Кажется, звучит модно и удобно. На деле — ещё один язык, ещё один слой отладки, еще один набор инструментов для дебага и ещё одна причина, по которой в 3 ночи приходится лезть pintfaми в лог.</p>
                      <p>Что это такое вообще? По сути, это часть логики игры, которая написана не на языке движка (например, C++), а на другом, более лёгком, часто интерпретируемом. Lua, Python, GDScript, Angelscript, JavaScript — выбирай любой сахар.</p>
                      <p><em>... это не про производительность и не про FPS</em><br>
                       Это про количество фич, которые дизайнер успевает запилить за вечер. На низкоуровневом языке вроде C++ каждая строчка — как поход в гору. Да, мощно, точно, но тяжело и надо перекомпилить игру.</p>
                      <p><em>... это про удобство и скорость разработки</em><br>
                       В скриптах как будто на велосипеде: нестрашно, быстро, весело и удобно. В Lua, например, можно минут за пятнадцать накатать новый паттерн поведения врага и сразу же увидеть результат. Без компиляции, без перезапуска. Это бесценно, особенно когда тебя торопит геймдизайнер или ты сам — перед показом начальству.</p>
                      <p><em>... на удивление, это про безопасность</em><br>
                       Скрипты обычно запускаются в изолированной среде. Это значит, что если моддер написал что-то странное — он сломает только свою миссию, а не всю игру. Можно ограничить доступ скриптам: дать им возможность работать только с теми объектами, которые тебе нужны. Настроить лимиты, интерпретировать исключения, и в крайнем случае — просто не запускать подозрительное. В плюсах такой гибкости не получишь. Там любой кривой плагин — это потенциальный краш.</p>
                      <p><em>... это про реконфигурабельность проекта в целом</em><br>
                       Если тебе хоть раз приходилось пересобирать проект из-за изменения одного AI-параметра, поздравляю - вы не подумали про конфигурабельность, хардкод редко когда бывает добром. Хот-релоад — это возможность менять код <em>во время игры</em>. Добавил условие — нажал «сохранить» — и оно уже работает, даже если игра идёт, даже на третьей миссии. Компиляторы до сих пор на это полностью не способны (ну, почти не способны), а интерпретаторы скриптов — сделают всё в лучшем виде, но см п1.</p>
                      <p><em>... это дверь для комьюнити</em><br>
                       Дверь в движок. Неважно какого размера движок или игра - если вы хочите, чтобы сообщество добавляло новые миссии, врагов, диалоги, мини-игры и даже сломанные экономические симуляции — нужно дать им простой и безопасный способ это делать. Lua, Python — это знакомые языки, на них пишут школьники, студенты, энтузиасты. C++? Даже не думайте. Никто не будет разбираться с билд-сервером и версиями компилятора. Да и вряд ли захочется потом читать багрепорты от человека, который «просто заменил переменную в header-файле».</p>
                      <p><em>... это - всем не угодишь</em></p>
                      <ul>
                       <li>
                        <p>lua — де-факто стандарт. Маленький, быстрый, встроить — 5 минут. Документации — море. Очень хорошо параллелится и идеально работает в однопотоке.</p></li>
                       <li>
                        <p>python — шикарен, но тяжело встроить. Инициализация интерпретатора — тот ещё квест. И да, GIL, поэтому многие меняют на lua.</p></li>
                       <li>
                        <p>js — embedded версии хорошо себя зарекомендовали и по объему памяти и по скорости работы</p></li>
                       <li>
                        <p>GDScript — только если ты Godot.</p></li>
                       <li>
                        <p>AngelScript, Wren, Squirrel, emc — относильное нишевые, выйди они немного раньше lua, стали бы ему отличной заменой, а так - что-то между C и Lua.</p></li>
                      </ul>
                      <p><em>... плюс - это два минуса, иногда больше</em><br><code><em>Отладка — боль</em></code><strong>.</strong> Отладчик придется писать самому, точнее собирать из граблей и слёз.<br><code><em>Производительность (см п1)</em></code><strong> - </strong>скрипты медленнее. Иногда намного. Иногда — настолько, что начинается переписывание логики обратно в C++.<br><code><em>Мост между языками</em></code><strong>.</strong> Это та самая прослойка, где пишутся binding'и и обертки. Где типы начинают путаться. Где строки становятся <code>char*</code>, <code>std::string</code>, <code>const char*</code>, <code>LuaStringView</code> и всё это <em>одновременно</em>.<br><code><em>Непредсказуемость</em></code><strong>.</strong> Скрипт может написать кто угодно. И написать что угодно. Включая бесконечный цикл или <code>enemy.hp = -9000</code>.</p>
                      <p><em>... чаще — спасение. иногдае — головная боль. </em><br>
                       Иногда — катализатор новых идей и хаоса. Подходят не всем, не всегда, и не везде. Но если всё сделать правильно — можно будет править логику игры <em>во время игры</em>, без перекомпиляции, без перезапуска, без лишних часов ожидания.</p>
                      <h4>Сеть (Networking)</h4>
                      <details class="spoiler">
                       <summary>Тут мало</summary>
                       <div class="spoiler__content">
                        <ul>
                         <li>
                          <p>A C++ header-only HTTP/HTTPS server and client library <br><a href="https://github.com/yhirose/cpp-httplib" rel="noopener noreferrer nofollow">https://github.com/yhirose/cpp-httplib</a></p></li>
                         <li>
                          <p>http request/response parser for c <br><a href="https://github.com/nodejs/http-parser" rel="noopener noreferrer nofollow">https://github.com/nodejs/http-parser</a></p></li>
                         <li>
                          <p>Fast C++ web framework <br><a href="https://github.com/ipkn/crow" rel="noopener noreferrer nofollow">https://github.com/ipkn/crow</a></p></li>
                        </ul>
                       </div>
                      </details>
                      <p>Иногда все мечтают об этом. Синхронные миры, кооператив, PvP, MMO, или хотя бы чат между игроками. А потом открываешь Wireshark и начинаешь мечтать только об одном — чтобы всё это просто заработало.</p>
                      <p>Начнём с хорошего: возможно, для твоей игры это вообще не нужно. Если делаешь оффлайн-игру, пазл, платформер, какой-нибудь "SimTower с жабами" — можно забыть про сеть. Но если тебе взбрело в голову "сделать мультиплеер" — готовься. Вы сейчас вступаете на тропу боли, где <em>всё</em> зависит от деталей. Никакой универсальной архитектуры не существует.</p>
                      <p>В современных языках (C#, Rust, Go) — уже будут неплохие абстракции для работы с сокетами. Асинхронные вызовы, удобные корутины и всё такое. В C++ (мои соболезнования) — скорее всего, придется использовать что-то сторонее вроде <strong>RakNet/Enet</strong>, не супер современные, но надежные и зарекомендовавшие себя временем и тучей проектов библиотеки. Но будем честны: сокеты — это только <em>начало</em>. Подключиться к серверу — это 1% работы. Дальше начинается самое весёлое. Что вообще такое "сетевой движок"? Хороший вопрос. Я сам им задавался, когда писал первый кооперативный прототип. Ответа так и не нашёл:</p>
                      <ul>
                       <li>
                        <p>синхронизация состояний между игроками</p></li>
                       <li>
                        <p>предсказание ввода и откат (rollback netcode)</p></li>
                       <li>
                        <p>интерполяция, экстраполяция, сглаживание</p></li>
                       <li>
                        <p>распределение ролей (серверный авторитет, клиентские копии и пр.)</p></li>
                       <li>
                        <p>работа с задержками, пакеты, потери, порядок доставки</p></li>
                       <li>
                        <p>безопасный протокол общения</p></li>
                       <li>
                        <p>шифрование (параноиками просто так не становятся)</p></li>
                      </ul>
                      <p>Звучит сложно? Так и есть. А ещё нужно:</p>
                      <ul>
                       <li>
                        <p>Сервер (headless версия игры? AWS? самописный?)</p></li>
                       <li>
                        <p>Авторизация</p></li>
                       <li>
                        <p>Репликация объектов (твой <code>Unit</code>на сервере и на клиенте — это не один и тот же объект!)</p></li>
                       <li>
                        <p>Логгирование всего происходящего (иначе как потом отловишь баг, когда у игрока внезапно оказался юнит не того типа?)</p></li>
                       <li>
                        <p>Читеры, отдельная история - не побеждены и не сломлены</p></li>
                      </ul>
                      <p>Достаточно давно, на волне хайпа по второй контре я написал пару мультиплеерных прототипов. С друзьями. Для фана, на Irrlicht. Они почти работали. До первого фрейма, когда инстанс один друг начал двигаться без реальных ивентов, а второй — висел в это время в стене. Тогда я понял: делать надёжный, отзывчивый и гибкий мультиплеер — это <em>отдельная профессия</em>. Если хотите это сделать в одиночку — понадобятся не только знания, но и чем отбиваться от санитаров.</p>
                      <figure class="full-width ">
                       <img src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/b33/1db/317/b331db317dc39d2f8d5d1f46b1538a78.png" width="738" height="416" sizes="(max-width: 780px) 100vw, 50vw" srcset="https://habrastorage.org/r/w780/getpro/habr/upload_files/b33/1db/317/b331db317dc39d2f8d5d1f46b1538a78.png 780w,
       https://habrastorage.org/r/w1560/getpro/habr/upload_files/b33/1db/317/b331db317dc39d2f8d5d1f46b1538a78.png 781w" loading="lazy" decode="async">
                      </figure>
                      <h4>Искусственный интеллект (AI)</h4>
                      <details class="spoiler">
                       <summary>Базовые решения</summary>
                       <div class="spoiler__content">
                        <ul>
                         <li>
                          <p>Procedural world generator <br><a href="https://github.com/rlguy/FantasyMapGenerator" rel="noopener noreferrer nofollow">https://github.com/rlguy/FantasyMapGenerator</a></p></li>
                         <li>
                          <p>Entity-component system<br><a href="https://github.com/skypjack/entt" rel="noopener noreferrer nofollow">https://github.com/skypjack/entt</a></p></li>
                         <li>
                          <p>Finite State Machine implementation using std::variant <br><a href="https://github.com/mpusz/fsm-variant" rel="noopener noreferrer nofollow">https://github.com/mpusz/fsm-variant</a></p></li>
                         <li>
                          <p>A lightweight Behavior Trees Library <br><a href="https://github.com/miccol/Behavior-Tree" rel="noopener noreferrer nofollow">https://github.com/miccol/Behavior-Tree</a></p></li>
                         <li>
                          <p>Navigation-mesh toolset for games <br><a href="https://github.com/recastnavigation/recastnavigation" rel="noopener noreferrer nofollow">https://github.com/recastnavigation/recastnavigation</a></p></li>
                         <li>
                          <p>Runtime NavMesh actions<br><a href="https://github.com/Unity-Technologies/NavMeshComponents" rel="noopener noreferrer nofollow">https://github.com/Unity-Technologies/NavMeshComponents</a></p></li>
                         <li>
                          <p>Path finder and A* solver <br><a href="https://github.com/leethomason/MicroPather" rel="noopener noreferrer nofollow">https://github.com/leethomason/MicroPather</a><br></p></li>
                        </ul>
                       </div>
                      </details>
                      <p>Моя любимая тема, потому что помимо оптмизаций, последние семь лет я занимался как раз AI монстров под разными соусами, роевым поведением и групповыми BT. Вы, возможно, не поверите, но не каждой игре нужен сильный AI, если вообще нужен AI. А тем, которым нужен, чаще всего хватает пары убогих скриптов, которые по таймеру говорят «Ой!» и бегут в стену.</p>
                      <p>AI - это просто код. Если в движке можно писать код — поздравляю, у вас уже есть поддержка AI. Весь игровой "интеллект" — это просто куча <code>if</code>-ов и <code>switch</code>-ей, которые делают вид, что NPC что-то "думает". Всё остальное разработчики сделали поверх двух этих кубиков:</p>
                      <p><strong>Behavior Trees (BT)</strong> — иерархия задач, где NPC «думает», что делать. Хорошо читается, легко дебажить, но часто превращается в бесконечное дублирование логики и адскую вложенность.</p>
                      <p><strong>Goal-Oriented Action Planning (GOAP)</strong> — ИИ сам выбирает, как достичь цели. Круто, умно. Но писать планировщик — боль.</p>
                      <p><strong>Finite State Machines (FSM)</strong> — Состояния и переходы между ними. Просто, эффективно, но быстро разрастается в лапше фсм.</p>
                      <p><strong>Utility AI</strong> — Всё на числах и весах. Эдакая подвид FSM, где нет заранее прописанных переходов между состояниями. Гибко, даже слишком, и поэтому непредсказуемо.</p>
                      <p><strong>HTN, BT+ML, Neural Nets, Reinforcement Learning</strong> — Звучит как магия. Работает в основном в статьях.</p>
                      <p><strong>Pathfinding</strong> - Алгоритм A* или его разновидности, плюс немного магии, чтобы не застревали в углу.</p>
                      <p><strong>Навмеши</strong> - Можно делать руками или использовать готовые тулзы (Recast, NavPower, etc).</p>
                      <p><strong>Система решений</strong> - В любой игре в итоге всё сводится к: "вижу игрока — атакую", "не вижу — ищу игрока", "мало хп — убегаю".</p>
                      <p>Какое-то время назад я время написал библиотеку для Behavior Trees. Рабочую, простую, с удобным дебагом, редактором и всем прочим. Возможно стоит выложить в опенсорс, но еще не закончился контракт поддержки с заказчиком — получилась крутая штука, наподобие UE blueprints, но с вменяемым дебагером и реплеями.</p>
                      <p>Но, чем больше её модернизировали и допиливали, тем чаще я стал замечать, как дизайнеры, вместо того чтобы выстраивать красивые деревья, следовать паттернами "разделяй и инкапсулируй" , просто пихают все наборы поведений в одну длинную последовательность <code>DoEverythingAndRepeat</code>. И знаете — оно неплохо работало.</p>
                      <p>AI — это в первую очередь про то, как развлечь игрока, и не дать ему заскучать, а не про интеллект. Пусть NPC тупой — главное, чтобы он вёл себя так, как хочет игрок. Пусть он предсказуем, но так легче запомнить паттерны и тактика от этого только выигрывает.</p>
                      <p>Пусть он не настоящий «ИИ», а просто грамотный скрипт — зато работает стабильно, развлекает игрока и тупит. AI — это не про интеллект. Это про иллюзию интеллекта. И если у вас получится заставить игрока поверить, что против него играет кто-то умный — значит, вы всё сделали правильно.</p>
                      <h4>UI</h4>
                      <details class="spoiler">
                       <summary>Немного ссылок</summary>
                       <div class="spoiler__content">
                        <ul>
                         <li>
                          <p>Elements C++ GUI library <br><a href="https://github.com/cycfi/elements" rel="noopener noreferrer nofollow">https://github.com/cycfi/elements</a></p></li>
                         <li>
                          <p>High-performance HTML renderer for game <br><a href="https://github.com/ultralight-ux/Ultralight" rel="noopener noreferrer nofollow">https://github.com/ultralight-ux/Ultralight</a></p></li>
                         <li>
                          <p>Skia-based C++ UI framework <br><a href="https://github.com/skui-org/skui" rel="noopener noreferrer nofollow">https://github.com/skui-org/skui</a></p></li>
                         <li>
                          <p>UI&nbsp;inspired by&nbsp;<a href="https://docs.unity3d.com/Manual/GUIScriptingGuide.html" rel="noopener noreferrer nofollow">Unity IMGUI</a> <br><a href="https://github.com/raysan5/raygui" rel="noopener noreferrer nofollow">https://github.com/raysan5/raygui</a></p></li>
                         <li>
                          <p>Tiny immediate-mode UI library <br><a href="https://github.com/rxi/microui" rel="noopener noreferrer nofollow">https://github.com/rxi/microui</a></p></li>
                         <li>
                          <p>Antialiased 2D vector drawing library on top of OpenGL <br><a href="https://github.com/memononen/nanovg" rel="noopener noreferrer nofollow">https://github.com/memononen/nanovg</a></p></li>
                         <li>
                          <p>A single-header ANSI C gui library <br><a href="https://github.com/vurtun/nuklear" rel="noopener noreferrer nofollow">https://github.com/vurtun/nuklear</a></p></li>
                         <li>
                          <p>Immediate Mode Text-based User Interface <br><a href="https://github.com/ggerganov/imtui" rel="noopener noreferrer nofollow">https://github.com/ggerganov/imtui</a></p></li>
                         <li>
                          <p>Minimalistic C++/Python UI library for OpenGL/GLES/DX11/DX12/Vulkan <br><a href="https://github.com/dalerank/nanogui" rel="noopener noreferrer nofollow">https://github.com/dalerank/nanogui</a></p></li>
                         <li>
                          <p>C++ viewer for 3D data like meshes and point clouds <br><a href="https://github.com/nmwsharp/polyscope" rel="noopener noreferrer nofollow">https://github.com/nmwsharp/polyscope</a></p></li>
                         <li>
                          <p>Renderer agnostic, lightweight debug drawing API<br><a href="https://github.com/glampert/debug-draw" rel="noopener noreferrer nofollow">https://github.com/glampert/debug-draw</a></p></li>
                         <li>
                          <p>GPU rasterizer for fonts and vector graphics <br><a href="https://github.com/servo/pathfinder" rel="noopener noreferrer nofollow">https://github.com/servo/pathfinder</a></p></li>
                        </ul>
                       </div>
                      </details>
                      <p>Можно сделать игру без физики, без AI, даже без аудио. Но без UI — увы, практически невозможно, мы живем в мире, где игры без UI воспринимаются как индийская индюшатина. Да и где-то ведь нужно написать «New Game» и «Exit», правильно?</p>
                      <h4>...это сложно</h4>
                      <p>На бумаге всё выглядит просто: ну подумаешь, нужно отрисовать пару кнопок, текстов, может слайдер или чекбокс. Только вот у этих объектов вдруг появляется:</p>
                      <ul>
                       <li>
                        <p>Состояние: idle, hover, pressed, focused, disabled...</p></li>
                       <li>
                        <p>Иерархия: кнопка внутри панели, которая внутри окна, которое скрыто, если не нажали на таб...</p></li>
                       <li>
                        <p>Разные системы координат: UI живёт в <strong>экранных координатах</strong>, а не в твоём уютном мире <code>world_space</code>.</p></li>
                       <li>
                        <p>Хотим скейлиться с разрешением. И чтобы на Steam Deck не съезжало.</p></li>
                       <li>
                        <p>Поддержка клавиатуры, мыши, тачскрина... а и еще контроллера.</p></li>
                       <li>
                        <p>И ещё желательно анимации и шейдеры — красиво же должно быть.</p></li>
                      </ul>
                      <p>И вот ты уже не делаешь игру, а пишешь UI-фреймворк. Который, кстати, не факт, что будет использоваться где-то, кроме конкретно этой игры. Почему нельзя просто взять готовое?Можно. Но:</p>
                      <ul>
                       <li>
                        <p>ImGui — прекрасен для дебага, но выглядит так, будто делаешь настройки биоса, а не игру.</p></li>
                       <li>
                        <p>ImGui с кастомным рендером — всё равно требует усилий, чтобы он не выглядел как меню биоса.</p></li>
                       <li>
                        <p>libRocket, Noesis, Nuklear, MyGUI, etc<strong>.</strong> — либо мертвы, либо странные, либо тащат за собой XML нотификации из 2004 года.</p></li>
                       <li>
                        <p>Scaleform — круто, красиво, но пора бы уже закопать эту flash-cтюардессу</p></li>
                      </ul>
                      <p>И даже если вы возьмёте что-то нормальное, ок Scaleform, все-же ты не так плох, как изначально казалось — всё равно придётся вкручивать его в свой движок, связывать с системой ввода, событий, шейдерами, текстами и прочим и прочим. Конечно же, была написана кастомная UI-библиотека, на svg рендере, с декларативными конструкторами, под разные GAPI, но дальше прототипа и пары редакторов не пошла, в итоге в одном случае мы ушли на Scaleform, а в другом на ImGui.</p>
                      <details class="spoiler">
                       <summary>Не imgui</summary>
                       <div class="spoiler__content">
                        <figure class="full-width ">
                         <img src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/87b/1c7/1d3/87b1c71d3716d5933e600c132f8f96a5.png" width="829" height="480" sizes="(max-width: 780px) 100vw, 50vw" srcset="https://habrastorage.org/r/w780/getpro/habr/upload_files/87b/1c7/1d3/87b1c71d3716d5933e600c132f8f96a5.png 780w,
       https://habrastorage.org/r/w1560/getpro/habr/upload_files/87b/1c7/1d3/87b1c71d3716d5933e600c132f8f96a5.png 781w" loading="lazy" decode="async">
                        </figure>
                        <figure class="full-width ">
                         <img src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/15b/f0b/663/15bf0b6639997c77903a0936c7821b7c.png" width="1282" height="752" sizes="(max-width: 780px) 100vw, 50vw" srcset="https://habrastorage.org/r/w780/getpro/habr/upload_files/15b/f0b/663/15bf0b6639997c77903a0936c7821b7c.png 780w,
       https://habrastorage.org/r/w1560/getpro/habr/upload_files/15b/f0b/663/15bf0b6639997c77903a0936c7821b7c.png 781w" loading="lazy" decode="async">
                        </figure>
                       </div>
                      </details>
                      <p>UI — это сложная, структурированная, многоуровневая, зависимая от платформы и очень недооценённая часть любого движка. Но вам лучше пройти этот путь хотя бы раз, минимум, но хорошо. Не надо пытаться переплюнуть Unity UI, Unreal Slate или HTML. Сделать пару контролов: кнопку, текст, может чекбокс — и чтобы не падали.</p>
                      <figure class="full-width ">
                       <img src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/4b3/3ee/205/4b33ee205256ec3cb8bb3716684ba7c7.png" width="682" height="381" sizes="(max-width: 780px) 100vw, 50vw" srcset="https://habrastorage.org/r/w780/getpro/habr/upload_files/4b3/3ee/205/4b33ee205256ec3cb8bb3716684ba7c7.png 780w,
       https://habrastorage.org/r/w1560/getpro/habr/upload_files/4b3/3ee/205/4b33ee205256ec3cb8bb3716684ba7c7.png 781w" loading="lazy" decode="async">
                      </figure>
                      <h3>Архитектура</h3>
                      <details class="spoiler">
                       <summary>Рефлексия</summary>
                       <div class="spoiler__content">
                        <ul>
                         <li>
                          <p>C++ Reflection Parser <br><a href="https://github.com/getml/reflect-cpp" rel="noopener noreferrer nofollow">https://github.com/getml/reflect-cpp</a><br><a href="https://github.com/rttrorg/rttr" rel="noopener noreferrer nofollow">https://github.com/rttrorg/rttr</a></p></li>
                         <li>
                          <p>Static reflection for enums (to string, from string, iteration) <br><a href="https://github.com/Neargye/magic_enum" rel="noopener noreferrer nofollow">https://github.com/Neargye/magic_enum</a></p></li>
                         <li>
                          <p>Small protobuf implementation in C <br><a href="https://github.com/protocolbuffers/upb" rel="noopener noreferrer nofollow">https://github.com/protocolbuffers/upb</a></p></li>
                         <li>
                          <p>Protocol Buffers - data interchange format <br><a href="https://github.com/protocolbuffers/protobuf" rel="noopener noreferrer nofollow">https://github.com/protocolbuffers/protobuf</a><br><a href="https://github.com/nanopb/nanopb" rel="noopener noreferrer nofollow">https://github.com/nanopb/nanopb</a></p></li>
                         <li>
                          <p>Fast C++11 serialization library <br><a href="https://github.com/USCiLab/cereal" rel="noopener noreferrer nofollow">https://github.com/USCiLab/cereal</a></p></li>
                         <li>
                          <p><a href="http://Boost.org" rel="noopener noreferrer nofollow">Boost.org</a> serialization module <br><a href="https://github.com/boostorg/serialization" rel="noopener noreferrer nofollow">https://github.com/boostorg/serialization</a></p></li>
                        </ul>
                       </div>
                      </details>
                      <details class="spoiler">
                       <summary>Базовые решения</summary>
                       <div class="spoiler__content">
                        <ul>
                         <li>
                          <p>bgfx, imgui, glfw, glm<br><a href="https://github.com/JoshuaBrookover/bigg" rel="noopener noreferrer nofollow">https://github.com/JoshuaBrookover/bigg</a></p></li>
                         <li>
                          <p>physically based renderer with a fully featured editor <br><a href="https://github.com/Trylz/NebulaRender" rel="noopener noreferrer nofollow">https://github.com/Trylz/NebulaRender</a></p></li>
                         <li>
                          <p>Aether3D Game Engine <br><a href="https://github.com/bioglaze/aether3d" rel="noopener noreferrer nofollow">https://github.com/bioglaze/aether3d</a></p></li>
                         <li>
                          <p>Comprehensive set of C++ open source libraries for realtime rendering<br><a href="https://github.com/WolfEngine/Wolf.Engine" rel="noopener noreferrer nofollow">https://github.com/WolfEngine/Wolf.Engine</a></p></li>
                         <li>
                          <p>Improved version of the X-Ray engine <br><a href="https://github.com/OpenXRay/xray-16" rel="noopener noreferrer nofollow">https://github.com/OpenXRay/xray-16</a></p></li>
                         <li>
                          <p>Pure C Game Engine <br><a href="https://github.com/orangeduck/Corange" rel="noopener noreferrer nofollow">https://github.com/orangeduck/Corange</a></p></li>
                         <li>
                          <p>Сommunity-developed cross platform toolkit<br><a href="https://github.com/openframeworks/openFrameworks" rel="noopener noreferrer nofollow">https://github.com/openframeworks/openFrameworks</a></p></li>
                         <li>
                          <p>Оpen source clone of the Age of Empires II engine <br><a href="https://github.com/SFTtech/openage" rel="noopener noreferrer nofollow">https://github.com/SFTtech/openage</a></p></li>
                         <li>
                          <p>Cross-platform GPU-oriented game framework <br><a href="https://github.com/i42output/neoGFX" rel="noopener noreferrer nofollow">https://github.com/i42output/neoGFX</a></p></li>
                         <li>
                          <p>SDL<br><a href="https://github.com/emscripten-ports/SDL2" rel="noopener noreferrer nofollow">https://github.com/emscripten-ports/SDL2</a></p></li>
                        </ul>
                       </div>
                      </details>
                      <p>К определенному моменту у нас уже есть всё по отдельности: графика, звук, ассеты, физика, UI, может даже AI и скрипты. Но одна важная вещь до сих пор остаётся в стороне: как всё это соединить в нечто работающее? Есть несколько рабоающих подходов. Подробнее эта тема рассматривалась в предыдущей статье, а сейчас просто обобщу.</p>
                      <h4>Нет архитектуры - тоже архитектура</h4>
                      <p>Многие инди-разработчики, уставшие от сложностей современных фреймворков, обращаются к простому библиотечному подходу в разработке. Суть его заключается в создании отдельных независимых подсистем, каждая из которых отвечает за конкретную функциональность. Вы создаете подсистему <code>gfx</code> для отрисовки графики, <code>audio</code> для проигрывания звуков, <code>assets</code> для загрузки данных с диска и <code>input</code> для обработки пользовательского ввода. Каждая подсистема функционирует изолированно, не имея представления о других частях программы. Вы как разработчик самостоятельно определяете, какие функции вызывать и в каком порядке это делать. Весь процесс находится под вашим непосредственным контролем. Кстати, такой подход был популярен в конце девяностых - начал нулевых.</p>
                      <p>Этот метод имеет ряд преимуществ: он прост в реализации, обладает прозрачностью работы и отлично подходит для небольших проектов. Но успех сильно зависит от личной дисциплины разработчика, там отсутствуют автоматические менеджеры сцен и другие вспомогательные структуры. Со временем становится сложно удерживать в голове всю схему вызовов и их причинно-следственные связи.</p>
                      <p>Но поначалу всё работает легко и красиво, для многих этого дастаточно. Позже вы конечно можете столкнуться с такими багами, как отсутствие уведомлений пользовательского интерфейса об обновлении ассетов или незапуск фоновой музыки после загрузки нового уровня. Решение этих проблем неизбежная плата за отсутсвие связей между различными частями программы. А эти связи, по сути, и представляют собой архитектуру приложения, от которой мы изначально пытались уйти.</p>
                      <h4>GodObject - тоже архитектура</h4>
                      <p>Крупные игровые движки вроде Unity, Unreal, Godot, CryEngine, Dagor и других часто выбирают подход, основанный на едином базовом классе. Обычно это класс с названием <code>Object</code>, <code>Entity</code>, <code>GameObject</code>, <code>Actor</code> или подобном ему, который становится прародителем для всех игровых сущностей.</p>
                      <p>Такой базовый класс обычно содержит виртуальные методы для основных игровых функций.</p>
                      <pre><code class="cpp">class GameObject {
public:
    virtual void update(float dt);
    virtual void render();
    virtual void onEvent(const Event&amp;);
};</code></pre>
                      <p>Все создаваемые вами игровые элементы - кнопки интерфейса, враги, неписи - наследуются от этого единого класса. Каждый из этих элементов автоматически получает способность обновляться в игровом цикле, отрисовываться на экране и реагировать на различные события. Удобно? Очень. Из коробки предоставляет единообразный интерфейс для всех игровых объектов. Централизованная структура позволяет легко управлять игровыми сущностями, позволяет реализовать глобальный менеджер объектов.</p>
                      <p>Главная проблема заключается в чрезмерном использовании наследования - все классы происходят от одного родителя, что противоречит принципу "композиция лучше наследования". Возникают трудности при необходимости реализации множественного поведения для объектов - система становится хрупкой и сложной для расширения.</p>
                      <p>Через пару месяцев твой <code>GameObject</code> превращается в гигантскую помойку с виртуальными методами на 300 строк. Попытки исправить это через компоненты делают только хуже. В итоге ты начинаешь думать...</p>
                      <h4>ECS - модно! Но...</h4>
                      <p>Архитектурная модель, которая в последние годы завоевала большую популярность среди инди-разработчиков и энтузиастов. Основная идея заключается в <strong>радикальном </strong>разделении данных и логики внутри игровой системы - всё строится вокруг трех ключевых концепций. Entity (сущность) представляет собой просто идентификатор, не содержащий никакой логики или данных самостоятельно. Component (компонент) является контейнером для определенного типа данных, таких как позиция объекта, запас здоровья или параметры звука. System (система) представляет собой функциональный блок, который обрабатывает компоненты по определенным правилам.</p>
                      <p>По раздельности работать не будет, но вместе позволяет исключить традиционную иерархию объектов, заменяя ее пакетной обработкой данных. Например, система физики может одновременно получить доступ ко всем компонентам Transform и Velocity, чтобы обновить координаты всех движущихся объектов за одну операцию.</p>
                      <p>Из преимуществ получаем высокую производительность благодаря эффективному использованию кэша процессора, четкое разделение ответственности между различными частями системы, и хорошую масштабируемость.</p>
                      <p>Из минусов - влетаем по полной в использование сложной системы, которая часто требует написания значительного объема шаблонного кода. Без специализированных редакторов код ECS практически нечитаем, без визуальных отладчиков его ещё и не подебажить.</p>
                      <p>Для проектов небольшого масштаба, это будет как пальба из танка по мухам. Попытки массово продать это инди-разработчикам буксуют уже шестой год, что в Юнити, что в Анриале.</p>
                      <h4>А может просто оставить всё как есть?</h4>
                      <p>И да, и нет. Архитектура — это не цель, а инструмент. Если ты делаешь хобби проект на выходных — не надо строить идеальный фреймворк, ибо получится фреймворк, а когда начинаешь писать фреймворк - разработка игры уходит на второй план. Но также важно, что архитектура — это как скелет игры. Никто его не видит, но если он кривой, то всё будет болеть, гнуться и ломаться при каждом чихе. А когда станет совсем неудобно — не надо бояться всё выкинуть и начать заново. Не бойтесь выкидывать сломанное, все так делают (правило трех систем)</p>
                      <p>К тому же <a href="https://github.com/aisuhua/Books-2/blob/master/Game%20Engine%20Architecture.pdf" rel="noopener noreferrer nofollow">GEA</a> все также актуален и лучше пока что не придумали, если вдруг забуксовали перечитайте соответствующую главу в этой книге.</p>
                      <h2>Тулзы</h2>
                      <p>Говоря о тулзах, вспомогательных инструментах для работы с движком — как вы уже могли догадаться — не каждый движок или игра нуждается в них. В качестве инструментов, например, могут использоваться простые Python-скрипты.</p>
                      <p>Большинство движков предоставляют из коробки полноценные визуальные редакторы., которые выглядят как гибрид IDE (среды разработки) и Blenderа, с возможностью расставлять объекты на сцене, редактировать материалы и шейдеры, настраивать физику и взаимодействия, просматривать анимации и интерфейс, тестировать всё в режиме реального времени.</p>
                      <p>Но создание полноценного редактора — задача, сопоставимая по сложности с разработкой самого движка. Для небольшого движка делать Unity-подобный редактор не нужно и не стоит. - это будет неэффективно и отнимет уйму времени. Тем не менее, не стоит пренебрегать простыми инструментами, которые пишутся за пару-тройку вечеров, но значительно облегчают жизнь:</p>
                      <ul>
                       <li>
                        <p>Конвертер уровней: часто собственный формат (обычно бинарный) - это лучший выбор для небольшой игры, свой формат позволяет управлять производительностью. Можно написать утилиту, которая берёт данные из Blender или Tiled, преобразует их в нужный формат на лету, а движок подхватывает и показывает результат.</p></li>
                       <li>
                        <p>Проверка ресурсов: ассеты будут загружаться криво или с ошибками, случается это сплошь и рядом. Стоит потратить какое-то времян на валидатор, который может пробегаться по ресурсам и проверять, всё ли на месте (например, нет ли отсутствующих текстур, шейдеров или моделей). Сохраняет очень много времени при тестировании.</p></li>
                       <li>
                        <p>Конвертер текстур: почти всегда приходится перекодировать изображения в GPU-формат (DXT, ASTC или ETC), или собирать текстурные атласа.</p></li>
                       <li>
                        <p>Примеров минитулзов много: импортер ассетов, чекер зависимостей, инспектор ассетов, внутриигровая консоль, реплеи и тд</p></li>
                      </ul>
                      <p>Важно помнить: время, потраченное на инструмент, должно экономить вам больше времени в будущем. Не создавайте визуальный редактор ради самого редактора. Но если приходится каждый раз вручную редактировать 200 строк JSON неудобно — простая тулза или скрипт сэкономит уйму времени.</p>
                      <h3>Заключение</h3>
                      <p>Мы тут обсудили всякие интересные особенности разработки игр (игровых движков) — контейнеры, строки, аллокаторы, архитектуру и тд. И я надеюсь, что после всего этого мысль «а не сделать ли свой движок» не кажется слишком самоубийственной. Да, но давайте не забывать очевидное: 90% игр не нуждаются ни в чём из этого.</p>
                      <p>Для того, чтобы начать разбираться в том как устроены игры вам не нужен движок уровня Unreal. Чтобы не стать очередным Unreal "какбы" C++ программистом, который не отличает array от vector - надо сделать свою первую (или пятую) игру без движка, сделать примитивную версию, которая открывает окно, рисует пару спрайтов и пакует проект в zip. Пусть это будет игра-движок. Простой, убогий, но свой. И, что важнее, сделанный с пониманием используемых инструментов. Без Unity, без Godot, без других удобных костылей. Пусть оно будет кривым и тормозным — это неважно.</p>
                      <p>Зато это позволит повозиться с архитектурой, шаблонами проектирования и разобраться в оптимизации ресурсов. Этот путь потребует времени, но в итоге вы получите не просто игру, но и понимание «внутренней кухни». Важность такого подхода сложно оценить для дальнейшей карьеры. Здесь закладывается и начинается профессиональный рост. Настоящий, без фантиков. Человек, пришедший в разработку со знанием Анриала, сможет работать только на нём, человек знающий как он устроен изнутри, сможет и в Анриал, и в Юнити и в Годот.</p>
                      <p>Конечно, это не единственный вариант: если Unreal Engine, Godot или другие готовые решения кажутся вам удобнее — почему бы и нет? Всё зависит от амбиций, терпения и готовности копать глубже. Но даже если вы в итоге остановитесь на чужом движке, опыт самостоятельной разработки станет мощным толчком для профессионального роста, научив видеть за технической сутью магию игр.</p>
                      <p>Выбор — как всегда — за вами.</p>
                      <figure class="full-width ">
                       <img src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/a02/c27/ef6/a02c27ef614bc11076e162638ef91af4.png" width="673" height="255" sizes="(max-width: 780px) 100vw, 50vw" srcset="https://habrastorage.org/r/w780/getpro/habr/upload_files/a02/c27/ef6/a02c27ef614bc11076e162638ef91af4.png 780w,
       https://habrastorage.org/r/w1560/getpro/habr/upload_files/a02/c27/ef6/a02c27ef614bc11076e162638ef91af4.png 781w" loading="lazy" decode="async">
                      </figure>
                      <details class="spoiler">
                       <summary>А ещё</summary>
                       <div class="spoiler__content">
                        <p>А ещё я все еще в поисках самой лучшей студии. Большая М слишком большая, и слишком неповоротливая в плане решений. Если кому интересно, ссылка на линкедин в профиле.</p>
                       </div>
                      </details>
                      <h2>P.S.</h2>
                      <p>Это последняя статья цикла с теорией и описанием интересных кейсов. Но бонусом будет еще одна со всякими примерами просадки перфа на реальных случаях из игровых проектов (с указанием имени, там где было разрешение), там уже без теории - просто кейсы фризов и как чинили. Не переключайтесь!</p>
                     </div>
                    </div>
                   </div><!----><!---->
                  </div><!----><!---->
                 </div><!--]--><!---->
                 <div class="tm-article-presenter__meta" data-test-id="article-meta-links">
                  <div class="tm-separated-list tm-article-presenter__meta-list">
                   <span class="tm-separated-list__title">Теги:</span>
                   <ul class="tm-separated-list__list">
                    <!--[-->
                    <li class="tm-separated-list__item"><!--[--><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=[%D1%81%2B%2B]" class="tm-tags-list__link"><span>с++</span></a><!--]--></li>
                    <li class="tm-separated-list__item"><!--[--><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=[game%2B%2B]" class="tm-tags-list__link"><span>game++</span></a><!--]--></li>
                    <li class="tm-separated-list__item"><!--[--><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=[%D1%80%D0%B0%D0%B7%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B0+%D0%B8%D0%B3%D1%80]" class="tm-tags-list__link"><span>разработка игр</span></a><!--]--></li>
                    <li class="tm-separated-list__item"><!--[--><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=[%D0%B8%D0%B3%D1%80%D1%8B+%D0%B8+%D0%B8%D0%B3%D1%80%D0%BE%D0%B2%D1%8B%D0%B5+%D0%BA%D0%BE%D0%BD%D1%81%D0%BE%D0%BB%D0%B8]" class="tm-tags-list__link"><span>игры и игровые консоли</span></a><!--]--></li><!--]--><!---->
                   </ul>
                  </div>
                  <div class="tm-separated-list tm-article-presenter__meta-list">
                   <span class="tm-separated-list__title">Хабы:</span>
                   <ul class="tm-separated-list__list">
                    <!--[-->
                    <li class="tm-separated-list__item"><!--[--><a href="/ru/hubs/cpp/" class="tm-hubs-list__link"><!--[--><span>C++</span><!--]--></a><!--]--></li>
                    <li class="tm-separated-list__item"><!--[--><a href="/ru/hubs/programming/" class="tm-hubs-list__link"><!--[--><span>Программирование</span><!--]--></a><!--]--></li>
                    <li class="tm-separated-list__item"><!--[--><a href="/ru/hubs/gamedev/" class="tm-hubs-list__link"><!--[--><span>Разработка игр</span><!--]--></a><!--]--></li>
                    <li class="tm-separated-list__item"><!--[--><a href="/ru/hubs/games/" class="tm-hubs-list__link"><!--[--><span>Игры и игровые консоли</span><!--]--></a><!--]--></li><!--]--><!---->
                   </ul>
                  </div>
                 </div>
                 <div class="article-donation-block">
                  <div class="article-donation-block__message">
                   Если эта публикация вас вдохновила и вы хотите поддержать автора — не&nbsp;стесняйтесь нажать на кнопку
                  </div>
                  <button class="btn btn_solid btn_small tm-button tm-button_color-horizon article-donation-block__button" type="button"><!--[--><!--[-->Задонатить<!--]--><!--]--></button><!---->
                 </div><!--]-->
                </article><!--]-->
               </div><!---->
              </div>
              <div style="" class="tm-article-sticky-panel" data-test-id="article-sticky-panel">
               <div class="tm-data-icons tm-data-icons tm-data-icons_space-big tm-article-sticky-panel__icons" data-test-id="article-stats-icons">
                <div class="article-rating tm-data-icons__item" data-v-86aec4a7>
                 <div class="tm-votes-lever tm-votes-lever tm-votes-lever_appearance-article votes-switcher" title="Всего голосов 11: ↑11 и ↓0" data-v-86aec4a7>
                  <button class="tm-votes-lever__button" data-test-id="votes-lever-upvote-button" title="Нравится" type="button">
                   <svg class="tm-svg-img tm-votes-lever__icon" height="24" width="24">
                    <title>
                     Нравится
                    </title><use xlink:href="/img/megazord-v28.7909a852..svg#counter-vote"></use>
                   </svg></button>
                  <div class="tm-votes-lever__score tm-votes-lever__score_appearance-article tm-votes-lever__score">
                   <!--[--><span><span class="tm-votes-lever__score-counter tm-votes-lever__score-counter_positive tm-votes-lever__score-counter" data-test-id="votes-score-counter">+14</span></span><!--]-->
                  </div>
                  <button class="tm-votes-lever__button" data-test-id="votes-lever-downvote-button" title="Не нравится" type="button">
                   <svg class="tm-svg-img tm-votes-lever__icon tm-votes-lever__icon_arrow-down" height="24" width="24">
                    <title>
                     Не нравится
                    </title><use xlink:href="/img/megazord-v28.7909a852..svg#counter-vote"></use>
                   </svg></button>
                 </div><!--teleport start--><!--teleport end--><!---->
                </div><!----><!---->
                <button class="bookmarks-button tm-data-icons__item" title="Добавить в закладки" type="button"><span class="tm-svg-icon__wrapper bookmarks-button__icon">
                  <svg class="tm-svg-img tm-svg-icon" height="24" width="24">
                   <title>
                    Добавить в закладки
                   </title><use xlink:href="/img/megazord-v28.7909a852..svg#counter-favorite"></use>
                  </svg></span><span class="bookmarks-button__counter" title="Количество пользователей, добавивших публикацию в закладки">32</span></button>
                <div class="tm-sharing tm-data-icons__item" title="Поделиться">
                 <button class="tm-sharing__button" type="button">
                  <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="tm-sharing__icon">
                   <path fill="currentColor" d="M13.8 13.8V18l7.2-6.6L13.8 5v3.9C5 8.9 3 18.6 3 18.6c2.5-4.4 6-4.8 10.8-4.8z"></path>
                  </svg></button><!--teleport start--><!--teleport end-->
                </div>
                <div class="tm-article-comments-counter-link tm-data-icons__item" title="Читать комментарии">
                 <a href="/ru/articles/907146/comments/" class="tm-article-comments-counter-link__link" data-test-id="counter-comments"><!--[-->
                  <svg class="tm-svg-img tm-article-comments-counter-link__icon" height="24" width="24">
                   <title>
                    Комментарии
                   </title><use xlink:href="/img/megazord-v28.7909a852..svg#counter-comments"></use>
                  </svg><span class="tm-article-comments-counter-link__value">5</span><!--]--></a><!---->
                </div><!--[--><!--[--><!--[--><!----><!--]--><!--]--><!--]--><!--teleport start--><!--teleport end--><!---->
               </div>
              </div>
             </div><!--[--><!--]-->
             <div class="tm-article-presenter__footer">
              <!--[--><!--[-->
              <div class="tm-article-blocks">
               <!----><!--[-->
               <section class="tm-block tm-block tm-block_spacing-bottom">
                <!----><!--[-->
                <div class="tm-block__body tm-block__body tm-block__body_variant-balanced">
                 <!--[-->
                 <div class="tm-article-author" data-test-id="article-author-info" data-async-called="true">
                  <!--[--><!--]-->
                  <div class="tm-user-card tm-user-card tm-user-card_variant-article tm-article-author__user-card" data-async-called="true">
                   <div class="tm-user-card__info-container">
                    <div class="tm-user-card__header">
                     <div class="tm-user-card__header-data">
                      <a href="/ru/users/dalerank/" class="tm-user-card__userpic tm-user-card__userpic_size-40">
                       <div class="tm-entity-image">
                        <img alt="" class="tm-entity-image__pic" src="//habrastorage.org/getpro/habr/avatars/ae5/f74/b00/ae5f74b00f68105d98362bd11f263809.jpg">
                       </div></a>
                      <div class="tm-user-card__meta">
                       <div class="tm-counter-container karma" title=" 504 голоса " data-v-f7c0e283>
                        <div class="tm-counter-container__header">
                         <!--[-->
                         <div class="karma-display positive" data-v-f7c0e283 data-v-7635202e>
                          476
                         </div><!----><!--]-->
                        </div>
                        <div class="tm-counter-container__footer">
                         <!--[-->
                         <div class="karma-text" data-v-f7c0e283>
                          Карма
                         </div><!--teleport start--><!--teleport end--><!--]-->
                        </div>
                       </div>
                       <div class="tm-counter-container" title="Рейтинг пользователя">
                        <div class="tm-counter-container__header">
                         <!--[--><!--[--><!--]-->
                         <div class="tm-votes-lever tm-votes-lever tm-votes-lever_appearance-rating">
                          <!---->
                          <div class="tm-votes-lever__score tm-votes-lever__score_appearance-rating tm-votes-lever__score_no-margin tm-votes-lever__score">
                           <!--[--><span><span class="tm-votes-lever__score-counter tm-votes-lever__score-counter_rating tm-votes-lever__score-counter" data-test-id="votes-score-counter">257.3</span></span><!--]-->
                          </div><!---->
                         </div><!--]-->
                        </div>
                        <div class="tm-counter-container__footer">
                         <!--[--><span class="tm-rating__text tm-rating__text">Рейтинг</span><!--]-->
                        </div>
                       </div>
                      </div>
                     </div>
                    </div>
                    <div class="tm-user-card__info tm-user-card__info_variant-article tm-user-card__info">
                     <div class="tm-user-card__title tm-user-card__title_variant-article tm-user-card__title">
                      <span class="tm-user-card__name tm-user-card__name_variant-article tm-user-card__name">Sergei Kushnirenko</span><a href="/ru/users/dalerank/" class="tm-user-card__nickname tm-user-card__nickname tm-user-card__nickname_variant-article"> @dalerank</a><!---->
                     </div>
                     <p class="tm-user-card__short-info tm-user-card__short-info_variant-article tm-user-card__short-info" data-test-id="user-card-speciality">Люблю (ш)кодить, алгоритмы и старые авто.</p>
                    </div>
                   </div><!---->
                   <div class="tm-user-card__buttons tm-user-card__buttons_variant-article tm-user-card__buttons">
                    <!---->
                    <div class="tm-user-card__button">
                     <div class="tm-button-follow tm-user-card__button-follow">
                      <!---->
                      <button class="tm-button-follow__button tm-button-follow__button_big" data-test-id="follow-button" type="button">Подписаться</button>
                     </div>
                    </div><!---->
                    <div class="tm-user-card__button tm-user-card__button_write" data-test-id="user-card-conversations">
                     <svg class="tm-svg-img tm-user-card__button-icon" height="16" width="16">
                      <title>
                       Отправить сообщение
                      </title><use xlink:href="/img/megazord-v28.7909a852..svg#mail"></use>
                     </svg>
                    </div><!---->
                   </div><!---->
                  </div>
                  <div class="tm-article-author__user-contacts" data-test-id="author-contacts">
                   <!----><!----><!---->
                  </div>
                 </div><!--]-->
                </div><!--]--><!---->
               </section><!----><!--[-->
               <div class="banner-wrapper leaderboard tm-page-article__banner" style="--38f3d936:200px;--78a3cd06:auto;" data-v-f4bf0d24>
                <!--[-->
                <div class="placeholder-wrapper placeholder" data-v-f4bf0d24>
                 <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!---->
                 <div class="adfox-banner-placeholder leaderboard" data-v-12f7bcca>
                  <div class="image loads" data-v-12f7bcca></div>
                  <div class="lines" data-v-12f7bcca>
                   <div class="line loads" data-v-12f7bcca></div>
                   <div class="line loads" data-v-12f7bcca></div>
                   <div class="line loads" data-v-12f7bcca></div>
                  </div>
                 </div><!----><!----><!---->
                </div>
                <div id="adfox_164725660339535756" class="tm-adfox-banner" data-v-f4bf0d24></div><!--]-->
               </div><!--]--><!--]-->
               <div class="tm-article-blocks__comments">
                <div id="publication-comments" class="tm-article-page-comments">
                 <div>
                  <!--[-->
                  <div class="tm-article-comments-counter-link tm-article-comments-counter-button">
                   <a href="/ru/articles/907146/comments/" class="tm-article-comments-counter-link__link tm-article-comments-counter-link__link_button-style" data-test-id="counter-comments"><!--[-->
                    <svg class="tm-svg-img tm-article-comments-counter-link__icon tm-article-comments-counter-link__icon_contrasted" height="24" width="24">
                     <title>
                      Комментарии
                     </title><use xlink:href="/img/megazord-v28.7909a852..svg#counter-comments"></use>
                    </svg><span class="tm-article-comments-counter-link__value tm-article-comments-counter-link__value_contrasted"> Комментарии 5 </span><!--]--></a><!---->
                  </div><!--]-->
                 </div>
                </div>
               </div><!--[--><!--[--><!--]-->
               <section class="tm-block tm-block tm-block_spacing-bottom">
                <header class="tm-block__header tm-block__header tm-block__header_variant-borderless">
                 <div class="tm-block__header-container">
                  <h2 class="tm-block__title tm-block__title tm-block__title_variant-large">Публикации</h2><!--[--><!--]-->
                 </div><!---->
                </header><!--[-->
                <div class="tm-block__body tm-block__body tm-block__body_variant-condensed-slim">
                 <!--[--><!--[-->
                 <div class="tm-tabs tm-tabs">
                  <div class="">
                   <!--[--><span class="tm-tabs__tab-item">
                    <button class="tm-tabs__tab-link tm-tabs__tab-link_active tm-tabs__tab-link_slim tm-tabs__tab-link">Лучшие за сутки</button></span><span class="tm-tabs__tab-item">
                    <button class="tm-tabs__tab-link tm-tabs__tab-link_slim tm-tabs__tab-link">Похожие</button></span><!--]-->
                  </div><!---->
                 </div>
                 <div class="similar-and-daily__tab-view">
                  <div class="daily-articles-list">
                   <ul class="tm-article-card-list">
                    <!--[--><!--]-->
                    <div class="tm-bordered-card">
                     <!----><!--[--><!--]-->
                    </div>
                   </ul>
                   <div class="daily-articles-block__button-container">
                    <button class="btn btn_transparent btn_small tm-button tm-button_color-horizon" type="button"><!--[--><!--[-->Показать лучшие за всё время<!--]--><!--]--></button>
                   </div>
                  </div><!---->
                 </div><!--]--><!--]-->
                </div><!--]--><!---->
               </section><!--[-->
               <div>
                <div class="placeholder-wrapper">
                 <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!---->
                 <div class="tm-placeholder-promo">
                  <div class="tm-placeholder-promo__header">
                   <div class="tm-placeholder__line tm-placeholder__line_promo-title"></div>
                  </div>
                  <div class="tm-placeholder-promo__body">
                   <div class="tm-placeholder-promo__posts">
                    <div class="tm-placeholder-promo__post">
                     <div class="tm-placeholder-promo__image"></div>
                     <div class="tm-placeholder__line tm-placeholder__line_post-title"></div>
                    </div>
                    <div class="tm-placeholder-promo__post">
                     <div class="tm-placeholder-promo__image"></div>
                     <div class="tm-placeholder__line tm-placeholder__line_post-title"></div>
                    </div>
                    <div class="tm-placeholder-promo__post">
                     <div class="tm-placeholder-promo__image"></div>
                     <div class="tm-placeholder__line tm-placeholder__line_post-title"></div>
                    </div>
                   </div>
                   <div class="tm-placeholder-promo__dots">
                    <div class="tm-placeholder-promo__dot"></div>
                    <div class="tm-placeholder-promo__dot"></div>
                    <div class="tm-placeholder-promo__dot"></div>
                   </div>
                  </div>
                 </div><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!---->
                </div>
               </div>
               <div class="placeholder-wrapper" data-async-called="true">
                <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!---->
                <div class="tm-placeholder-inset tm-placeholder-vacancies">
                 <div class="tm-placeholder-inset__header">
                  <div class="tm-placeholder__line tm-placeholder__line_inset-header loads"></div>
                 </div>
                 <div class="tm-placeholder-inset__body">
                  <ul class="tm-placeholder-list">
                   <!--[-->
                   <li class="tm-placeholder-list__item tm-placeholder-list__item_inset">
                    <div class="tm-placeholder-list__title-container">
                     <div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div>
                    </div>
                    <div class="tm-project-block-items__properties">
                     <!--[--><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><!--]-->
                    </div></li>
                   <li class="tm-placeholder-list__item tm-placeholder-list__item_inset">
                    <div class="tm-placeholder-list__title-container">
                     <div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div>
                    </div>
                    <div class="tm-project-block-items__properties">
                     <!--[--><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><!--]-->
                    </div></li>
                   <li class="tm-placeholder-list__item tm-placeholder-list__item_inset">
                    <div class="tm-placeholder-list__title-container">
                     <div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div>
                    </div>
                    <div class="tm-project-block-items__properties">
                     <!--[--><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><!--]-->
                    </div></li>
                   <li class="tm-placeholder-list__item tm-placeholder-list__item_inset">
                    <div class="tm-placeholder-list__title-container">
                     <div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div>
                    </div>
                    <div class="tm-project-block-items__properties">
                     <!--[--><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><!--]-->
                    </div></li>
                   <li class="tm-placeholder-list__item tm-placeholder-list__item_inset">
                    <div class="tm-placeholder-list__title-container">
                     <div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div>
                    </div>
                    <div class="tm-project-block-items__properties">
                     <!--[--><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><!--]-->
                    </div></li><!--]-->
                  </ul>
                 </div>
                 <div class="tm-placeholder-inset__footer">
                  <div class="tm-placeholder__line tm-placeholder__line_inset-footer loads"></div>
                 </div>
                </div><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!---->
               </div><!--]--><!----><!--[--><!--]--><!--]-->
              </div><!--]--><!--]-->
             </div>
            </div><!--]--><!--]-->
           </div>
          </div>
          <div class="tm-page__sidebar">
           <!--[-->
           <div class="tm-layout-sidebar">
            <div class="tm-layout-sidebar__placeholder_initial"></div>
            <div class="tm-sexy-sidebar_initial tm-sexy-sidebar" style="margin-top:0px;">
             <!--[--><!--]--><!---->
             <div class="tm-layout-sidebar__ads_initial tm-layout-sidebar__ads">
              <div class="banner-wrapper half-page tm-layout-sidebar__banner tm-layout-sidebar__banner_top" style="--38f3d936:600px;--78a3cd06:auto;" data-v-f4bf0d24>
               <!--[-->
               <div class="placeholder-wrapper placeholder" data-v-f4bf0d24>
                <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!---->
                <div class="adfox-banner-placeholder half-page" data-v-12f7bcca>
                 <div class="image loads" data-v-12f7bcca></div>
                 <div class="lines" data-v-12f7bcca>
                  <div class="line loads" data-v-12f7bcca></div>
                  <div class="line loads" data-v-12f7bcca></div>
                  <div class="line loads" data-v-12f7bcca></div>
                 </div>
                </div><!----><!----><!---->
               </div>
               <div id="adfox_164725680533065327" class="tm-adfox-banner" data-v-f4bf0d24></div><!--]-->
              </div>
             </div><!--[--><!---->
             <div></div>
             <section class="tm-block tm-block tm-block_spacing-around" data-async-called="true">
              <header class="tm-block__header tm-block__header">
               <div class="tm-block__header-container">
                <h2 class="tm-block__title tm-block__title">Работа</h2><!--[--><!--]-->
               </div><!---->
              </header><!--[-->
              <div class="tm-block__body tm-block__body">
               <!--[--><!--[-->
               <div class="tm-vacancies-block__item">
                <a class="tm-vacancies-block__vacancy-title" href="https://career.habr.com/vacancies/programmist_c_plus_plus" target="_blank">Программист C++</a>
                <div class="tm-vacancies-block__vacancies-count">
                 101 вакансия
                </div>
               </div>
               <div class="tm-vacancies-block__item">
                <a class="tm-vacancies-block__vacancy-title" href="https://career.habr.com/vacancies/game_developer" target="_blank">Разработчик игр</a>
                <div class="tm-vacancies-block__vacancies-count">
                 33 вакансии
                </div>
               </div>
               <div class="tm-vacancies-block__item">
                <a class="tm-vacancies-block__vacancy-title" href="https://career.habr.com/vacancies/unity_developer" target="_blank">Unity разработчик</a>
                <div class="tm-vacancies-block__vacancies-count">
                 4 вакансии
                </div>
               </div>
               <div class="tm-vacancies-block__item">
                <a class="tm-vacancies-block__vacancy-title" href="https://career.habr.com/vacancies/c_plus_plus_qt_developer" target="_blank">QT разработчик</a>
                <div class="tm-vacancies-block__vacancies-count">
                 8 вакансий
                </div>
               </div><!--]--><!--]-->
              </div><!--]-->
              <footer class="tm-block__footer">
               <!--[--><a class="tm-block-extralink" href="https://career.habr.com/catalog">Все вакансии</a><!--]-->
              </footer>
             </section>
             <section class="tm-block tm-block tm-block_spacing-around block" data-v-6f380946>
              <header class="tm-block__header tm-block__header">
               <div class="tm-block__header-container">
                <h2 class="tm-block__title tm-block__title">Ближайшие события</h2><!--[--><!--]-->
               </div><!---->
              </header><!--[-->
              <div class="tm-block__body tm-block__body">
               <!--[-->
               <div class="placeholder-wrapper" data-v-6f380946>
                <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!---->
                <section class="tm-block tm-block tm-block_spacing-none" tabindex="-1" data-v-9caf0b82>
                 <!----><!--[-->
                 <div class="event-card-placeholder is-widget" data-v-9caf0b82>
                  <div class="image loads" data-v-9caf0b82></div>
                  <div class="info" data-v-9caf0b82>
                   <div class="date line" data-v-9caf0b82></div>
                   <div class="title line" data-v-9caf0b82></div>
                   <div class="places line" data-v-9caf0b82></div>
                   <div class="places line" data-v-9caf0b82></div>
                  </div>
                  <div class="footer widget" data-v-9caf0b82>
                   <div class="link line" data-v-9caf0b82></div>
                   <div class="categories" data-v-9caf0b82>
                    <!--[-->
                    <div class="category line" data-v-9caf0b82></div>
                    <div class="category line" data-v-9caf0b82></div>
                    <div class="category line" data-v-9caf0b82></div><!--]-->
                   </div>
                  </div>
                 </div><!--]--><!---->
                </section><!---->
               </div><!--]-->
              </div><!--]--><!---->
             </section><!--]-->
             <div class="banner-wrapper medium-rectangle tm-layout-sidebar__banner tm-layout-sidebar__banner_bottom" style="--38f3d936:250px;--78a3cd06:auto;" data-v-f4bf0d24>
              <!--[-->
              <div class="placeholder-wrapper placeholder" data-v-f4bf0d24>
               <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!---->
               <div class="adfox-banner-placeholder medium-rectangle" data-v-12f7bcca>
                <div class="image loads" data-v-12f7bcca></div>
                <div class="lines" data-v-12f7bcca>
                 <div class="line loads" data-v-12f7bcca></div>
                 <div class="line loads" data-v-12f7bcca></div>
                 <div class="line loads" data-v-12f7bcca></div>
                </div>
               </div><!----><!----><!---->
              </div>
              <div id="adfox_164725691003361602" class="tm-adfox-banner" data-v-f4bf0d24></div><!--]-->
             </div>
            </div>
           </div><!--]-->
          </div>
         </div><!----><!--]-->
        </div>
       </div>
      </main><!---->
     </div>
     <div class="tm-footer-menu">
      <div class="tm-page-width">
       <!--[-->
       <div class="tm-footer-menu__container">
        <!--[-->
        <div class="tm-footer-menu__block">
         <p class="tm-footer-menu__block-title">Ваш аккаунт</p>
         <div class="tm-footer-menu__block-content">
          <ul class="tm-footer-menu__list">
           <!--[-->
           <li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr/?back=/ru/articles/907146/&amp;hl=ru" rel="nofollow" target="_self">Войти</a></li>
           <li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr-register/?back=/ru/articles/907146/&amp;hl=ru" rel="nofollow" target="_self">Регистрация</a></li><!--]-->
          </ul>
         </div>
        </div>
        <div class="tm-footer-menu__block">
         <p class="tm-footer-menu__block-title">Разделы</p>
         <div class="tm-footer-menu__block-content">
          <ul class="tm-footer-menu__list">
           <!--[-->
           <li class="tm-footer-menu__list-item"><a href="/ru/articles/" class="footer-menu__item-link">Статьи</a></li>
           <li class="tm-footer-menu__list-item"><a href="/ru/news/" class="footer-menu__item-link">Новости</a></li>
           <li class="tm-footer-menu__list-item"><a href="/ru/hubs/" class="footer-menu__item-link">Хабы</a></li>
           <li class="tm-footer-menu__list-item"><a href="/ru/companies/" class="footer-menu__item-link">Компании</a></li>
           <li class="tm-footer-menu__list-item"><a href="/ru/users/" class="footer-menu__item-link">Авторы</a></li>
           <li class="tm-footer-menu__list-item"><a href="/ru/sandbox/" class="footer-menu__item-link">Песочница</a></li><!--]-->
          </ul>
         </div>
        </div>
        <div class="tm-footer-menu__block">
         <p class="tm-footer-menu__block-title">Информация</p>
         <div class="tm-footer-menu__block-content">
          <ul class="tm-footer-menu__list">
           <!--[-->
           <li class="tm-footer-menu__list-item"><a href="/ru/docs/help/" class="footer-menu__item-link">Устройство сайта</a></li>
           <li class="tm-footer-menu__list-item"><a href="/ru/docs/authors/codex/" class="footer-menu__item-link">Для авторов</a></li>
           <li class="tm-footer-menu__list-item"><a href="/ru/docs/companies/corpblogs/" class="footer-menu__item-link">Для компаний</a></li>
           <li class="tm-footer-menu__list-item"><a href="/ru/docs/docs/transparency/" class="footer-menu__item-link">Документы</a></li>
           <li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/agreement/?hl=ru_RU" target="_blank">Соглашение</a></li>
           <li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/confidential/?hl=ru_RU" target="_blank">Конфиденциальность</a></li><!--]-->
          </ul>
         </div>
        </div>
        <div class="tm-footer-menu__block">
         <p class="tm-footer-menu__block-title">Услуги</p>
         <div class="tm-footer-menu__block-content">
          <ul class="tm-footer-menu__list">
           <!--[-->
           <li class="tm-footer-menu__list-item"><a href="https://company.habr.com/ru/corporate-blogs/" target="_blank">Корпоративный блог</a></li>
           <li class="tm-footer-menu__list-item"><a href="https://company.habr.com/ru/advertising/" target="_blank">Медийная реклама</a></li>
           <li class="tm-footer-menu__list-item"><a href="https://company.habr.com/ru/native-special/" target="_blank">Нативные проекты</a></li>
           <li class="tm-footer-menu__list-item"><a href="https://company.habr.com/ru/education-programs/" target="_blank">Образовательные программы</a></li>
           <li class="tm-footer-menu__list-item"><a href="https://company.habr.com/ru/hello-startup/" target="_blank">Стартапам</a></li><!--]-->
          </ul>
         </div>
        </div><!--]-->
       </div><!--]-->
      </div>
     </div>
     <div class="tm-footer">
      <div class="tm-page-width">
       <!--[-->
       <div class="tm-footer__container">
        <!---->
        <div class="tm-footer__social">
         <!--[--><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://www.facebook.com/habrahabr.ru" rel="nofollow noopener noreferrer" target="_blank">
          <svg class="tm-svg-img tm-svg-icon" height="24" width="24">
           <title>
            Facebook
           </title><use xlink:href="/img/new-social-icons-sprite.svg#social-logo-facebook"></use>
          </svg></a><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://twitter.com/habr_com" rel="nofollow noopener noreferrer" target="_blank">
          <svg class="tm-svg-img tm-svg-icon" height="24" width="24">
           <title>
            Twitter
           </title><use xlink:href="/img/new-social-icons-sprite.svg#social-logo-twitter"></use>
          </svg></a><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://vk.com/habr" rel="nofollow noopener noreferrer" target="_blank">
          <svg class="tm-svg-img tm-svg-icon" height="24" width="24">
           <title>
            VK
           </title><use xlink:href="/img/new-social-icons-sprite.svg#social-logo-vk"></use>
          </svg></a><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://telegram.me/habr_com" rel="nofollow noopener noreferrer" target="_blank">
          <svg class="tm-svg-img tm-svg-icon" height="24" width="24">
           <title>
            Telegram
           </title><use xlink:href="/img/new-social-icons-sprite.svg#social-logo-telegram"></use>
          </svg></a><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" rel="nofollow noopener noreferrer" target="_blank">
          <svg class="tm-svg-img tm-svg-icon" height="24" width="24">
           <title>
            Youtube
           </title><use xlink:href="/img/new-social-icons-sprite.svg#social-logo-youtube"></use>
          </svg></a><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://dzen.ru/habr" rel="nofollow noopener noreferrer" target="_blank">
          <svg class="tm-svg-img tm-svg-icon" height="24" width="24">
           <title>
            Яндекс Дзен
           </title><use xlink:href="/img/new-social-icons-sprite.svg#social-logo-dzen"></use>
          </svg></a><!--]-->
        </div><!--teleport start--><!--teleport end-->
        <button class="tm-footer__link"><!----> Настройка языка</button><a href="/ru/feedback/" class="tm-footer__link">Техническая поддержка</a>
        <div class="tm-footer-copyright">
         <span class="tm-copyright"><span class="tm-copyright__years">© 2006–2025, </span><span class="tm-copyright__name"><a class="tm-copyright__link" href="https://company.habr.com/" rel="noopener" target="_blank">Habr</a></span></span>
        </div>
       </div><!--]-->
      </div>
     </div><!----><!--]-->
    </div><!---->
   </div>
   <script>window.__INITIAL_STATE__={"adblock":{"hasAcceptableAdsFilter":false,"hasAdblock":false},"articlesList":{"articlesList":{"907146":{"id":"907146","timePublished":"2025-05-06T18:55:43+00:00","isCorporative":false,"lang":"ru","titleHtml":"Game++. while (!game(over))","leadData":{"textHtml":"\u003Cp\u003EКогда деревья были большими, а игровые движки маленькими - выбора писать или не писать свой не стояло - если у тебя нет своего движка, фактически у тебя нет игры. Кто-то покупал чужой движок и наслаждался прекрасными велосипедами импортной сборки, в то время как другие пилили свое, на что уходили месяцы, если не годы.\u003C\u002Fp\u003E\u003Cp\u003EЭта серия статей родилась как заметки на полях к замечательной книге \u003Ccode\u003EGame Engine Architecture\u003C\u002Fcode\u003E, книга большая, объемная и охватывает все аспекты создания движка. Но там нет нюансов практической разработки. А чтобы видеть нюансы надо понимать не только теорию, все же GAE больше теория, но знать как работает код игры изнутри. Чтобы понимать как, и главное почему, используются выбранные механизмы внутри игры, чтобы видеть проблемы с производительностью и архитектурой, как их искать и как чинить, для этого придется понять как работают и как создавались игровые движки.\u003C\u002Fp\u003E\u003Cp\u003EЕсли мне не изменяет память - Кармак сказал, что лучший способ [создания игр] — написать собственный движок ( \"The right move is to build your own engine\" ), на что многие возразят: это вовсе не так просто. Но папа Doom'a известен не только своим вкладом в разработку игровых движков, но и довольно часто высказывался критически о развитии игровых движков в целом, и о преимуществах создания собственных технологических решений вместо использования готовых. \u003C\u002Fp\u003E\u003Cp\u003EЭта философия, которой он придерживается на протяжении всей карьеры, была связана с тем, что собственный движок даёт разработчикам полный контроль над технологией и возможность создавать решения, заточенные под конкретные нужды их проектов.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F271\u002F9e6\u002F152\u002F2719e6152b24f96a617e88bc174ba39b.png","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F271\u002F9e6\u002F152\u002F2719e6152b24f96a617e88bc174ba39b.png","fit":"cover","positionY":0,"positionX":0}},"editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"598949","alias":"dalerank","fullname":"Sergei Kushnirenko","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fae5\u002Ff74\u002Fb00\u002Fae5f74b00f68105d98362bd11f263809.jpg","speciality":"Люблю (ш)кодить, алгоритмы и старые авто.","scoreStats":{"score":476,"votesCount":504},"rating":257.3,"relatedData":null,"contacts":[],"authorContacts":[],"paymentDetails":{"paymentYandexMoney":null,"paymentPayPalMe":"LZHWK2JCM8DQ2","paymentWebmoney":null},"donationsMethod":"wallets","isInBlacklist":null,"careerProfile":null},"statistics":{"commentsCount":5,"favoritesCount":32,"readingCount":2205,"score":14,"votesCount":11,"votesCountPlus":11,"votesCountMinus":0},"hubs":[{"id":"559","alias":"cpp","type":"collective","title":"C++","titleHtml":"C++","isProfiled":true,"relatedData":null},{"id":"359","alias":"programming","type":"collective","title":"Программирование","titleHtml":"Программирование","isProfiled":true,"relatedData":null},{"id":"7773","alias":"gamedev","type":"collective","title":"Разработка игр","titleHtml":"Разработка игр","isProfiled":true,"relatedData":null},{"id":"21980","alias":"games","type":"collective","title":"Игры и игровые консоли","titleHtml":"Игры и игровые консоли","isProfiled":false,"relatedData":null}],"flows":[{"id":"1","alias":"develop","title":"Разработка","titleHtml":"Разработка"},{"id":"7","alias":"popsci","title":"Научпоп","titleHtml":"Научпоп"}],"relatedData":{"vote":null,"unreadCommentsCount":0,"bookmarked":false,"canComment":false,"canEdit":false,"canViewVotes":false,"votePlus":{"canVote":false,"isChargeEnough":false,"isKarmaEnough":false,"isVotingOver":false,"isPublicationLimitEnough":false},"voteMinus":{"canVote":false,"isChargeEnough":false,"isKarmaEnough":false,"isVotingOver":false,"isPublicationLimitEnough":false},"canModerateComments":false,"trackerSubscribed":false,"emailSubscribed":false},"textHtml":"\u003Cdiv xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F271\u002F9e6\u002F152\u002F2719e6152b24f96a617e88bc174ba39b.png\" width=\"740\" height=\"380\" sizes=\"(max-width: 780px) 100vw, 50vw\" srcset=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw780\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F271\u002F9e6\u002F152\u002F2719e6152b24f96a617e88bc174ba39b.png 780w,&#10;       https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F271\u002F9e6\u002F152\u002F2719e6152b24f96a617e88bc174ba39b.png 781w\" loading=\"lazy\" decode=\"async\"\u002F\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EКогда деревья были большими, а игровые движки маленькими - выбора писать или не писать свой не стояло - если у тебя нет своего движка, фактически у тебя нет игры. Кто-то покупал чужой движок и наслаждался прекрасными велосипедами импортной сборки, в то время как другие пилили свое, на что уходили месяцы, если не годы.\u003C\u002Fp\u003E\u003Cp\u003EЭта серия статей родилась как заметки на полях к замечательной книге \u003Ccode\u003EGame Engine Architecture\u003C\u002Fcode\u003E, книга большая, объемная и охватывает все аспекты создания движка. Но там нет нюансов практической разработки. А чтобы видеть нюансы надо понимать не только теорию, все же GAE больше теория, но знать как работает код игры изнутри. Чтобы понимать как, и главное почему, используются выбранные механизмы внутри игры, чтобы видеть проблемы с производительностью и архитектурой, как их искать и как чинить, для этого придется понять как работают и как создавались игровые движки.\u003C\u002Fp\u003E\u003Cp\u003EЕсли мне не изменяет память - Кармак сказал, что лучший способ [создания игр] — написать собственный движок ( \"The right move is to build your own engine\" ), на что многие возразят: это вовсе не так просто. Но папа Doom'a известен не только своим вкладом в разработку игровых движков, но и довольно часто высказывался критически о развитии игровых движков в целом, и о преимуществах создания собственных технологических решений вместо использования готовых.\u003C\u002Fp\u003E\u003Cp\u003EЭта философия, которой он придерживается на протяжении всей карьеры, была связана с тем, что собственный движок даёт разработчикам полный контроль над технологией и возможность создавать решения, заточенные под конкретные нужды их проектов.\u003C\u002Fp\u003E\u003Chr\u002F\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Farticles\u002F873016\u002F\" rel=\"noopener noreferrer nofollow\"\u003EGame++. String interning\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Farticles\u002F873990\u002F\" rel=\"noopener noreferrer nofollow\"\u003EGame++. Cooking vectors\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Farticles\u002F876804\u002F\" rel=\"noopener noreferrer nofollow\"\u003EGame++. Dancing with allocators\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Farticles\u002F880918\u002F\" rel=\"noopener noreferrer nofollow\"\u003EGame++. Juggling STL algoritms\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Farticles\u002F882684\u002F\" rel=\"noopener noreferrer nofollow\"\u003EGame++. run, thread, run...\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Farticles\u002F885780\u002F\" rel=\"noopener noreferrer nofollow\"\u003EGame++. Building arcs\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Farticles\u002F891700\u002F\" rel=\"noopener noreferrer nofollow\"\u003EGame++. Unpacking containers\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Farticles\u002F896958\u002F\" rel=\"noopener noreferrer nofollow\"\u003EGame++. Heap? Less\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Farticles\u002F898930\u002F\" rel=\"noopener noreferrer nofollow\"\u003EGame++. Work hard\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Farticles\u002F903744\u002F\" rel=\"noopener noreferrer nofollow\"\u003EGame++. Patching patterns\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EGame++. while (!game(over)) &lt;=== Вы тут\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EGame++. Bonus. Performance traps\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EНо, знаете, каждый по-своему прав — универсального ответа нет, всё зависит от конкретной ситуации. Может быть, создание собственного движка не так уж и сложно, как кажется? Зачем вообще это делать? И что вообще значит «создать игровой движок»?\u003C\u002Fp\u003E\u003Cp\u003EЯ работал с разными игровыми движками, и сделал с нуля парочку своих, а еще два до них ушли в мусорную корзину. На первом(третьем) было шипнуто три коммерческих игры, но без особо успеха и в итоге он ушел одной питерской студии за бешенную толпу вечнозеленых енотов в количестве аж 70^2 - это было 15 лет назад. И видел, как разработчики используют другие движки,  как жалуются на них, как рассказывают о своих собственных решениях. Изучал исходный код других (открытых и не очень) движков. И думаю - есть кое-что сказать по этому вопросу, хотя, признаюсь, мой опыт может быть несколько предвзятым или однобоким, всегда хотел делать стратегии, но предлагали почему-то преимущественно шутеры.\u003C\u002Fp\u003E\u003Ch3\u003EПервый главный вопрос - зачем?\u003C\u002Fh3\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EВо первых, вторых и третьих - это очень весело, обещаю\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EВ четвертых - это опыт, за который многие компании готовы платить хорошие деньги.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EВы точно очень многому научитесь в процессе, что поможет вам лучше понимать другие движки, да и не только движки и, как следствие, поможет вам создавать игры в будущем, даже если вы выбросите свой собственный движок в мусорное ведро.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EКстати про мусорное ведро, первый и скорее всего второй движок уйдут именно туда, судя по моему опыту и опыту знакомых, не зря говорят про правило трех систем.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EСобственный игровой движок бесплатен настолько, насколько бесплатно ваше вечернее время — ничто не бывает по-настоящему бесплатным.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EДвижок можно оптимизировать под свои хотелки (или нужды конкретного проекта) с точки зрения производительности, времени итерации, архитектуры движка и многих других вещей. Я вот в какой-то момент захотел хот-релоад конфигов на JS, да странное желание, но пришлось выучить и JS и понять как всё работает под капотом VM. А потом мне надоели текстуры из паков и захотелось сделать батчинг текстур с диска в рантайме (динамический атлас). У меня странные желания.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EУ вас будет полный контроль над тем, как все работает внутри и какие технологии используются\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EМожно использовать свой любимый язык программирования - хотя, вероятно, игровые движки написаны пожалуй на всех возможных языках программирования этой планеты, видел даже на erlang - на коболе вот не видел, но думаю тоже где-то есть.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EМожно сделать очень маленький дистрибутив, бинарник Akhenaten.exe занимает около 2Мб, с учетом что часть ресурсов и скриптов упакованы прямо в него, графика конечно отдельно.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EВы скорее всего захотите сделать свой движок открытым и посмотреть, как его используют другие. Я не очень понимаю зачем скрывать именно код движка, движок - это не игра - но даже если отдать весь код репозитория(со всеми ресурсами, моделями, музыкой, скриптами и подробным описанием как собирать) на гитхаб, собрать его смогут 0.1% людей, от тех что скачали репо. Тех что осилили, можно позвать в студию в качестве разработчиков. Хм, а ведь Unreal провернул именно это, предлагая позиции в команде разработчиков отличившимся в комитах.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EВы даже можете продать свой движок, но имейте в виду, что поддержка движка под чужие хотелки — это отдельный уровень в аду\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EВы никогда не будете разочарованы из-за того, что разработчики движка не реализовали нужную функцию\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EНа техсобесах (проверено не одной студией) разговоры так или иначе приходят к обсуждению решений, которые вы делаете в своем движке, и вот уже вы задаёте вопросы, а как у вас? :)\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EДля меня важнее всего оказались первые два и последний пункт. Обучение — это весело, обучение и создание игры - весело в квадрате. А еще я просто обожаю программировать, делать то, что язык \"как-бы\" не позволяет, разбираться в алгоритмах и системах, ковыряться в сложных деталях и тонкостях языка. Ну а задушевные разговоры на собесах уже идут бонусом.\u003C\u002Fp\u003E\u003Cp\u003EЛюди жалуются на движки: то не работает, это ломалось, это новое не поддерживает вот то старое, а то старое просили добавить ещё десять лет назад, и до сих пор ничего не добавили. Конечно, у всего этого есть причины — если вы когда-нибудь работали в крупной компании, вы точно меня поймёте. Но всегда легче винить кого-то другого, чем себя. Если тебе так нужна эта функция возьми и напиши, разве нет? Нет, потому что это не твой движок. Движок чужой - а вот разочарование твоё. Это ожидаемо. Как ожидаемо что нужная фича в своем движке будет добавлена, когда она действительно понадобится. \u003C\u002Fp\u003E\u003Ch3\u003EВторой главный вопрос - а надо ли?\u003C\u002Fh3\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EСвой проект это всегда тяжело и требует много времени, реально много времени. Конечно, многое зависит от конечных целей, но не стоит ожидать, что вы за год напишете клон Unreal Engine, особенно учитывая что сам анриал пишут уже вот лет двадцать командой топовых инженеров, а сейчас еще и комьюнити.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EВ собственном движке постоянно будет чего-то не хватать. Нужно будет потратить долгие годы упорной работы, чтобы достичь хотя бы части функциональности и удобства использования, которыми обладают зрелые движки.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EВы никогда не сможете соперничать с крупными индустриальными движками вроде того же Unreal, Unity, СryEngine и даже Godot. Разве что вы — большая и богатая студия, но тогда эта статья вам, скорее всего, уже не особо нужна, потому у вас уже есть свой движок, или вы использутет что-то из вышеперечисленного.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EВ 99 случаев из 100 разработчики движка так никогда и не добираются до самой игры, если ставить целью разработать движок. Это прямой путь к выкидыванию проекта.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EБольшинство людей будут считать вас очень неумным человеком, просто за то, что вы тратите время чтобы делать свой движок.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EЛучше потратить время на доработку фичей и исправление багов того же Unreal, это даст больше опыта в плане Unreal и бонусы при устройстве в студии, которые его используют\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EЕсли вы дочитали, до этого пункта, значит я вас не убедил, что это неблагодарное занятие, тогда идем дальше...\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EТут надо понимать: затраты на разработку собственного движка никогда не окупятся, не будет такого момента, что со вчерашнего дня движок стал выходить по нулям. Нет, даже у топовых студий это убыточная статья. Деньги зарабатывают игры, движке - нет. Из отчета того-же Unreal, затраты на разработку движка за последние только четыре года соcтавили больше 160$ млн, фактически эпики каждый год делают новую AAA-игру, только мы этого не видим.\u003C\u002Fp\u003E\u003Cp\u003EНо написав хорошую основу, можно будет использовать её снова и снова, улучшая с каждой новой игрой. Если ваша цель — выпустить игру как можно быстрее, просто выберите готовый движок и используйте тот функционал, который там есть. Если же вы хотите расти как разработчик, обеспечить себе базу для будущих проектов, не только в игрострое, и у вас есть время, силы и терпение, — тогда дерзайте, свой движок это пожалуй лучшее применение знаний! \u003C\u002Fp\u003E\u003Cp\u003EТак стоит ли делать свой движок? Как минимум, стоит думать самому и не полагаться на мнение автора случайной статьи на Хабре.\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Faa0\u002Fea7\u002Facc\u002Faa0ea7accb8222bcb6031fb027f0c9a4.png\" width=\"669\" height=\"299\" sizes=\"(max-width: 780px) 100vw, 50vw\" srcset=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw780\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Faa0\u002Fea7\u002Facc\u002Faa0ea7accb8222bcb6031fb027f0c9a4.png 780w,&#10;       https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Faa0\u002Fea7\u002Facc\u002Faa0ea7accb8222bcb6031fb027f0c9a4.png 781w\" loading=\"lazy\" decode=\"async\"\u002F\u003E\u003C\u002Ffigure\u003E\u003Ch3\u003EЧто такое игровой движок?\u003C\u002Fh3\u003E\u003Cp\u003EЯвляется ли SDL\u002FSFML\u002FAllegro игровым движком, хотя на них сделаны бесчетное число инди игр? Точно нет — это библиотеки для обертки над платформенным кодом, хотя они умеют все что умеет базовый игровой движок. А Vulkan\u002FDX11? Точно нет - это графический API. А FMOD\u002FWWISE? Тоже нет — но они позволяют реализовать двух\u002Fтрехмерную сцену, правда звуковую.\u003C\u002Fp\u003E\u003Cp\u003EА теперь представьте себе маленький проект, который объединяет Allegro, Dx11 и stbi (библиотека для загрузки изображений разных форматов), чтобы рисовать на экране движущиеся спрайты. Будет ли это игровым движком? Тоже нет, хотя очень близко - игровой движок появляется, когда есть игра, или игры на нем сделанные. Пока игр нет, это всего лишь набор библиотек, как-то слепленных вместе через cmake.\u003C\u002Fp\u003E\u003Cp\u003EМожет быть, это просто сочетание графики, анимации и обработки пользовательского ввода?  Игровой движок без игры — это просто набор инструментов, библиотек и других компонентов, предназначенных для помощи в создании игр. Если вам показалось, что это определение расплывчатое, почти бесполезное — вам не показалось. \u003C\u002Fp\u003E\u003Cp\u003EЕсли вы делаете 2D платформер с пиксельной графикой, вам действительно нужны сложные редакторы материалов и километровые шейдеры, бесшовная геометрия  глобальное освещение для неё, 3D-физика с обратной кинематикой и поддержка сетевой игры? У анриала всё это есть и в неплохом качестве, но нужно ли всё это вам. А оно требует опыта, привыкания и умения настроить и пользоваться.\u003C\u002Fp\u003E\u003Cp\u003EВсё, что потребуется — это обрабатывать инпут, рендерить спрайты, возможно даже cырые png на экране и воспроизводить звук. Всё это пишется за пару дней по открытым гайдам на ютубе. И эти пара вечеров будут потрачены с пользой, и вот вы перешли к самому главному ради чего это всё затевалось, к созданию игры.\u003C\u002Fp\u003E\u003Cp\u003EА если вы хотите создать ААА-хит с топовой графикой, физикой и всем прочим? Тогда да, вам понадобятся все эти сложнейшие системы. И пара десятков свободных лет жизни, чтобы ежедневно работать только над движком и всё это реализовать - да, современные игровые движки безнадежно далеко ушли от ретро-платформера. \u003C\u002Fp\u003E\u003Ch3\u003EЧто умеет игровой движок?\u003C\u002Fh3\u003E\u003Cp\u003EПервое что хочу сказать - движок могет быть маленьким, конкретно под вашу игру. Но давайте будем честными - мы разбалованы возможностями больших движков и переносим эти ожидания и ждем того же поведения от всех других. Но если движок изначально заточен под какую-то одну игру мало фичей — это тоже нормально. Тем не менее большинство игровых движков будут уметь следующее:\u003C\u002Fp\u003E\u003Cdetails class=\"spoiler\"\u003E\u003Csummary\u003EКрутить игровой цикл и обрабатывать события\u003C\u002Fsummary\u003E\u003Cdiv class=\"spoiler__content\"\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003Eвизуальные редакторы уровней и UI\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eобновление логики\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eсистему сцен\u002Fуровней\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eменеджер сущностей (Entity Manager)\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eсистема сериализации состояния игры\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eоткат состояния (для тестирования и дебага)\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eинспектор переменных\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdetails\u003E\u003Cdetails class=\"spoiler\"\u003E\u003Csummary\u003EОбрабатывать инпут\u003C\u002Fsummary\u003E\u003Cdiv class=\"spoiler__content\"\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003Eклавиатура, мышь, контроллер, тач\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eподдержка мультиинпута (одновременные контроллеры, локальный кооп)\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eпереназначаемые клавиши и профили управления\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdetails\u003E\u003Cdetails class=\"spoiler\"\u003E\u003Csummary\u003EИскусственный интеллект\u003C\u002Fsummary\u003E\u003Cdiv class=\"spoiler__content\"\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003Eдебаггер AI и поведения\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eвстроенная система навигации, прокладку пути по карте\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eдинамическое обновление навмеша\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eсистему поведения (например, behavior trees или FSM)\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eperception (видимость, слух, агро)\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdetails\u003E\u003Cdetails class=\"spoiler\"\u003E\u003Csummary\u003EОбрабатывать физику: 2D или 3D\u003C\u002Fsummary\u003E\u003Cdiv class=\"spoiler__content\"\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003Eджойнты (соединения между объектами)\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eraycast (проверка линий на столкновение)\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eстолкновения и триггеры (коллайдеры)\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eдинамика (масса, силы, импульсы)\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdetails\u003E\u003Cdetails class=\"spoiler\"\u003E\u003Csummary\u003EЗагружать и управлять ресурсами\u003C\u002Fsummary\u003E\u003Cdiv class=\"spoiler__content\"\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003Eупаковка ресурсов в архивы\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eтекстуры, модели, звуки, скрипты, уровни\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eуметь загружать форматы (через библиотеки: \u003Ccode\u003Estb_image\u003C\u002Fcode\u003E, \u003Ccode\u003EAssimp\u003C\u002Fcode\u003E, \u003Ccode\u003EFMOD\u003C\u002Fcode\u003E)\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eкэшировать и повторно использовать данные\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eподдерживать hot-reload (перезагрузка на лету, без перезапуска игры)\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eследить за зависимостями (если шейдер использует текстуру — перезагружать вместе)\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eгенерации билдов под разные платформы\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eинспекторы объектов и компонентов\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eгорячую замену кода или данных (hot reload)\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eподдержку \"префабов\" — шаблонов объектов\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E поддерживать auto-update и патчи  \u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdetails\u003E\u003Cdetails class=\"spoiler\"\u003E\u003Csummary\u003EРендерить финальное изображение\u003C\u002Fsummary\u003E\u003Cdiv class=\"spoiler__content\"\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003Eпрофилировщики CPU\u002FGPU\u002Fпамяти\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eскелетная анимация\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eblend trees и анимационные слои,\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eабстракции над низкоуровневыми API (OpenGL, Vulkan, Direct3D, Metal)\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eподдержка камер, перспективы, освещения, теней, постобработки\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eвозможность отрисовать как 2D UI, так и 3D сцену\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eматериалы, шейдеры, LOD, batching, occlusion culling\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdetails\u003E\u003Cdetails class=\"spoiler\"\u003E\u003Csummary\u003EПоддерживать скриптовый язык или языки\u003C\u002Fsummary\u003E\u003Cdiv class=\"spoiler__content\"\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003Eписать поведение объектов на удобном языке (Lua, Python, GDScript)\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eне пересобирать игру при каждом изменении логики\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eреализовать hot-reload\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdetails\u003E\u003Cdetails class=\"spoiler\"\u003E\u003Csummary\u003EАудио\u003C\u002Fsummary\u003E\u003Cdiv class=\"spoiler__content\"\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EИграть медиа, звуки и эффекты\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eмногоканальный звук (музыка, эффекты, речь)\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eпозиционирования звука\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eэффекты (эхо, реверберация, фильтры)\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eмикширования (сведение звуков в финальный поток)\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eуправления громкостью по группам (музыка, UI, эффекты)\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eзагрузки форматов (через OpenAL, SDL_Audio, FMOD, Wwise)\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdetails\u003E\u003Cdetails class=\"spoiler\"\u003E\u003Csummary\u003EПользовательский интерфейс\u003C\u002Fsummary\u003E\u003Cdiv class=\"spoiler__content\"\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003Eкнопки,\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eслайдеры,\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eтекст,\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eсписки, вкладки, панели.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdetails\u003E\u003Cdetails class=\"spoiler\"\u003E\u003Csummary\u003EСеть\u003C\u002Fsummary\u003E\u003Cdiv class=\"spoiler__content\"\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003Eюнит-тесты для игровых систем\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eзапись и воспроизведение сессий\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eсокеты, UDP\u002FTCP\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eсинхронизация состояния игры (состояния объектов, действия игроков)\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eрепликация, интерполяция, предсказание\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Elobby-система, матчмейкинг, авторизация\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdetails\u003E\u003Cp\u003EНаличие архитектуры, которая объединяет все эти подсистемы в единое целое необязательно, пока необязательно, но надо понимать - ваш конкретный движок может содержать лишь часть из этого списка — и при этом оставаться игровым движком. Не каждой игре нужны все функции сразу - иначе бы ни одна инди-игра не увидела свет.\u003C\u002Fp\u003E\u003Ch3\u003EПрограммирование: нюансы\u003C\u002Fh3\u003E\u003Cp\u003EЭто может показаться странным, но для реализации игровой логики классическое программирование не является обязательным. Достаточно посмотреть на системы визуального программирования (Blueprints, VisualScript, ICS), которые существуют уже десятилетия и позволяют создавать сложные механики без написания самого кода. Это особенно популярно среди дизайнеров и художников, которые хотят быстро прототипировать идеи, не погружаясь в синтаксис языков программирования. \u003C\u002Fp\u003E\u003Cp\u003EИ да, дизайнеры тоже пишут код, визуальное программирование — это полноценный вид кодинга, просто слова \u003Ccode\u003Eclass, if, for\u003C\u002Fcode\u003E выглядят по другому. Однако суть не в терминах, а в практических аспектах. Реализация визуального скриптинга в движке требует создания специализированных инструментов: редакторов узлов, визуального же дебаггера, систем визуализации потоков данных, оптимизаторов и много чего еще. Это значительно усложняет разработку движка, например, в Unreal Engine за Blueprints стоит огромный объем низкоуровневого кода на C++, сравнимый с рендером или движком анимаций.\u003C\u002Fp\u003E\u003Cp\u003EКлассический код остаётся наиболее универсальным и гибким способом реализации логики, но все больше сдает свои позиции. Он не зависит от ограничений визуальных инструментов и позволяет работать на уровне системных ресурсов. Однако классический подход тянет за собой классические проблемы, вроде перекомпиляции, остановки движка для пересборки и потери времени на все эти операции, не говоря уже о том, что обучение дизайнеров разным языкам программирования вроде C++ оборачивается большими финансовыми и временными затратами, а цена ошибки та же, что и для игрового программиста - краш движка.\u003C\u002Fp\u003E\u003Cp\u003EПоэтому для встраиваемой логики используют скриптовые языки вроде Lua, Python, Js, Angel - особенно если движок написан на C++. Они намного более лояльны к ошибкам в рантайме и позволят сэкономить кучу времени. Даже если вы разрабатываете движок с нуля, проще заложить сразу возможность скриптования и использования возможностей, на котором написан сам движок — это снижает накладные расходы и упрощает интеграцию.\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003E... и мифы\u003C\u002Fstrong\u003E\u003Cbr\u002F\u003EСоздание движка всё равно требует программирования, здесь не будет коротких и легких путей. Какой язык выбрать? Честно, это не критично - лучший язык тот, который вы знаете, опытный разработчик критичные к производительности места сумеет оптимизировать намного лучше в своем языке и попутно избежит проблем новичков. Низкоуровневые языки вроде C++ дают прозрачность в управлении ресурсами, но и требуют качественно большего понимания архитектуры и теории разработки.\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003E\u003Cstrong\u003EC++\u003C\u002Fstrong\u003E — эталон в геймдеве благодаря производительности и контролю над памятью.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Cstrong\u003ERust\u003C\u002Fstrong\u003E — набирает популярность как безопасная альтернатива C++, но крупные студии пока обходят его стороной, ограничиваясь небольшими модулями от энтузиастов или в качестве экспериментов.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Cstrong\u003EC#\u003C\u002Fstrong\u003E — используется в Unity, и это является хорошим стимулом, чтобы другие начали смотреть на него с интересом, удобен благодаря .NET и богатым библиотекам.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Cstrong\u003EPython\u003C\u002Fstrong\u003E, \u003Cstrong\u003EJava и миллион других\u003C\u002Fstrong\u003E используют в качестве VM для прототипов - не все готовы учить плюсы, несмотря на их производительность.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Ch3\u003EMain window\u003C\u002Fh3\u003E\u003Cdetails class=\"spoiler\"\u003E\u003Csummary\u003EСкрытый текст\u003C\u002Fsummary\u003E\u003Cdiv class=\"spoiler__content\"\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EEABase is a small set of header files that define platform-independent data types \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Felectronicarts\u002FEABase\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Felectronicarts\u002FEABase\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EMinimal cross-platform standalone C headers  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Ffloooh\u002Fsokol\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Ffloooh\u002Fsokol\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Estb single-file public domain libraries for C\u002FC++  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fnothings\u002Fstb\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fnothings\u002Fstb\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EAbseil Common Libraries (C++)  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fabseil\u002Fabseil-cpp\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fabseil\u002Fabseil-cpp\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EA C++ Template library, developed by Andrei Alexandrescu  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fdutor\u002Floki\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fdutor\u002Floki\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EGeneric game loop implementation  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fggabriel96\u002Flasso\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fggabriel96\u002Flasso\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdetails\u003E\u003Cp\u003EБольшинство игр требуют окно для работы целиком. Даже браузерные игры здесь не исключение: окно может быть либо вся веб-страница целиком, либо конкретный элемент \u003Ccode\u003E&lt;canvas&gt;\u003C\u002Fcode\u003E, внутри которого исполняется игра. Создание окна обычно происходит через платформо-зависимые механизмы, эти низкоуровневые интерфейсы, как правило, выглядят громоздкими и неудобными, более того, для каждой платформы (Windows, Linux, macOS, iOS, Android) придётся писать отдельный код для создания окна - но пишутся один раз. И потом к ним уже никто не возвращается. \u003C\u002Fp\u003E\u003Cp\u003EПомимо окна, обычно присутствует контекст графического API (OpenGL, Vulkan, DirectX), который тоже создаётся через страшные платформо-зависимые вызовы. Но опять же написать их придется всего один раз, или взять готовую библиотеку, которая возьмет это всё это на себя. (SDL2, glfw, SFML или любую из одну тысяч других библиотек).\u003C\u002Fp\u003E\u003Cp\u003EПосле создания окна, следующим шагом будет организация \u003Ccode\u003Eигрового цикла \u003C\u002Fcode\u003E— именно он будет обрабатывать события, обновлять игровую логику и перерисовывать экран.\u003C\u002Fp\u003E\u003Ch3\u003EИгровой цикл\u003C\u002Fh3\u003E\u003Cdetails class=\"spoiler\"\u003E\u003Csummary\u003EНемного полезных ссылок\u003C\u002Fsummary\u003E\u003Cdiv class=\"spoiler__content\"\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EAnimated sprite editor &amp; pixel art tool  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002FLibreSprite\u002FLibreSprite\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002FLibreSprite\u002FLibreSprite\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003ESource code analyzer for large code bases  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fmyint\u002Fcppclean\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fmyint\u002Fcppclean\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EAddressSanitizer, ThreadSanitizer, MemorySanitizer  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fgoogle\u002Fsanitizers\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fgoogle\u002Fsanitizers\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EMemory debugging, memory leak detection, and profiling  \u003Cbr\u002F\u003E\u003Ca href=\"http:\u002F\u002Fvalgrind.org\u002F\" rel=\"noopener noreferrer nofollow\"\u003Ehttp:\u002F\u002Fvalgrind.org\u002F\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003ETool for static C\u002FC++ code analysis  \u003Cbr\u002F\u003E\u003Ca href=\"http:\u002F\u002Fcppcheck.sourceforge.net\u002F\" rel=\"noopener noreferrer nofollow\"\u003Ehttp:\u002F\u002Fcppcheck.sourceforge.net\u002F\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdetails\u003E\u003Cp\u003EВот что объединяет практически все игры и игровые движки, хотя сам цикл может быть довольно глубоко скрыт внутри движка, заменен на абстракции или колбеки. Но в конечном итоге код игрового цикла выглядит так:  \u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"cpp\"\u003Eint main()\n{\n    createWindow();\n    init();\n    while (isRunning())\n    {\n        handle(InputEvent());\n        updateFrame();\n        drawFrame();\n    }\n    shutdown();\n    destroyWindow();\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E\u003Cem\u003EИгровой цикл\u003C\u002Fem\u003E заставляет игру работать, без него функция \u003Ccode\u003Emain\u003C\u002Fcode\u003E просто завершилась бы, и игра закрылась. Существует множество способов представления цикла в API движка. Он может быть полностью явным, когда пользователь движка где-то в своей функции \u003Ccode\u003Emain\u003C\u002Fcode\u003E пишет \u003Ccode\u003Ewhile (engine::isRunning())\u003C\u002Fcode\u003E. \u003C\u002Fp\u003E\u003Cp\u003EОн может быть скрыт внутри движка, например, в какой-нибудь функции \u003Ccode\u003Eengine::run()\u003C\u002Fcode\u003E, которая, в свою очередь, вызывает некоторые функции, предоставляемые пользователем (колбеки). Что бы вы ни выбрали, вам все равно будет нужен игровой цикл.\u003C\u002Fp\u003E\u003Ch3\u003EОбработка ввода\u003C\u002Fh3\u003E\u003Cdetails class=\"spoiler\"\u003E\u003Csummary\u003EБазовые решения\u003C\u002Fsummary\u003E\u003Cdiv class=\"spoiler__content\"\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003ECross-platform library for gamepad input  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fmtwilliams\u002Flibgamepad\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fmtwilliams\u002Flibgamepad\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003ECross-platform C++ input library supporting gamepads, keyboard, mouse, touch  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fjkuhlmann\u002Fgainput\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fjkuhlmann\u002Fgainput\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003ECross-platform 2D game library   \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fjhasse\u002Fjngl\u002F\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fjhasse\u002Fjngl\u002F\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EKlayGE is a cross-platform game engine, plugin-based architecture  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fgongminmin\u002FKlayGE\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fgongminmin\u002FKlayGE\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003ECross-platform 2D game engine  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002FnCine\u002FnCine\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002FnCine\u002FnCine\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdetails\u003E\u003Cp\u003EПользовательский ввод — одна из базовых составляющих любой игры, даже если ему придется всего лишь тапать хомяка.\u003C\u002Fp\u003E\u003Cp\u003EНа самом базовом уровне ввод любой ввоод обрабатывается с помощью платформенно-зависимых API вроде WinAPI, X11, Cocoa, но работать ними неудобно: они не сложные, но очень уж многословные и требуют индивидуального кода для каждой поддерживаемой платформы. Но почти все эти API предоставляют возможность вытащить события в функцию вроде \u003Ccode\u003EpollEvents()\u003C\u002Fcode\u003E, с помощью которой уже можно последовательно получать события от пользователя.\u003C\u002Fp\u003E\u003Cp\u003EКогда приходит время интегрировать ввод в игровой движок, возможны разные подходы. Один из них — предоставить пользователю прямой доступ к системе событий. В этом случае разработчик игры сам запрашивает события через \u003Ccode\u003EpollEvent()\u003C\u002Fcode\u003E и сам решает, как их обрабатывать. \u003C\u002Fp\u003E\u003Cp\u003EБазовая структура обработки событий обычно выглядит так: в игровом цикле на каждой итерации вызывается функция обработки событий, где происходит последовательный разбор всех пришедших событий. В зависимости от типа события вызываются соответствующие функции или предпринимаются определённые действия — например, обработка движения мыши, нажатия клавиш или закрытия окна.\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"cpp\"\u003Ewhile (engine.isRunning()) {\n    Event event;\n    while (engine.pollEvent(event)) {\n        switch (event.type) {\n            case Event::MouseMove:\n                application.onMouseMove(event.mouseX, event.mouseY);\n                break;\n            case Event::KeyPressed:\n                application.onKeyPressed(event.keyCode);\n                break;\n            case Event::WindowClose:\n                engine.quit();\n                break;\n        }\n    }\n\n    engine.update(); \u002F\u002F Логика игры\n    engine.render(); \u002F\u002F Рендеринг кадра\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EТакой способ даёт максимальную гибкость, но требует от пользователя большего объёма кода и знания структуры событий.\u003C\u002Fp\u003E\u003Cp\u003EДругой вариант — встроить обработку событий внутрь движка и предоставить пользователю только колбэк-функции. Это делает начальную разработку проще и быстрее, однако требует продуманной архитектуры регистрации этих колбэков.\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"cpp\"\u003Evoid onMouseMove(MouseEvent event) {\n  application.onMouseMove(event.mouseX, event.mouseY);\n}\nvoid onKeyPressed(KbEvent event) {\n  application.onKeyPressed(event.keyCode);\n}\nvoid onWindowClose(AppCloseEvent ev) {\n   engine.quit();\n}\n\nint main() {\n  engine.subscribe(onMouseMove);\n  engine.subscribe(onKeyPressed);\n  engine.subscribe(onWindowClose);\n  while (engine.isRunning()) {\n      Event event;\n      updateFrame();\n  \n      engine.update(); \u002F\u002F Логика игры\n      engine.render(); \u002F\u002F Рендеринг кадра\n  }\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch3\u003EГрафика\u003C\u002Fh3\u003E\u003Cdetails class=\"spoiler\"\u003E\u003Csummary\u003ESDK\u003C\u002Fsummary\u003E\u003Cdiv class=\"spoiler__content\"\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EUniversal Scene Description\u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002FPixarAnimationStudios\u002FUSD\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002FPixarAnimationStudios\u002FUSD\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EAn open source render engine  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fkimkulling\u002Fosre\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fkimkulling\u002Fosre\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EA vector graphics renderer for bgfx  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fjdryg\u002Fvg-renderer\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fjdryg\u002Fvg-renderer\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003ELightweight and modular C++11\u002FC++14 graphics middleware  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fmosra\u002Fmagnum\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fmosra\u002Fmagnum\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EOpenGL C++ Graphics Engine  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002FJoeyDeVries\u002FCell\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002FJoeyDeVries\u002FCell\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003ESimple and Fast Multimedia Library  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002FSFML\u002FSFML\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002FSFML\u002FSFML\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EVulkan SDK  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002FARM-software\u002Fvulkan-sdk\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002FARM-software\u002Fvulkan-sdk\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EHigh level vulkan 2D vector-like graphics api  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fnyorain\u002Frvg\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fnyorain\u002Frvg\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EDirectX Graphics samples  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fmicrosoft\u002FDirectX-Graphics-Samples\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fmicrosoft\u002FDirectX-Graphics-Samples\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003ERendering base for animation and visual effects  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fappleseedhq\u002Fappleseed\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fappleseedhq\u002Fappleseed\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EA fully featured, open source, MIT licensed, game engine  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fgodotengine\u002Fgodot\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fgodotengine\u002Fgodot\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdetails\u003E\u003Cp\u003EОкно у нас уже есть. Мы даже умеем как-то реагировать на мышку и клавиатуру. Но… показать эту реакцию мы пока не можем. Пора заняться графикой. Честно, мне 3D всегда давалось трудом, всегда завидовал своему товарищу @megai2, который с легкостью пишет рендеры под что угодно, от плойки до мобилок.\u003C\u002Fp\u003E\u003Cp\u003EБольшинство библиотек для создания окон, таких как SDL2, уже содержат поддержку 2D-графики — можно рисовать прямо в окне, можно текстурами, можно вручную заливая пиксели любимыми цветами. Примитивно, но честно.\u003C\u002Fp\u003E\u003Cp\u003EДопустим, движок заточен под 2D-игры с тайлами и спрайтами. Тогда, скорее всего, придется реализовать что-то вроде \u003Ccode\u003EdrawSprite(image, x, y)\u003C\u002Fcode\u003E. Возможно, с поддержкой всяких приятностей: масштабирование, вращение, наложение цвета, обесцвечивание, альфа-блендинг. Внутри это может быть реализовано вручную — прямым копированием пикселей с какими-то расчётами и блиттингом. А может — через другую библиотеку вроде cairo, которая внутри оказывается очень даже неплохо уровня рендером, способным если не на всё, то очень на многое. Или через OpenGL\u002FDx\u002FVulkan, если душа просит хардкора и скоростей.\u003C\u002Fp\u003E\u003Cp\u003EА можно вообще не специализироваться, и просто дать пользователю движка в руки универсальные обёртки, как это делают большинство библиотек SDL\u002FSFML\u002FAllegro — пускай сам ковыряется. В моей реализации для Фараона есть обёртка над SDL2 (которая умеет в нативные GAPI), но полноценного рендерера в привычном смысле нет. Для каждого движка я писал собственноую систему отрисовки заново. С одной стороны, это было больно. С другой можно экспериментировать с графикой. Как бы ни была построена система отрисовки - рано или поздно, понадобится рендерить текст. Для интерфейса, отладочной информации и прочего. Можно, конечно, отрисовывать буквы вручную пикселями, но лучше взять нормальную библиотеку для работы со шрифтами — например, FreeType. Для мазохистов и любителей юникода — harfbuzz. Только не надо писать свой парсер шрифтов - этот путь ведёт к боли.\u003C\u002Fp\u003E\u003Ch3\u003EAccеты\u003C\u002Fh3\u003E\u003Cdetails class=\"spoiler\"\u003E\u003Csummary\u003EРесурсы\u003C\u002Fsummary\u003E\u003Cdiv class=\"spoiler__content\"\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EASTC texture decompression in C++  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Frichgel999\u002Fastc_dec\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Frichgel999\u002Fastc_dec\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EDynamic texture atlas\u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fseptag\u002Fatlasc\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fseptag\u002Fatlasc\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003ETexture Packer for Game Development Using MaxRects Algorithm  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fhuxingyi\u002Fsqueezer\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fhuxingyi\u002Fsqueezer\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EImage loading library  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Frampantpixels\u002Fimage_lib\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Frampantpixels\u002Fimage_lib\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EFast PNG encoder and decoder   \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flvandeve\u002Flodepng\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Flvandeve\u002Flodepng\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdetails\u003E\u003Cp\u003EРесурсы — это всё, что оживляет будущую игру: спрайты, конфиги, скрипты, текстуры, звуковые файлы, 3D-модели, уровни, аишка и прочие куски контента, без которых вся ваша великая система рендеринга и физики — просто дорогая поделка на гитхабе.\u003C\u002Fp\u003E\u003Cp\u003EКак их хранить и загружать? Ну… способов, как обычно, миллион.\u003C\u002Fp\u003E\u003Cp\u003EМожно, например, скомпилировать все ресурсы в один большой бинарный blob и запечь внутрь исполняемого файла, так делали и делают многие игры. Так делал андроид и iOS поначалу. Преимущества? Всё рядом, всё быстро — никаких «подгрузок», никаких путей к файлам - просто достаешь массив байт и работаешь с ним, как с ресурсом. Иногда это спасало в разных проектах, по-настоящему спасало, и позволяло пройти сертификацию для сони или моек — а что бинарник 700 мегабайт, так это всё кот виноват и джуны погромисты, понаписали шаблонов.\u003C\u002Fp\u003E\u003Cp\u003EНо, конечно, есть и минусы. Не получится изменить ни один ассет, не перекомпилировав всю игру. Даже если просто хочется поменять цвет пикселя в текстуре — жди билд. А ещё это делает моддинг практически невозможным. Как игроки будут вставлять свои кастомные шляпы, если весь контент запаян в \u003Ccode\u003E.exe\u003C\u002Fcode\u003E? \u003C\u002Fp\u003E\u003Cp\u003EМожно хранить ресурсы как обычные файлы в папке \u003Ccode\u003Eassets\u002F\u003C\u002Fcode\u003E рядом с исполняемым файлом. Тогда движок просто загружает нужный файл при запуске уровня если мы заранее не озаботились перфомансом. Такой метод — идеален для разработки: быстро, прозрачно, можно в любой момент зайти в папку, заменить текстуру и увидеть изменения в игре. А ещё — настоящий подарок для моддеров: бери, меняй, добавляй — всё открыто. \u003C\u002Fp\u003E\u003Cp\u003EМожно пойти дальше и упаковать все ассеты в архив. Это может быть обычный ZIP (и тогда тебе пригодится zlib), или самодельный формат, заточенный под особенности движка. Большие коммерческие движки, кстати, обычно идут именно по этому пути. Архивы удобно грузить, удобно кешировать, и никто не лазит туда с руками… кроме тех, кто очень хочет. Тут на помощь приходят VFS (Virtual File System) или архивы, которые понимают что где лежит, и как его оттуда взять.\u003C\u002Fp\u003E\u003Cp\u003EКак бы в итоге не хранились ассеты, их нужно ещё \u003Cem\u003Eкак-то\u003C\u002Fem\u003E превратить из сырых байтов в осмысленные данные. Тут понадобятся форматные библиотеки, \u003Ccode\u003Estb_image\u003C\u002Fcode\u003E — чтобы превратить PNG в массив пикселей. Или разные\u003Ccode\u003EJSON\u003C\u002Fcode\u003E — чтобы вытащить информацию о сущностях из json подбных конфигов, если вы ещё не разочаровались в JSON как формате для конфигов. В какой-то момент в команде приходит понимание, что чисто декларативный формат конфигов не покрывает все кейсы, и тогда в движок приходят VM (Virtual Machine) для js\u002Flua\u002Fsquirrel\u002Fanglelscript, которые вроде как скриптовые языки, но используются для парсинга конфигов, ну или изобретается собственный формат, который тоже в итоге приходит к VM стайл виду.\u003C\u002Fp\u003E\u003Cp\u003EА ещё можно, я бы сказал нужно вторым шагом после конфигов, сделать поддержку \u003Cem\u003Eгорячей перезагрузки ассетов\u003C\u002Fem\u003E, чтобы не перезапускать игру тысячу раз в день. То есть меняешь картинку, звук или конфиг — и хоп, всё это уже подхватилось прямо в игре. Магия? Нет, просто ещё одна причина, почему ресурсный менеджер вырастает в чудовище, от которого страдают весь остальной движок.\u003C\u002Fp\u003E\u003Ch3\u003EАудио\u003C\u002Fh3\u003E\u003Cdetails class=\"spoiler\"\u003E\u003Csummary\u003ESound&amp;Fx\u003C\u002Fsummary\u003E\u003Cdiv class=\"spoiler__content\"\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EPortable audio engine for games  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fjarikomppa\u002Fsoloud\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fjarikomppa\u002Fsoloud\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EC++ graph-based audio engine  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002FLabSound\u002FLabSound\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002FLabSound\u002FLabSound\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EMP3 decoder single header library  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flieff\u002Fminimp3\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Flieff\u002Fminimp3\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EPortable speech synthesis system  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Ffestvox\u002Fflite\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Ffestvox\u002Fflite\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EFx sounds generator  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fraysan5\u002Frfxgen\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fraysan5\u002Frfxgen\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdetails\u003E\u003Cp\u003EВывод звука — это, как вы уже догадались, ад на платформенно-зависимых API. Уродливые, неинтуитивные, капризные, XBox вообще любит плеваться исключениями если запишешь лишнее в буфер, а... впрочем если положишь меньше чем выделил памяти под буфер, тоже будет плеваться. Я не настоящий сварщик, т.е. не аудио программер, но и малой доли приключений хватило понять - хочешь просто воспроизвести звук — приготовься страдать. Или… можно взять библиотеку, которая спрячет весь этот кошмар за нормальным интерфейсом. Например, \u003Ccode\u003EOpenAL \u003C\u002Fcode\u003Eили \u003Ccode\u003ESDL2\u003C\u002Fcode\u003E. Последнее время я использую вторую, потому что, она очень лояльна к ошибкам, даже если делаешь что-то совсем не так.\u003C\u002Fp\u003E\u003Cp\u003EЭти библиотеки обычно ожидают от движка так называемый \u003Cem\u003Eаудио-колбэк\u003C\u002Fem\u003E — функцию, которую будет вызывать система (обычно из отдельного потока) десятки или даже сотни раз в секунду. Каждый вызов — надо вернуть немного аудиоданных - всё остальное — твоя забота. Хочешь — крути головой в тишине. Хочешь — проигрывай один единственный MP3 на фоне. Но, скорее всего, нужно будет «немножко больше»: музыка, эффекты, голос, всё в разных потоках, с разной громкостью, с плавным затуханием, без щелчков, без дрожания, с эффектами реверберации… ну вы поняли.\u003C\u002Fp\u003E\u003Cp\u003EЧтобы всё это заработало как надо — нужен микшер. Не человек, конечно (хотя иногда и это бы не помешало), а аудиомикшер — библиотека, которая будет сводить многочисленные звуковые потоки в один, аккуратно контролировать их громкость, фильтровать резкие пики, добавлять эффекты и не давать звуку превратиться в кашу, если всё проигрывается одновременно. Особенно если у тебя в игре внезапно начинается бой, где 15 звуков разных юнитов, фанфары и тревожная музыка.\u003C\u002Fp\u003E\u003Cp\u003EХороший движок обычно реализует собственный аудиомикшер. Он бывает большой и сложный, со сведением и реверберацией, эффектами и постполлингом или простой на четыре канала и фоновую музыку, но суть одна - микшер работает с абстрактными звуковыми потоками, позволяет комбинировать их как угодно, и на выходе получать один финальный стрим, который уже подаётся на аудиовывод. Наверное один раз стоит попробовать написать свой собственный, чтобы понимать как он работает. А можно поискать библиотеку, которая уже всё это делает — микширует, балансирует, сжимает. Их, наверное, сотни… но, если честно, я особо не искал. Написал свой в итоге поверх SDL2. Зато теперь знаю, как работает каждая щелчкающая дрянь в наушниках.\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F5bd\u002Ff69\u002Fc2e\u002F5bdf69c2e99ebc6f8de3884a64b7000b.png\" width=\"600\" height=\"300\" sizes=\"(max-width: 780px) 100vw, 50vw\" srcset=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw780\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F5bd\u002Ff69\u002Fc2e\u002F5bdf69c2e99ebc6f8de3884a64b7000b.png 780w,&#10;       https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F5bd\u002Ff69\u002Fc2e\u002F5bdf69c2e99ebc6f8de3884a64b7000b.png 781w\" loading=\"lazy\" decode=\"async\"\u002F\u003E\u003C\u002Ffigure\u003E\u003Ch3\u003EФизика\u003C\u002Fh3\u003E\u003Cdetails class=\"spoiler\"\u003E\u003Csummary\u003EХорошие решения\u003C\u002Fsummary\u003E\u003Cdiv class=\"spoiler__content\"\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EBox2D is a 2D physics engine for games\u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Ferincatto\u002FBox2D\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Ferincatto\u002FBox2D\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E2D physics engine for games  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fgoogle\u002Fliquidfun\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fgoogle\u002Fliquidfun\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003ENewton Dynamics - real time simulation of physics environment\u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002FMADEAPPS\u002Fnewton-dynamics\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002FMADEAPPS\u002Fnewton-dynamics\u003C\u002Fa\u003E  \u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EFluid simulation engine  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fdoyubkim\u002Ffluid-engine-dev\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fdoyubkim\u002Ffluid-engine-dev\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EInvk - Inverse Kinematics Library\u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Framakarl\u002Finvk\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Framakarl\u002Finvk\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdetails\u003E\u003Cp\u003EЕсли честно… большинству игр физика вообще не нужна. Вот прям настоящая физика — с силами, импульсами, трением и всем этим академическим багажом. Большинству нужно нечто попроще: анимации, логика, скрипты — то, что создаёт \u003Cem\u003Eвпечатление\u003C\u002Fem\u003E физики, не имея к ней почти никакого отношения.\u003C\u002Fp\u003E\u003Cp\u003EВот, например, шестая цива — одна из самых сложных стратегий современности. Но физика там не нужна. Совсем. Или разные ситибилдеры — банально, но дома не падают, дороги не трескаются, и никто не просчитывает вектор падения водонапорной башни. Просто потому, что оно не нужно. Зачем усложнять? Но и Цива, и Cities Skylines зачем-то тащут зависимости на PhysX, а возможно не просто тащут, но и как-то его используют.\u003C\u002Fp\u003E\u003Cp\u003EПлатформер или 2D-RPG сверху — вся \"физика\" обычно ограничивается перемещением персонажа и простыми столкновениями со стенами, врагами и ящиками. Это пишется за пару вечеров, если ты, конечно, не залипаешь на каждую строчку, как это делал я пытаясь разобраться. Главное — всё будет под твоим контролем: хочешь, чтобы герой скользил как по льду — пожалуйста. Хочешь, чтобы враги отскакивали нелепо, как резиновые утки — вперёд. \u003C\u002Fp\u003E\u003Cp\u003EА если у тебя \u003Cem\u003Eслишком много\u003C\u002Fem\u003E столкновений и всё начинает тормозить — можно оптимизировать. Пространственное хеширование, квадродеревья, и ограничение по дальности от ГГ. Но… если вы всё же упрямы и точно знаете, что потребуется \u003Cem\u003Eреальная\u003C\u002Fem\u003E физика — берите готовую библиотеку: Box2D для 2D или Bullet для 3D. Не изобретайте велосипед, их и так будет предостаточно в самописном движке. \u003C\u002Fp\u003E\u003Cp\u003EА когда понадобиться разобраться в том, как такие движки работают под капотом — лучше посмотреть на ютубе видео от\u003Cstrong\u003E \u003C\u002Fstrong\u003Eавтора Box2D. Он очень подробно рассказывает, как работает физика с ограничениями через импульсы и вообще даёт редкий взгляд изнутри.\u003C\u002Fp\u003E\u003Cp\u003EКогда-то я думал, что физика — это про массу, скорость и формулы. Теперь я знаю, что настоящая физика — это когда в 3 часа ночи пытаешься понять, почему персонаж застревает в лестнице, у который не прогрузился колижен-меш.\u003C\u002Fp\u003E\u003Ch3\u003EСкрипты и Конфиги\u003C\u002Fh3\u003E\u003Cdetails class=\"spoiler\"\u003E\u003Csummary\u003EКонфиги\u003C\u002Fsummary\u003E\u003Cdiv class=\"spoiler__content\"\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003ESimple .INI file parser in C, good for embedded systems\u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fbenhoyt\u002Finih\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fbenhoyt\u002Finih\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EHeader-file-only, JSON parser serializer in C++\u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fkazuho\u002Fpicojson\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fkazuho\u002Fpicojson\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EJsmn is a world fastest JSON parser\u002Ftokenizer\u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fzserge\u002Fjsmn\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fzserge\u002Fjsmn\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EMesh loader for OBJ, glTF2 and PLY  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fjing-interactive\u002Fmelo\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fjing-interactive\u002Fmelo\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EC++ Library for reading and writing FBX files\u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fjskorepa\u002Ffbx\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fjskorepa\u002Ffbx\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EA C++ library for reading, writing, and analyzing CSV\u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fvincentlaucsb\u002Fcsv-parser\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fvincentlaucsb\u002Fcsv-parser\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EC++ SVG library  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fsvgpp\u002Fsvgpp\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fsvgpp\u002Fsvgpp\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EA YAML parser and emitter in C++  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fjbeder\u002Fyaml-cpp\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fjbeder\u002Fyaml-cpp\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003ELight-weight, simple and fast XML parser for C++  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fzeux\u002Fpugixml\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fzeux\u002Fpugixml\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdetails\u003E\u003Cdetails class=\"spoiler\"\u003E\u003Csummary\u003EСкрипты\u003C\u002Fsummary\u003E\u003Cdiv class=\"spoiler__content\"\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EEmbedded Scripting Language Designed for C++  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002FChaiScript\u002FChaiScript\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002FChaiScript\u002FChaiScript\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EHigher level programming in C  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Forangeduck\u002FCello\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Forangeduck\u002FCello\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003ELua 5.3.4 re-written in C++ 17  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002FRseding91\u002FLuaPlusPlus\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002FRseding91\u002FLuaPlusPlus\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EA simple Python 2.7 interpreter, with predictable memory management  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fshooshx\u002Fzippypy\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fshooshx\u002Fzippypy\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EEmbedded JavaScript engine for C\u002FC++\u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fcesanta\u002Fmjs\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fcesanta\u002Fmjs\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EMuJS lightweight Javascript interpreter designed for embedding   \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fdalerank\u002FAkhenaten\u002Ftree\u002Fmaster\u002Fext\u002Fmujs\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fdalerank\u002FAkhenaten\u002Ftree\u002Fmaster\u002Fext\u002Fmujs\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EThe official mirror of the V8 Git repository\u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fv8\u002Fv8\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fv8\u002Fv8\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Edaslang - high-performance statically strong typed scripting language\u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002FGaijinEntertainment\u002FdaScript\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002FGaijinEntertainment\u002FdaScript\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EProgramming language Squirrel\u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Falbertodemichelis\u002Fsquirrel\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Falbertodemichelis\u002Fsquirrel\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EAngelScript is a game-oriented interpreted\u002Fcompiled scripting language  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fwww.angelcode.com\u002Fangelscript\u002F\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fwww.angelcode.com\u002Fangelscript\u002F\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdetails\u003E\u003Cp\u003EКажется, звучит модно и удобно. На деле — ещё один язык, ещё один слой отладки, еще один набор инструментов для дебага и ещё одна причина, по которой в 3 ночи приходится лезть pintfaми в лог. \u003C\u002Fp\u003E\u003Cp\u003EЧто это такое вообще? По сути, это часть логики игры, которая написана не на языке движка (например, C++), а на другом, более лёгком, часто интерпретируемом. Lua, Python, GDScript, Angelscript, JavaScript — выбирай любой сахар.\u003C\u002Fp\u003E\u003Cp\u003E\u003Cem\u003E... это не про производительность и не про FPS\u003C\u002Fem\u003E\u003Cbr\u002F\u003EЭто про количество фич, которые дизайнер успевает запилить за вечер. На низкоуровневом языке вроде C++ каждая строчка — как поход в гору. Да, мощно, точно, но тяжело и надо перекомпилить игру. \u003C\u002Fp\u003E\u003Cp\u003E\u003Cem\u003E... это про удобство и скорость разработки\u003C\u002Fem\u003E\u003Cbr\u002F\u003EВ скриптах как будто на велосипеде: нестрашно, быстро, весело и удобно. В Lua, например, можно  минут за пятнадцать накатать новый паттерн поведения врага и сразу же увидеть результат. Без компиляции, без перезапуска. Это бесценно, особенно когда тебя торопит геймдизайнер или ты сам — перед показом начальству.\u003C\u002Fp\u003E\u003Cp\u003E\u003Cem\u003E... на удивление, это про безопасность\u003C\u002Fem\u003E\u003Cbr\u002F\u003EСкрипты обычно запускаются в изолированной среде. Это значит, что если моддер написал что-то странное — он сломает только свою миссию, а не всю игру. Можно ограничить доступ скриптам: дать им возможность работать только с теми объектами, которые тебе нужны. Настроить лимиты, интерпретировать исключения, и в крайнем случае — просто не запускать подозрительное. В плюсах такой гибкости не получишь. Там любой кривой плагин — это потенциальный краш.\u003C\u002Fp\u003E\u003Cp\u003E\u003Cem\u003E... это про реконфигурабельность проекта в целом\u003C\u002Fem\u003E\u003Cbr\u002F\u003EЕсли тебе хоть раз приходилось пересобирать проект из-за изменения одного AI-параметра, поздравляю - вы не подумали про конфигурабельность, хардкод редко когда бывает добром. Хот-релоад — это возможность менять код \u003Cem\u003Eво время игры\u003C\u002Fem\u003E. Добавил условие — нажал «сохранить» — и оно уже работает, даже если игра идёт,  даже на третьей миссии. Компиляторы до сих пор на это полностью не способны (ну, почти не способны), а интерпретаторы скриптов — сделают всё в лучшем виде, но см п1.\u003C\u002Fp\u003E\u003Cp\u003E\u003Cem\u003E... это дверь для комьюнити\u003C\u002Fem\u003E\u003Cbr\u002F\u003EДверь в движок. Неважно какого размера движок или игра - если вы хочите, чтобы сообщество добавляло новые миссии, врагов, диалоги, мини-игры и даже сломанные экономические симуляции — нужно дать им простой и безопасный способ это делать. Lua, Python — это знакомые языки, на них пишут школьники, студенты, энтузиасты. C++? Даже не думайте. Никто не будет разбираться с билд-сервером и версиями компилятора. Да и вряд ли захочется потом читать багрепорты от человека, который «просто заменил переменную в header-файле».  \u003C\u002Fp\u003E\u003Cp\u003E\u003Cem\u003E... это - всем не угодишь\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003Elua — де-факто стандарт. Маленький, быстрый, встроить — 5 минут. Документации — море. Очень хорошо параллелится и идеально работает в однопотоке.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Epython — шикарен, но тяжело встроить. Инициализация интерпретатора — тот ещё квест. И да, GIL, поэтому многие меняют на lua.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Ejs — embedded версии хорошо себя зарекомендовали и по объему памяти и по скорости работы\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EGDScript — только если ты Godot.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EAngelScript, Wren, Squirrel, emc — относильное нишевые, выйди они немного раньше lua, стали бы ему отличной заменой, а так - что-то между C и Lua.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003E\u003Cem\u003E... плюс - это два минуса, иногда больше\u003C\u002Fem\u003E\u003Cbr\u002F\u003E\u003Ccode\u003E\u003Cem\u003EОтладка — боль\u003C\u002Fem\u003E\u003C\u002Fcode\u003E\u003Cstrong\u003E.\u003C\u002Fstrong\u003E Отладчик придется писать самому, точнее собирать из граблей и слёз.\u003Cbr\u002F\u003E\u003Ccode\u003E\u003Cem\u003EПроизводительность (см п1)\u003C\u002Fem\u003E\u003C\u002Fcode\u003E\u003Cstrong\u003E - \u003C\u002Fstrong\u003Eскрипты медленнее. Иногда намного. Иногда — настолько, что начинается переписывание логики обратно в C++.\u003Cbr\u002F\u003E\u003Ccode\u003E\u003Cem\u003EМост между языками\u003C\u002Fem\u003E\u003C\u002Fcode\u003E\u003Cstrong\u003E.\u003C\u002Fstrong\u003E Это та самая прослойка, где пишутся binding'и и обертки. Где типы начинают путаться. Где строки становятся \u003Ccode\u003Echar*\u003C\u002Fcode\u003E, \u003Ccode\u003Estd::string\u003C\u002Fcode\u003E, \u003Ccode\u003Econst char*\u003C\u002Fcode\u003E, \u003Ccode\u003ELuaStringView\u003C\u002Fcode\u003E и всё это \u003Cem\u003Eодновременно\u003C\u002Fem\u003E.\u003Cbr\u002F\u003E\u003Ccode\u003E\u003Cem\u003EНепредсказуемость\u003C\u002Fem\u003E\u003C\u002Fcode\u003E\u003Cstrong\u003E.\u003C\u002Fstrong\u003E Скрипт может написать кто угодно. И написать что угодно. Включая бесконечный цикл или \u003Ccode\u003Eenemy.hp = -9000\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\u003Cp\u003E\u003Cem\u003E... чаще — спасение. иногдае — головная боль. \u003C\u002Fem\u003E\u003Cbr\u002F\u003EИногда — катализатор новых идей и хаоса. Подходят не всем, не всегда, и не везде. Но если всё сделать правильно — можно будет править логику игры \u003Cem\u003Eво время игры\u003C\u002Fem\u003E, без перекомпиляции, без перезапуска, без лишних часов ожидания.\u003C\u002Fp\u003E\u003Ch4\u003EСеть (Networking)\u003C\u002Fh4\u003E\u003Cdetails class=\"spoiler\"\u003E\u003Csummary\u003EТут мало\u003C\u002Fsummary\u003E\u003Cdiv class=\"spoiler__content\"\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EA C++ header-only HTTP\u002FHTTPS server and client library  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fyhirose\u002Fcpp-httplib\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fyhirose\u002Fcpp-httplib\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Ehttp request\u002Fresponse parser for c  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fnodejs\u002Fhttp-parser\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fnodejs\u002Fhttp-parser\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EFast C++ web framework  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fipkn\u002Fcrow\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fipkn\u002Fcrow\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdetails\u003E\u003Cp\u003EИногда все мечтают об этом. Синхронные миры, кооператив, PvP, MMO, или хотя бы чат между игроками. А потом открываешь Wireshark и начинаешь мечтать только об одном — чтобы всё это просто заработало.\u003C\u002Fp\u003E\u003Cp\u003EНачнём с хорошего: возможно, для твоей игры это вообще не нужно. Если делаешь оффлайн-игру, пазл, платформер, какой-нибудь \"SimTower с жабами\" — можно забыть про сеть. Но если тебе взбрело в голову \"сделать мультиплеер\" — готовься. Вы сейчас вступаете на тропу боли, где \u003Cem\u003Eвсё\u003C\u002Fem\u003E зависит от деталей. Никакой универсальной архитектуры не существует. \u003C\u002Fp\u003E\u003Cp\u003EВ современных языках (C#, Rust, Go) — уже будут неплохие абстракции для работы с сокетами. Асинхронные вызовы, удобные корутины и всё такое. В C++ (мои соболезнования) — скорее всего, придется использовать что-то сторонее вроде \u003Cstrong\u003ERakNet\u002FEnet\u003C\u002Fstrong\u003E, не супер современные, но надежные и зарекомендовавшие себя временем и тучей проектов библиотеки. Но будем честны: сокеты — это только \u003Cem\u003Eначало\u003C\u002Fem\u003E. Подключиться к серверу — это 1% работы. Дальше начинается самое весёлое. Что вообще такое \"сетевой движок\"? Хороший вопрос. Я сам им задавался, когда писал первый кооперативный прототип. Ответа так и не нашёл:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003Eсинхронизация состояний между игроками\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eпредсказание ввода и откат (rollback netcode)\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eинтерполяция, экстраполяция, сглаживание\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eраспределение ролей (серверный авторитет, клиентские копии и пр.)\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eработа с задержками, пакеты, потери, порядок доставки\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eбезопасный протокол общения\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eшифрование (параноиками просто так не становятся)\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EЗвучит сложно? Так и есть. А ещё нужно:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EСервер (headless версия игры? AWS? самописный?)\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EАвторизация\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EРепликация объектов (твой \u003Ccode\u003EUnit\u003C\u002Fcode\u003Eна сервере и на клиенте — это не один и тот же объект!)\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EЛоггирование всего происходящего (иначе как потом отловишь баг, когда у игрока внезапно оказался юнит не того типа?)\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EЧитеры, отдельная история - не побеждены и не сломлены\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EДостаточно давно, на волне хайпа по второй контре я написал пару мультиплеерных прототипов. С друзьями. Для фана, на Irrlicht. Они почти работали. До первого фрейма, когда инстанс один друг начал двигаться без реальных ивентов, а второй — висел в это время в стене. Тогда я понял: делать надёжный, отзывчивый и гибкий мультиплеер — это \u003Cem\u003Eотдельная профессия\u003C\u002Fem\u003E. Если хотите это сделать в одиночку — понадобятся не только знания, но и чем отбиваться от санитаров.\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fb33\u002F1db\u002F317\u002Fb331db317dc39d2f8d5d1f46b1538a78.png\" width=\"738\" height=\"416\" sizes=\"(max-width: 780px) 100vw, 50vw\" srcset=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw780\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fb33\u002F1db\u002F317\u002Fb331db317dc39d2f8d5d1f46b1538a78.png 780w,&#10;       https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fb33\u002F1db\u002F317\u002Fb331db317dc39d2f8d5d1f46b1538a78.png 781w\" loading=\"lazy\" decode=\"async\"\u002F\u003E\u003C\u002Ffigure\u003E\u003Ch4\u003EИскусственный интеллект (AI)\u003C\u002Fh4\u003E\u003Cdetails class=\"spoiler\"\u003E\u003Csummary\u003EБазовые решения\u003C\u002Fsummary\u003E\u003Cdiv class=\"spoiler__content\"\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EProcedural world generator  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Frlguy\u002FFantasyMapGenerator\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Frlguy\u002FFantasyMapGenerator\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EEntity-component system\u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fskypjack\u002Fentt\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fskypjack\u002Fentt\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EFinite State Machine implementation using std::variant  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fmpusz\u002Ffsm-variant\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fmpusz\u002Ffsm-variant\u003C\u002Fa\u003E  \u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EA lightweight Behavior Trees Library  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fmiccol\u002FBehavior-Tree\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fmiccol\u002FBehavior-Tree\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003ENavigation-mesh toolset for games  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Frecastnavigation\u002Frecastnavigation\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Frecastnavigation\u002Frecastnavigation\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003ERuntime NavMesh actions\u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002FUnity-Technologies\u002FNavMeshComponents\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002FUnity-Technologies\u002FNavMeshComponents\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EPath finder and A* solver  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fleethomason\u002FMicroPather\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fleethomason\u002FMicroPather\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdetails\u003E\u003Cp\u003EМоя любимая тема, потому что помимо оптмизаций, последние семь лет я занимался как раз AI монстров под разными соусами, роевым поведением и групповыми BT. Вы, возможно, не поверите, но не каждой игре нужен сильный AI, если вообще нужен AI.  А тем, которым нужен, чаще всего хватает пары убогих скриптов, которые по таймеру говорят «Ой!» и бегут в стену.\u003C\u002Fp\u003E\u003Cp\u003EAI - это просто код. Если в движке можно писать код — поздравляю, у вас уже есть поддержка AI. Весь игровой \"интеллект\" — это просто куча \u003Ccode\u003Eif\u003C\u002Fcode\u003E-ов и \u003Ccode\u003Eswitch\u003C\u002Fcode\u003E-ей, которые делают вид, что NPC что-то \"думает\". Всё остальное разработчики сделали поверх двух этих кубиков: \u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003EBehavior Trees (BT)\u003C\u002Fstrong\u003E — иерархия задач, где NPC «думает», что делать. Хорошо читается, легко дебажить, но часто превращается в бесконечное дублирование логики и адскую вложенность.\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003EGoal-Oriented Action Planning (GOAP)\u003C\u002Fstrong\u003E — ИИ сам выбирает, как достичь цели. Круто, умно. Но писать планировщик — боль.\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003EFinite State Machines (FSM)\u003C\u002Fstrong\u003E — Состояния и переходы между ними. Просто, эффективно, но быстро разрастается в лапше фсм.\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003EUtility AI\u003C\u002Fstrong\u003E — Всё на числах и весах. Эдакая подвид FSM, где нет заранее прописанных переходов между состояниями. Гибко, даже слишком, и поэтому непредсказуемо.\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003EHTN, BT+ML, Neural Nets, Reinforcement Learning\u003C\u002Fstrong\u003E — Звучит как магия. Работает в основном в статьях.\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003EPathfinding\u003C\u002Fstrong\u003E - Алгоритм A* или его разновидности, плюс немного магии, чтобы не застревали в углу.\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003EНавмеши\u003C\u002Fstrong\u003E - Можно делать руками или использовать готовые тулзы (Recast, NavPower, etc).\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003EСистема решений\u003C\u002Fstrong\u003E - В любой игре в итоге всё сводится к: \"вижу игрока — атакую\", \"не вижу — ищу игрока\", \"мало хп — убегаю\".\u003C\u002Fp\u003E\u003Cp\u003EКакое-то время назад я время написал библиотеку для Behavior Trees. Рабочую, простую, с удобным дебагом, редактором и всем прочим. Возможно стоит выложить в опенсорс, но еще не закончился контракт поддержки с заказчиком — получилась крутая штука, наподобие UE blueprints, но с вменяемым дебагером и реплеями.\u003C\u002Fp\u003E\u003Cp\u003EНо, чем больше её модернизировали и допиливали, тем чаще я стал замечать, как дизайнеры, вместо того чтобы выстраивать красивые деревья, следовать паттернами \"разделяй и инкапсулируй\" , просто пихают все наборы поведений в одну длинную последовательность \u003Ccode\u003EDoEverythingAndRepeat\u003C\u002Fcode\u003E. И знаете — оно неплохо работало.\u003C\u002Fp\u003E\u003Cp\u003EAI — это в первую очередь про то, как развлечь игрока, и не дать ему заскучать, а не про интеллект. Пусть NPC тупой — главное, чтобы он вёл себя так, как хочет игрок. Пусть он предсказуем, но так легче запомнить паттерны и тактика от этого только выигрывает. \u003C\u002Fp\u003E\u003Cp\u003EПусть он не настоящий «ИИ», а просто грамотный скрипт — зато работает стабильно, развлекает игрока и тупит. AI — это не про интеллект. Это про иллюзию интеллекта. И если у вас получится заставить игрока поверить, что против него играет кто-то умный — значит, вы всё сделали правильно.\u003C\u002Fp\u003E\u003Ch4\u003EUI\u003C\u002Fh4\u003E\u003Cdetails class=\"spoiler\"\u003E\u003Csummary\u003EНемного ссылок\u003C\u002Fsummary\u003E\u003Cdiv class=\"spoiler__content\"\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EElements C++ GUI library  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fcycfi\u002Felements\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fcycfi\u002Felements\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EHigh-performance HTML renderer for game  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fultralight-ux\u002FUltralight\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fultralight-ux\u002FUltralight\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003ESkia-based C++ UI framework  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fskui-org\u002Fskui\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fskui-org\u002Fskui\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EUI inspired by \u003Ca href=\"https:\u002F\u002Fdocs.unity3d.com\u002FManual\u002FGUIScriptingGuide.html\" rel=\"noopener noreferrer nofollow\"\u003EUnity IMGUI\u003C\u002Fa\u003E  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fraysan5\u002Fraygui\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fraysan5\u002Fraygui\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003ETiny immediate-mode UI library  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Frxi\u002Fmicroui\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Frxi\u002Fmicroui\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EAntialiased 2D vector drawing library on top of OpenGL  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fmemononen\u002Fnanovg\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fmemononen\u002Fnanovg\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EA single-header ANSI C gui library  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fvurtun\u002Fnuklear\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fvurtun\u002Fnuklear\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EImmediate Mode Text-based User Interface  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fggerganov\u002Fimtui\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fggerganov\u002Fimtui\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EMinimalistic C++\u002FPython UI library for OpenGL\u002FGLES\u002FDX11\u002FDX12\u002FVulkan  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fdalerank\u002Fnanogui\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fdalerank\u002Fnanogui\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EC++ viewer for 3D data like meshes and point clouds  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fnmwsharp\u002Fpolyscope\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fnmwsharp\u002Fpolyscope\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003ERenderer agnostic, lightweight debug drawing API\u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fglampert\u002Fdebug-draw\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fglampert\u002Fdebug-draw\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EGPU rasterizer for fonts and vector graphics  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fservo\u002Fpathfinder\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fservo\u002Fpathfinder\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdetails\u003E\u003Cp\u003EМожно сделать игру без физики, без AI,  даже без аудио. Но без UI — увы, практически невозможно, мы живем в мире, где игры без UI воспринимаются как индийская индюшатина. Да и где-то ведь нужно написать «New Game» и «Exit», правильно?\u003C\u002Fp\u003E\u003Ch4\u003E...это сложно\u003C\u002Fh4\u003E\u003Cp\u003EНа бумаге всё выглядит просто: ну подумаешь, нужно отрисовать пару кнопок, текстов, может слайдер или чекбокс. Только вот у этих объектов вдруг появляется:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EСостояние: idle, hover, pressed, focused, disabled...\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EИерархия: кнопка внутри панели, которая внутри окна, которое скрыто, если не нажали на таб...\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EРазные системы координат: UI живёт в \u003Cstrong\u003Eэкранных координатах\u003C\u002Fstrong\u003E, а не в твоём уютном мире \u003Ccode\u003Eworld_space\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EХотим скейлиться с разрешением. И чтобы на Steam Deck не съезжало.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EПоддержка клавиатуры, мыши, тачскрина... а и еще контроллера.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EИ ещё желательно анимации и шейдеры — красиво же должно быть.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EИ вот ты уже не делаешь игру, а пишешь UI-фреймворк. Который, кстати, не факт, что будет использоваться где-то, кроме конкретно этой игры. Почему нельзя просто взять готовое?Можно. Но:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EImGui — прекрасен для дебага, но выглядит так, будто делаешь настройки биоса, а не игру.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EImGui с кастомным рендером — всё равно требует усилий, чтобы он не выглядел как меню биоса.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003ElibRocket, Noesis, Nuklear, MyGUI, etc\u003Cstrong\u003E.\u003C\u002Fstrong\u003E — либо мертвы, либо странные, либо тащат за собой XML нотификации из 2004 года.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EScaleform — круто, красиво, но пора бы уже закопать эту flash-cтюардессу\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EИ даже если вы возьмёте что-то нормальное, ок Scaleform, все-же ты не так плох, как изначально казалось — всё равно придётся вкручивать его в свой движок, связывать с системой ввода, событий, шейдерами, текстами и прочим и прочим. Конечно же, была написана кастомная UI-библиотека, на svg рендере, с декларативными конструкторами, под разные GAPI, но дальше прототипа и пары редакторов не пошла, в итоге в одном случае мы ушли на Scaleform, а в другом на ImGui.\u003C\u002Fp\u003E\u003Cdetails class=\"spoiler\"\u003E\u003Csummary\u003EНе imgui\u003C\u002Fsummary\u003E\u003Cdiv class=\"spoiler__content\"\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F87b\u002F1c7\u002F1d3\u002F87b1c71d3716d5933e600c132f8f96a5.png\" width=\"829\" height=\"480\" sizes=\"(max-width: 780px) 100vw, 50vw\" srcset=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw780\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F87b\u002F1c7\u002F1d3\u002F87b1c71d3716d5933e600c132f8f96a5.png 780w,&#10;       https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F87b\u002F1c7\u002F1d3\u002F87b1c71d3716d5933e600c132f8f96a5.png 781w\" loading=\"lazy\" decode=\"async\"\u002F\u003E\u003C\u002Ffigure\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F15b\u002Ff0b\u002F663\u002F15bf0b6639997c77903a0936c7821b7c.png\" width=\"1282\" height=\"752\" sizes=\"(max-width: 780px) 100vw, 50vw\" srcset=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw780\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F15b\u002Ff0b\u002F663\u002F15bf0b6639997c77903a0936c7821b7c.png 780w,&#10;       https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F15b\u002Ff0b\u002F663\u002F15bf0b6639997c77903a0936c7821b7c.png 781w\" loading=\"lazy\" decode=\"async\"\u002F\u003E\u003C\u002Ffigure\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdetails\u003E\u003Cp\u003EUI — это сложная, структурированная, многоуровневая, зависимая от платформы и очень недооценённая часть любого движка. Но вам лучше пройти этот путь хотя бы раз, минимум, но хорошо. Не надо пытаться переплюнуть Unity UI, Unreal Slate или HTML. Сделать пару контролов: кнопку, текст, может чекбокс — и чтобы не падали.\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F4b3\u002F3ee\u002F205\u002F4b33ee205256ec3cb8bb3716684ba7c7.png\" width=\"682\" height=\"381\" sizes=\"(max-width: 780px) 100vw, 50vw\" srcset=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw780\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F4b3\u002F3ee\u002F205\u002F4b33ee205256ec3cb8bb3716684ba7c7.png 780w,&#10;       https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F4b3\u002F3ee\u002F205\u002F4b33ee205256ec3cb8bb3716684ba7c7.png 781w\" loading=\"lazy\" decode=\"async\"\u002F\u003E\u003C\u002Ffigure\u003E\u003Ch3\u003EАрхитектура\u003C\u002Fh3\u003E\u003Cdetails class=\"spoiler\"\u003E\u003Csummary\u003EРефлексия\u003C\u002Fsummary\u003E\u003Cdiv class=\"spoiler__content\"\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EC++ Reflection Parser  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fgetml\u002Freflect-cpp\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fgetml\u002Freflect-cpp\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Frttrorg\u002Frttr\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Frttrorg\u002Frttr\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EStatic reflection for enums (to string, from string, iteration)  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002FNeargye\u002Fmagic_enum\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002FNeargye\u002Fmagic_enum\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003ESmall protobuf implementation in C  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fprotocolbuffers\u002Fupb\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fprotocolbuffers\u002Fupb\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EProtocol Buffers - data interchange format  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fprotocolbuffers\u002Fprotobuf\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fprotocolbuffers\u002Fprotobuf\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fnanopb\u002Fnanopb\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fnanopb\u002Fnanopb\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EFast C++11 serialization  library \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002FUSCiLab\u002Fcereal\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002FUSCiLab\u002Fcereal\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Ca href=\"http:\u002F\u002FBoost.org\" rel=\"noopener noreferrer nofollow\"\u003EBoost.org\u003C\u002Fa\u003E serialization module  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fboostorg\u002Fserialization\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fboostorg\u002Fserialization\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdetails\u003E\u003Cdetails class=\"spoiler\"\u003E\u003Csummary\u003EБазовые решения\u003C\u002Fsummary\u003E\u003Cdiv class=\"spoiler__content\"\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003Ebgfx, imgui, glfw, glm\u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002FJoshuaBrookover\u002Fbigg\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002FJoshuaBrookover\u002Fbigg\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Ephysically based renderer with a fully featured editor  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002FTrylz\u002FNebulaRender\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002FTrylz\u002FNebulaRender\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EAether3D Game Engine  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fbioglaze\u002Faether3d\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fbioglaze\u002Faether3d\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EComprehensive set of C++ open source libraries for realtime rendering\u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002FWolfEngine\u002FWolf.Engine\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002FWolfEngine\u002FWolf.Engine\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EImproved version of the X-Ray engine  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002FOpenXRay\u002Fxray-16\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002FOpenXRay\u002Fxray-16\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EPure C Game Engine  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Forangeduck\u002FCorange\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Forangeduck\u002FCorange\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EСommunity-developed cross platform toolkit\u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fopenframeworks\u002FopenFrameworks\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fopenframeworks\u002FopenFrameworks\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EОpen source clone of the Age of Empires II engine  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002FSFTtech\u002Fopenage\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002FSFTtech\u002Fopenage\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003ECross-platform GPU-oriented game framework  \u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fi42output\u002FneoGFX\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fi42output\u002FneoGFX\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003ESDL\u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Femscripten-ports\u002FSDL2\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Femscripten-ports\u002FSDL2\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdetails\u003E\u003Cp\u003EК определенному моменту у нас уже есть всё по отдельности: графика, звук, ассеты, физика, UI, может даже AI и скрипты. Но одна важная вещь до сих пор остаётся в стороне: как всё это соединить в нечто работающее?  Есть несколько рабоающих подходов. Подробнее эта тема рассматривалась в предыдущей статье, а сейчас просто обобщу.\u003C\u002Fp\u003E\u003Ch4\u003EНет архитектуры - тоже архитектура\u003C\u002Fh4\u003E\u003Cp\u003EМногие инди-разработчики, уставшие от сложностей современных фреймворков, обращаются к простому библиотечному подходу в разработке. Суть его заключается в создании отдельных независимых подсистем, каждая из которых отвечает за конкретную функциональность. Вы создаете подсистему \u003Ccode\u003Egfx\u003C\u002Fcode\u003E для отрисовки графики, \u003Ccode\u003Eaudio\u003C\u002Fcode\u003E для проигрывания звуков, \u003Ccode\u003Eassets\u003C\u002Fcode\u003E для загрузки данных с диска и \u003Ccode\u003Einput\u003C\u002Fcode\u003E для обработки пользовательского ввода. Каждая подсистема функционирует изолированно, не имея представления о других частях программы. Вы как разработчик самостоятельно определяете, какие функции вызывать и в каком порядке это делать. Весь процесс находится под вашим непосредственным контролем. Кстати, такой подход был популярен в конце девяностых - начал  нулевых.\u003C\u002Fp\u003E\u003Cp\u003EЭтот метод имеет ряд преимуществ: он прост в реализации, обладает прозрачностью работы и отлично подходит для небольших проектов. Но успех сильно зависит от личной дисциплины разработчика, там отсутствуют автоматические менеджеры сцен и другие вспомогательные структуры. Со временем становится сложно удерживать в голове всю схему вызовов и их причинно-следственные связи.\u003C\u002Fp\u003E\u003Cp\u003EНо поначалу всё работает легко и красиво, для многих этого дастаточно. Позже вы конечно можете столкнуться с такими багами, как отсутствие уведомлений пользовательского интерфейса об обновлении ассетов или незапуск фоновой музыки после загрузки нового уровня. Решение этих проблем неизбежная плата за отсутсвие связей между различными частями программы. А эти связи, по сути, и представляют собой архитектуру приложения, от которой мы изначально пытались уйти.\u003C\u002Fp\u003E\u003Ch4\u003EGodObject - тоже архитектура\u003C\u002Fh4\u003E\u003Cp\u003EКрупные игровые движки вроде Unity, Unreal, Godot, CryEngine, Dagor и других часто выбирают подход, основанный на едином базовом классе. Обычно это класс с названием \u003Ccode\u003EObject\u003C\u002Fcode\u003E, \u003Ccode\u003EEntity\u003C\u002Fcode\u003E, \u003Ccode\u003EGameObject\u003C\u002Fcode\u003E, \u003Ccode\u003EActor\u003C\u002Fcode\u003E или подобном ему, который становится прародителем для всех игровых сущностей.\u003C\u002Fp\u003E\u003Cp\u003EТакой базовый класс обычно содержит виртуальные методы для основных игровых функций. \u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"cpp\"\u003Eclass GameObject {\npublic:\n    virtual void update(float dt);\n    virtual void render();\n    virtual void onEvent(const Event&amp;);\n};\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EВсе создаваемые вами игровые элементы - кнопки интерфейса, враги, неписи - наследуются от этого единого класса. Каждый из этих элементов автоматически получает способность обновляться в игровом цикле, отрисовываться на экране и реагировать на различные события. Удобно? Очень. Из коробки предоставляет единообразный интерфейс для всех игровых объектов. Централизованная структура позволяет легко управлять игровыми сущностями, позволяет реализовать глобальный менеджер объектов.\u003C\u002Fp\u003E\u003Cp\u003EГлавная проблема заключается в чрезмерном использовании наследования - все классы происходят от одного родителя, что противоречит принципу \"композиция лучше наследования\". Возникают трудности при необходимости реализации множественного поведения для объектов - система становится хрупкой и сложной для расширения.\u003C\u002Fp\u003E\u003Cp\u003EЧерез пару месяцев твой \u003Ccode\u003EGameObject\u003C\u002Fcode\u003E превращается в гигантскую помойку с виртуальными методами на 300 строк. Попытки исправить это через компоненты делают только хуже. В итоге ты начинаешь думать... \u003C\u002Fp\u003E\u003Ch4\u003EECS - модно! Но...\u003C\u002Fh4\u003E\u003Cp\u003EАрхитектурная модель, которая в последние годы завоевала большую популярность среди инди-разработчиков и энтузиастов. Основная идея заключается в \u003Cstrong\u003Eрадикальном \u003C\u002Fstrong\u003Eразделении данных и логики внутри игровой системы - всё строится вокруг трех ключевых концепций. Entity (сущность) представляет собой просто идентификатор, не содержащий никакой логики или данных самостоятельно. Component (компонент) является контейнером для определенного типа данных, таких как позиция объекта, запас здоровья или параметры звука. System (система) представляет собой функциональный блок, который обрабатывает компоненты по определенным правилам.\u003C\u002Fp\u003E\u003Cp\u003EПо раздельности работать не будет, но вместе позволяет исключить традиционную иерархию объектов, заменяя ее пакетной обработкой данных. Например, система физики может одновременно получить доступ ко всем компонентам Transform и Velocity, чтобы обновить координаты всех движущихся объектов за одну операцию.\u003C\u002Fp\u003E\u003Cp\u003EИз преимуществ получаем высокую производительность благодаря эффективному использованию кэша процессора, четкое разделение ответственности между различными частями системы, и хорошую масштабируемость.\u003C\u002Fp\u003E\u003Cp\u003EИз минусов - влетаем по полной в использование сложной системы, которая часто требует написания значительного объема шаблонного кода. Без специализированных редакторов код ECS практически нечитаем, без визуальных отладчиков его ещё и не подебажить.\u003C\u002Fp\u003E\u003Cp\u003EДля проектов небольшого масштаба, это будет как пальба из танка по мухам. Попытки массово продать это инди-разработчикам буксуют уже шестой год, что в Юнити, что в Анриале.\u003C\u002Fp\u003E\u003Ch4\u003EА может просто оставить всё как есть?\u003C\u002Fh4\u003E\u003Cp\u003EИ да, и нет. Архитектура — это не цель, а инструмент. Если ты делаешь хобби проект на выходных — не надо строить идеальный фреймворк, ибо получится фреймворк, а когда начинаешь писать фреймворк - разработка игры уходит на второй план. Но также важно, что архитектура — это как скелет игры. Никто его не видит, но если он кривой, то всё будет болеть, гнуться и ломаться при каждом чихе. А когда станет совсем неудобно — не надо бояться всё выкинуть и начать заново. Не бойтесь выкидывать сломанное, все так делают (правило трех систем)\u003C\u002Fp\u003E\u003Cp\u003EК тому же \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Faisuhua\u002FBooks-2\u002Fblob\u002Fmaster\u002FGame%20Engine%20Architecture.pdf\" rel=\"noopener noreferrer nofollow\"\u003EGEA\u003C\u002Fa\u003E все также актуален и лучше пока что не придумали, если вдруг забуксовали перечитайте соответствующую главу в этой книге.\u003C\u002Fp\u003E\u003Ch2\u003EТулзы\u003C\u002Fh2\u003E\u003Cp\u003EГоворя о тулзах, вспомогательных инструментах для работы с движком — как вы уже могли догадаться — не каждый движок или игра нуждается в них. В качестве инструментов, например, могут использоваться простые Python-скрипты.\u003C\u002Fp\u003E\u003Cp\u003EБольшинство движков предоставляют из коробки полноценные визуальные редакторы., которые выглядят как гибрид IDE (среды разработки) и Blenderа, с возможностью расставлять объекты на сцене, редактировать материалы и шейдеры, настраивать физику и взаимодействия, просматривать анимации и интерфейс, тестировать всё в режиме реального времени.\u003C\u002Fp\u003E\u003Cp\u003EНо создание полноценного редактора — задача, сопоставимая по сложности с разработкой самого движка. Для небольшого движка делать Unity-подобный редактор не нужно и не стоит. - это будет неэффективно и отнимет уйму времени. Тем не менее, не стоит пренебрегать простыми инструментами, которые пишутся за пару-тройку вечеров, но значительно облегчают жизнь:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EКонвертер уровней: часто собственный формат (обычно бинарный) - это лучший выбор для небольшой игры, свой формат позволяет управлять производительностью. Можно написать утилиту, которая берёт данные из Blender или Tiled, преобразует их в нужный формат на лету, а движок подхватывает и показывает результат.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EПроверка ресурсов: ассеты будут загружаться криво или с ошибками, случается это сплошь и рядом. Стоит потратить какое-то времян на валидатор, который может пробегаться по ресурсам и проверять, всё ли на месте (например, нет ли отсутствующих текстур, шейдеров или моделей). Сохраняет очень много времени при тестировании.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EКонвертер текстур: почти всегда приходится перекодировать изображения в GPU-формат (DXT, ASTC или ETC), или собирать текстурные атласа.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EПримеров минитулзов много: импортер ассетов, чекер зависимостей, инспектор ассетов, внутриигровая консоль, реплеи и тд\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EВажно помнить: время, потраченное на инструмент, должно экономить вам больше времени в будущем. Не создавайте визуальный редактор ради самого редактора. Но если приходится каждый раз вручную редактировать 200 строк JSON неудобно — простая тулза или скрипт сэкономит уйму времени.\u003C\u002Fp\u003E\u003Ch3\u003EЗаключение\u003C\u002Fh3\u003E\u003Cp\u003EМы тут обсудили всякие интересные особенности разработки игр (игровых движков) — контейнеры, строки, аллокаторы, архитектуру и тд. И я надеюсь, что после всего этого мысль «а не сделать ли свой движок» не кажется слишком самоубийственной. Да, но давайте не забывать очевидное: 90% игр не нуждаются ни в чём из этого.\u003C\u002Fp\u003E\u003Cp\u003EДля того, чтобы начать разбираться в том как устроены игры вам не нужен движок уровня Unreal. Чтобы не стать очередным Unreal \"какбы\" C++ программистом, который не отличает array от vector - надо сделать свою первую (или пятую) игру без движка, сделать примитивную версию, которая открывает окно, рисует пару спрайтов и пакует проект в zip. Пусть это будет игра-движок. Простой, убогий, но свой. И, что важнее, сделанный с пониманием используемых инструментов. Без Unity, без Godot, без других удобных костылей. Пусть оно будет кривым и тормозным — это неважно. \u003C\u002Fp\u003E\u003Cp\u003EЗато это позволит повозиться с архитектурой, шаблонами проектирования и разобраться в оптимизации ресурсов. Этот путь потребует времени, но в итоге вы получите не просто игру, но и понимание «внутренней кухни». Важность такого подхода сложно оценить для дальнейшей карьеры. Здесь закладывается и начинается профессиональный рост. Настоящий, без фантиков. Человек, пришедший в разработку со знанием Анриала, сможет работать только на нём, человек знающий как он устроен изнутри, сможет и в Анриал, и в Юнити и в Годот.\u003C\u002Fp\u003E\u003Cp\u003EКонечно, это не единственный вариант: если Unreal Engine, Godot или другие готовые решения кажутся вам удобнее — почему бы и нет? Всё зависит от амбиций, терпения и готовности копать глубже. Но даже если вы в итоге остановитесь на чужом движке, опыт самостоятельной разработки станет мощным толчком для профессионального роста, научив видеть за технической сутью магию игр.  \u003C\u002Fp\u003E\u003Cp\u003EВыбор — как всегда — за вами. \u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa02\u002Fc27\u002Fef6\u002Fa02c27ef614bc11076e162638ef91af4.png\" width=\"673\" height=\"255\" sizes=\"(max-width: 780px) 100vw, 50vw\" srcset=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw780\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa02\u002Fc27\u002Fef6\u002Fa02c27ef614bc11076e162638ef91af4.png 780w,&#10;       https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa02\u002Fc27\u002Fef6\u002Fa02c27ef614bc11076e162638ef91af4.png 781w\" loading=\"lazy\" decode=\"async\"\u002F\u003E\u003C\u002Ffigure\u003E\u003Cdetails class=\"spoiler\"\u003E\u003Csummary\u003EА ещё\u003C\u002Fsummary\u003E\u003Cdiv class=\"spoiler__content\"\u003E\u003Cp\u003EА ещё я все еще в поисках самой лучшей студии. Большая М слишком большая, и слишком неповоротливая в плане решений. Если кому интересно, ссылка на линкедин в профиле.\u003C\u002Fp\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdetails\u003E\u003Ch2\u003EP.S.\u003C\u002Fh2\u003E\u003Cp\u003EЭто последняя статья цикла с теорией и описанием интересных кейсов. Но бонусом будет еще одна со всякими примерами просадки перфа на реальных случаях из игровых проектов (с указанием имени, там где было разрешение), там уже без теории - просто кейсы фризов и как чинили. Не переключайтесь!\u003C\u002Fp\u003E\u003C\u002Fdiv\u003E","tags":[{"titleHtml":"с++"},{"titleHtml":"game++"},{"titleHtml":"разработка игр"},{"titleHtml":"игры и игровые консоли"}],"metadata":{"stylesUrls":[],"scriptUrls":[],"shareImageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F271\u002F9e6\u002F152\u002F2719e6152b24f96a617e88bc174ba39b.png","shareImageWidth":1200,"shareImageHeight":630,"vkShareImageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F271\u002F9e6\u002F152\u002F2719e6152b24f96a617e88bc174ba39b.png","schemaJsonLd":"{\"@context\":\"http:\\\u002F\\\u002Fschema.org\",\"@type\":\"Article\",\"mainEntityOfPage\":{\"@type\":\"WebPage\",\"@id\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Farticles\\\u002F907146\\\u002F\"},\"headline\":\"Game++. while (!game(over))\",\"datePublished\":\"2025-05-06T21:55:43+03:00\",\"dateModified\":\"2025-05-07T00:45:14+03:00\",\"author\":{\"@type\":\"Person\",\"name\":\"Sergei Kushnirenko\"},\"publisher\":{\"@type\":\"Organization\",\"name\":\"Habr\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fa_\\\u002Flk\\\u002F9m\\\u002Fa_lk9mjkccjox-zccjrpfolmkmq.png\"}},\"description\":\"Когда деревья были большими, а игровые движки маленькими - выбора писать или не писать свой не стояло - если у тебя нет своего движка, фактически у тебя нет игры...\",\"url\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Farticles\\\u002F907146\\\u002F#post-content-body\",\"about\":[\"h_cpp\",\"h_programming\",\"h_gamedev\",\"h_games\",\"f_develop\",\"f_popsci\"],\"image\":[\"https:\\\u002F\\\u002Fhabr.com\\\u002Fshare\\\u002Fpublication\\\u002F907146\\\u002F3b4a8d3e6d655e50d56ab17e538f88f6\\\u002F\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F271\\\u002F9e6\\\u002F152\\\u002F2719e6152b24f96a617e88bc174ba39b.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Faa0\\\u002Fea7\\\u002Facc\\\u002Faa0ea7accb8222bcb6031fb027f0c9a4.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F5bd\\\u002Ff69\\\u002Fc2e\\\u002F5bdf69c2e99ebc6f8de3884a64b7000b.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Fb33\\\u002F1db\\\u002F317\\\u002Fb331db317dc39d2f8d5d1f46b1538a78.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F87b\\\u002F1c7\\\u002F1d3\\\u002F87b1c71d3716d5933e600c132f8f96a5.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F15b\\\u002Ff0b\\\u002F663\\\u002F15bf0b6639997c77903a0936c7821b7c.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F4b3\\\u002F3ee\\\u002F205\\\u002F4b33ee205256ec3cb8bb3716684ba7c7.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Fa02\\\u002Fc27\\\u002Fef6\\\u002Fa02c27ef614bc11076e162638ef91af4.png\"]}","metaDescription":"Когда деревья были большими, а игровые движки маленькими - выбора писать или не писать свой не стояло - если у тебя нет своего движка, фактически у тебя нет игры. Кто-то покупал чужой движок и...","mainImageUrl":null,"amp":true,"customTrackerLinks":[]},"polls":[],"commentsEnabled":{"status":true,"reason":null},"rulesRemindEnabled":false,"votesEnabled":true,"status":"published","plannedPublishTime":null,"checked":null,"hasPinnedComments":false,"format":"opinion","banner":null,"multiwidget":null,"multiwidgetUuid":null,"readingTime":35,"complexity":"low","isEditorial":false}},"articlesIds":{},"isLoading":false,"pagesCount":{},"route":{},"reasonsList":null,"postReasonsList":null,"view":"cards","lastVisitedRoute":{},"ssrCommentsArticleIds":[""],"viewedPosts":[],"myFeedFilter":{"complexity":"all","score":"all","types":["articles","posts","news"]},"myFeedIsApplyFilters":false,"myFeedIsForce":false,"karma":{"userReasonsList":null}},"authorContribution":{"authors":{}},"betaTest":{"currentAnnouncement":null,"announcements":{},"announcementCards":null,"announcementComments":{},"announcementCommentThreads":{},"announcementCommentingStatuses":{},"archivedList":[]},"authorStatistics":{"articleRefs":{},"articleIds":{},"pagesCount":{},"route":{},"viewsCount":[],"maxStatsCount":{}},"career":{"seoLandings":[{"title":"Программист C++","vacanciesCount":101,"itemUrl":"https:\u002F\u002Fcareer.habr.com\u002Fvacancies\u002Fprogrammist_c_plus_plus","itemHubs":["cpp"]},{"title":"Разработчик игр","vacanciesCount":33,"itemUrl":"https:\u002F\u002Fcareer.habr.com\u002Fvacancies\u002Fgame_developer","itemHubs":["game_design","unity","gamedev","game_testing","unreal_engine","godot"]},{"title":"Unity разработчик","vacanciesCount":4,"itemUrl":"https:\u002F\u002Fcareer.habr.com\u002Fvacancies\u002Funity_developer","itemHubs":["unity","gamedev"]},{"title":"QT разработчик","vacanciesCount":8,"itemUrl":"https:\u002F\u002Fcareer.habr.com\u002Fvacancies\u002Fc_plus_plus_qt_developer","itemHubs":["qt_software","cpp"]}],"hubs":"cpp,programming,gamedev,games"},"comments":{"articleComments":{},"articlePinnedComments":{},"searchCommentsResults":null,"pagesCount":null,"commentAccess":{},"scrollParents":{},"pageArticleComments":{"lastViewedComment":0,"postId":null,"lastCommentTimestamp":"","moderated":[],"moderatedIds":[],"commentRoute":"","idempotenceKey":""}},"companies":{"companyRefs":{},"companyIds":{},"companyTopIds":{},"pagesCount":{},"companyProfiles":{},"companiesCategories":[],"companiesCategoriesTotalCount":0,"companiesWidgets":{},"companiesWorkers":{},"companiesFans":{},"multiwidgets":{},"route":{},"isLoading":false,"companyWorkersLoading":false,"companyFansLoading":false,"multiwidgetLoading":false,"vacancies":{},"companiesGalleries":{},"companiesBanners":{},"companiesLandingVacancies":{},"companiesTechnologies":{},"workplaceInfo":null},"companyAdmin":{"companyInfo":null,"companyInfoLoading":false,"faqArticles":null,"brandingPreviewImageUrl":null,"jivoStatus":0,"adminNotifications":null,"availableInvitesCount":{}},"companyAdd":{"currentStep":"","stepsData":{},"uncompletedSteps":[],"isStepLoading":true,"isStepCommitting":false,"isInitialized":false,"agreementContent":""},"companiesContribution":{"hubs":{},"flows":{},"companyRefs":{}},"companyHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"conversation":{"messages":[],"respondent":null,"isLoadMore":false},"conversations":{"conversations":[],"pagesCount":0},"docs":{"menu":{},"articles":{},"mainMenu":[],"loading":{"main":false,"dropdown":false,"article":false}},"feature":{"isProbablyVisible":true},"fixedBanner":{"isArticleStickyPanelVisible":false,"isArticleStickyPanelAtTheBottom":false,"isFixedBannerVisible":false,"isStickyPanelIconsHidden":false},"flows":{"updates":{}},"global":{"isPwa":false,"device":"desktop","isHabrCom":true,"requestId":"d0cf6785d6c610ed79006293c5d01398"},"hubs":{"hubRefs":{},"hubIds":{},"pagesCount":{},"isLoading":false,"route":{}},"hubsBlock":{"hubRefs":{},"hubIds":{}},"i18n":{"fl":"ru","hl":"ru"},"info":{"welcomePage":{},"isLoading":true},"location":{"urlStruct":{"protocol":null,"slashes":null,"auth":null,"host":null,"port":null,"hostname":null,"hash":null,"query":{},"pathname":"\u002Fru\u002Farticles\u002F907146\u002F","path":"\u002Fru\u002Farticles\u002F907146\u002F","href":"\u002Fru\u002Farticles\u002F907146\u002F"}},"me":{"user":null,"uuid":null,"ppgDemanded":false,"karmaResetInfo":{"canReincarnate":null,"wasReincarnated":null,"currentScore":null},"notes":null,"userUpdates":{"feeds":{"newPostsCount":null,"newThreadsCount":null,"newNewsCount":null,"newCount":null},"conversationUnreadCount":0},"features":null},"mostReadingList":{"mostReadingListIds":[],"mostReadingListRefs":null,"promoPost":null},"onboarding":{"currentStep":null,"stepsData":{},"stepsErrors":{},"completedSteps":[],"isStepCommitting":false,"isCommitDisabled":true},"ppa":{"articles":{},"card":null,"transactions":null,"totalTransactions":null,"isAccessible":null},"projectsBlocks":{"activeBlocks":{"vacancies":"project-block-article"}},"promoData":{"isLoading":false,"hasLoaded":false,"featurer":null,"megaposts":null,"promoLinks":null,"promoPosts":null,"sticker":null},"publicationStatistics":{"statsInfo":{},"statsFunnels":{},"statsGraph":{},"defaultSuggest":{},"suggest":{},"timeTracker":{},"isTrackingActivity":false,"isUserActive":true,"otherPublicationStats":{}},"pullRefresh":{"shouldRefresh":false},"sandbox":{"articleIds":[],"articleRefs":{},"pagesCount":null,"route":{},"lastVisitedRoute":{},"isLoading":false},"search":{"searchQueryError":null},"settingsOther":{"inputs":{"uiLang":{"errors":[],"ref":null,"value":""},"articlesLangEnglish":{"errors":[],"ref":null,"value":false},"articlesLangRussian":{"errors":[],"ref":null,"value":false},"agreement":{"errors":[],"ref":null,"value":false},"email":{"errors":[],"ref":null,"value":true},"digest":{"errors":[],"ref":null,"value":true}}},"similarList":{"similarListIds":[],"similarListRefs":null},"ssr":{"error":null,"isDataLoaded":true,"isDataLoading":false,"isHydrationFailed":false,"isServer":false},"stories":{"stories":null},"technotext":{"years":[],"technotextDocForNominees":null,"technotextDocForWinners":null,"technotextInfo":{},"technotextInfoLoading":false,"technotextWinners":{},"technotextWinnersLoading":false},"userHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"userInvites":{"availableInvites":0,"usedInvitesIds":[],"usedInvitesRefs":{},"usedInvitesPagesCount":0,"unusedInvitesIds":[],"unusedInvitesRefs":{},"unusedInvitesPagesCount":0},"userVotes":{"karmaVotesList":[],"karmaVotesPagesCount":null,"karmaVotesListLoading":false,"commentsVotesList":[],"commentsVotesPagesCount":null,"commentsVotesListLoading":false,"postsVotesList":[],"postsVotesPagesCount":null,"postsVotesListLoading":false,"userVotesList":[],"userVotesPagesCount":null,"userVotesListLoading":false},"users":{"authorRefs":{},"authorIds":{},"pagesCount":{},"authorProfiles":{},"userHubs":{},"userInvitations":{},"authorFollowers":{},"authorFollowed":{},"userSpecialization":{},"karmaStats":[],"statistics":null,"isLoading":false,"authorFollowersLoading":false,"authorFollowedLoading":false,"userHubsLoading":false,"userInvitationsLoading":false,"route":{}},"viewport":{"prevScrollY":{},"scrollY":0,"width":0},"tracker":{"notificationsLoading":false,"notificationsList":[],"notificationsPageCount":0,"pendingMarkNotificationsRead":[],"publicationsLoading":true,"publicationsList":[],"publicationsPageCount":0,"pendingDeletePublications":false,"pendingMarkPublicationsRead":false},"events":{"eventRefs":{},"eventIds":[],"pagesCount":0,"categories":[],"cities":[],"actualEvents":null,"currentEvent":null,"eventsFilter":{"city":"all","timeStarted":null,"timeEnded":null}},"wysiwyg":{"WYSIWYGRulesRefs":null},"refs":{"specializationRefs":[]},"hint":{"hints":{}}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script>
   <script src="https://assets.habr.com/habr-web/js/chunk-vendors.978df117.js" defer></script>
   <script src="https://assets.habr.com/habr-web/js/app.58b8c457.js" defer></script>
  </div>
  <div id="overlays">
   <!----><!--teleport anchor--><!----><!--teleport anchor--><!----><!--teleport anchor--><!----><!--teleport anchor--><!----><!--teleport anchor--><!----><!--teleport anchor-->
  </div>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-S28W1WC23F"></script>
  <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    </script>
  <script type="text/javascript">
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

  </script>
  <script type="text/javascript">
      window.addEventListener('load', function () {
        setTimeout(() => {
          const img = new Image();
          img.src = 'https://vk.com/rtrg?p=VK-RTRG-421343-57vKE';
        }, 0);
      });
    </script>
 </body>
</html>