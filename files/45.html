<!doctype html>
<html lang="ru">
 <head>
  <title>Пример забытого «наивного» алгоритма / Хабр</title>
  <meta property="fb:app_id" content="444736788986613">
  <meta property="fb:pages" content="472597926099084">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@habr_com">
  <meta property="og:site_name" content="Хабр">
  <link href="https://habr.com/ru/rss/post/907316/?fl=ru" type="application/rss+xml" title rel="alternate" name="rss">
  <link href="https://habr.com/ru/articles/907316/" rel="canonical" data-hid="e3fa780">
  <link rel="image_src" href="https://habr.com/share/publication/907316/43b599d9aa921b2e438cf8b8f742bfce/" data-hid="2a79c45">
  <link rel="amphtml" href="https://habr.com/ru/amp/publications/907316/">
  <meta property="og:title" content="Пример забытого «наивного» алгоритма">
  <meta name="twitter:title" content="Пример забытого «наивного» алгоритма">
  <meta name="aiturec:title" content="Пример забытого «наивного» алгоритма">
  <meta name="description" content="Недавно написал скептический комментарий по&nbsp;поводу необходимости алгоритмических интервью. Вспомнил примеры из&nbsp;своей практики, один из&nbsp;них вполне подходящий, можно сделать патч...">
  <meta itemprop="description" content="Недавно написал скептический комментарий по&nbsp;поводу необходимости алгоритмических интервью. Вспомнил примеры из&nbsp;своей практики, один из&nbsp;них вполне подходящий, можно сделать патч...">
  <meta property="og:description" content="Недавно написал скептический комментарий по&nbsp;поводу необходимости алгоритмических интервью. Вспомнил примеры из&nbsp;своей практики, один из&nbsp;них вполне подходящий, можно сделать патч...">
  <meta name="twitter:description" content="Недавно написал скептический комментарий по&nbsp;поводу необходимости алгоритмических интервью. Вспомнил примеры из&nbsp;своей практики, один из&nbsp;них вполне подходящий, можно сделать патч...">
  <meta property="aiturec:description" content="Недавно написал скептический комментарий по&nbsp;поводу необходимости алгоритмических интервью. Вспомнил примеры из&nbsp;своей практики, один из&nbsp;них вполне подходящий, можно сделать патч...">
  <meta itemprop="image" content="https://habr.com/share/publication/907316/43b599d9aa921b2e438cf8b8f742bfce/">
  <meta property="og:image" content="https://habr.com/share/publication/907316/43b599d9aa921b2e438cf8b8f742bfce/">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="aiturec:image" content="https://habr.com/share/publication/907316/43b599d9aa921b2e438cf8b8f742bfce/">
  <meta name="twitter:image" content="https://habr.com/share/publication/907316/43b599d9aa921b2e438cf8b8f742bfce/">
  <meta property="vk:image" content="https://habr.com/share/publication/907316/43b599d9aa921b2e438cf8b8f742bfce/?format=vk">
  <meta property="vk:image" content="https://habr.com/share/publication/907316/43b599d9aa921b2e438cf8b8f742bfce/?format=vk?format=vk">
  <meta property="aiturec:item_id" content="907316">
  <meta property="aiturec:datetime" content="2025-05-06T11:15:16.000Z">
  <meta content="https://habr.com/ru/articles/907316/" property="og:url">
  <meta property="og:type" content="article">
  <meta property="og:locale" content="ru_RU">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta name="keywords" content="алгоритмы, java">
  <script type="application/ld+json" data-hid="1e0f0a2">{"@context":"http:\/\/schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/habr.com\/ru\/articles\/907316\/"},"headline":"Пример забытого «наивного» алгоритма","datePublished":"2025-05-06T14:15:16+03:00","dateModified":"2025-05-06T14:15:16+03:00","author":{"@type":"Person","name":"apcs660"},"publisher":{"@type":"Organization","name":"Habr","logo":{"@type":"ImageObject","url":"https:\/\/habrastorage.org\/webt\/a_\/lk\/9m\/a_lk9mjkccjox-zccjrpfolmkmq.png"}},"description":"Недавно написал скептический комментарий по&nbsp;поводу необходимости алгоритмических интервью. Вспомнил примеры из&nbsp;своей практики, один из&nbsp;них вполне подходящий, мож...","url":"https:\/\/habr.com\/ru\/articles\/907316\/#post-content-body","about":["h_java","h_algorithms","f_develop"],"image":["https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/a85\/27b\/61b\/a8527b61bae3f95086aadc3329d433c9.png"]}</script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover,maximum-scale=1,user-scalable=0">
  <meta name="referrer" content="unsafe-url">
  <style>
      /* cyrillic-ext */
      @font-face {
        font-family: 'Fira Sans';
        font-style: normal;
        font-weight: 400;
        font-display: swap;
        src: url(https://fonts.gstatic.com/s/firasans/v17/va9E4kDNxMZdWfMOD5VvmojLazX3dGTP.woff2) format('woff2');
        unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
      }

      /* cyrillic */
      @font-face {
        font-family: 'Fira Sans';
        font-style: normal;
        font-weight: 400;
        font-display: swap;
        src: url(https://fonts.gstatic.com/s/firasans/v17/va9E4kDNxMZdWfMOD5Vvk4jLazX3dGTP.woff2) format('woff2');
        unicode-range: U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
      }

      /* latin-ext */
      @font-face {
        font-family: 'Fira Sans';
        font-style: normal;
        font-weight: 400;
        font-display: swap;
        src: url(https://fonts.gstatic.com/s/firasans/v17/va9E4kDNxMZdWfMOD5VvmYjLazX3dGTP.woff2) format('woff2');
        unicode-range: U+0100-02AF, U+0304, U+0308, U+0329, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
      }

      /* latin */
      @font-face {
        font-family: 'Fira Sans';
        font-style: normal;
        font-weight: 400;
        font-display: swap;
        src: url(https://fonts.gstatic.com/s/firasans/v17/va9E4kDNxMZdWfMOD5Vvl4jLazX3dA.woff2) format('woff2');
        unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
      }

      /* cyrillic-ext */
      @font-face {
        font-family: 'Fira Sans';
        font-style: normal;
        font-weight: 500;
        font-display: swap;
        src: url(https://fonts.gstatic.com/s/firasans/v17/va9B4kDNxMZdWfMOD5VnZKveSxf6Xl7Gl3LX.woff2) format('woff2');
        unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
      }

      /* cyrillic */
      @font-face {
        font-family: 'Fira Sans';
        font-style: normal;
        font-weight: 500;
        font-display: swap;
        src: url(https://fonts.gstatic.com/s/firasans/v17/va9B4kDNxMZdWfMOD5VnZKveQhf6Xl7Gl3LX.woff2) format('woff2');
        unicode-range: U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
      }

      /* latin-ext */
      @font-face {
        font-family: 'Fira Sans';
        font-style: normal;
        font-weight: 500;
        font-display: swap;
        src: url(https://fonts.gstatic.com/s/firasans/v17/va9B4kDNxMZdWfMOD5VnZKveSBf6Xl7Gl3LX.woff2) format('woff2');
        unicode-range: U+0100-02AF, U+0304, U+0308, U+0329, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
      }

      /* latin */
      @font-face {
        font-family: 'Fira Sans';
        font-style: normal;
        font-weight: 500;
        font-display: swap;
        src: url(https://fonts.gstatic.com/s/firasans/v17/va9B4kDNxMZdWfMOD5VnZKveRhf6Xl7Glw.woff2) format('woff2');
        unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
      }

      /* cyrillic-ext */
      @font-face {
        font-family: 'Fira Sans';
        font-style: normal;
        font-weight: 700;
        font-display: swap;
        src: url(https://fonts.gstatic.com/s/firasans/v17/va9B4kDNxMZdWfMOD5VnLK3eSxf6Xl7Gl3LX.woff2) format('woff2');
        unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
      }

      /* cyrillic */
      @font-face {
        font-family: 'Fira Sans';
        font-style: normal;
        font-weight: 700;
        font-display: swap;
        src: url(https://fonts.gstatic.com/s/firasans/v17/va9B4kDNxMZdWfMOD5VnLK3eQhf6Xl7Gl3LX.woff2) format('woff2');
        unicode-range: U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
      }

      /* latin-ext */
      @font-face {
        font-family: 'Fira Sans';
        font-style: normal;
        font-weight: 700;
        font-display: swap;
        src: url(https://fonts.gstatic.com/s/firasans/v17/va9B4kDNxMZdWfMOD5VnLK3eSBf6Xl7Gl3LX.woff2) format('woff2');
        unicode-range: U+0100-02AF, U+0304, U+0308, U+0329, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
      }

      /* latin */
      @font-face {
        font-family: 'Fira Sans';
        font-style: normal;
        font-weight: 700;
        font-display: swap;
        src: url(https://fonts.gstatic.com/s/firasans/v17/va9B4kDNxMZdWfMOD5VnLK3eRhf6Xl7Glw.woff2) format('woff2');
        unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
      }
    </style>
  <link rel="preload" href="https://assets.habr.com/habr-web/css/theme/light-v1.css" as="style" media="(prefers-color-scheme: light)">
  <link rel="preload" href="https://assets.habr.com/habr-web/css/theme/dark-v1.css" as="style" media="(prefers-color-scheme: dark)">
  <link id="light-colors" rel="stylesheet" href="https://assets.habr.com/habr-web/css/theme/light-v1.css" media="(prefers-color-scheme: light)">
  <link id="dark-colors" rel="stylesheet" href="https://assets.habr.com/habr-web/css/theme/dark-v1.css" media="(prefers-color-scheme: dark)">
  <script>window.i18nFetch = new Promise((res, rej) => {
          const xhr = new XMLHttpRequest();
          xhr.open('GET', '/js/i18n/ru-compiled.635b6c39236ebd33fa716c71ab0131a0.json');
          xhr.responseType = 'json';
          xhr.onload = function(e) {
            if (this.status === 200) {
              res({ru: xhr.response});
            } else {
              rej(e);
            }
          };
          xhr.send();
        });</script>
  <style>
      .grecaptcha-badge {
        visibility: hidden;
      }
    </style>
  <meta name="habr-version" content="2.241.0">
  <meta name="apple-mobile-web-app-status-bar-style" content="#303b44">
  <meta name="msapplication-TileColor" content="#629FBC">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <link rel="shortcut icon" type="image/png" sizes="16x16" href="https://assets.habr.com/habr-web/img/favicons/favicon-16.png">
  <link rel="shortcut icon" type="image/png" sizes="32x32" href="https://assets.habr.com/habr-web/img/favicons/favicon-32.png">
  <link rel="apple-touch-icon" type="image/png" sizes="76x76" href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-76.png">
  <link rel="apple-touch-icon" type="image/png" sizes="120x120" href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.png">
  <link rel="apple-touch-icon" type="image/png" sizes="152x152" href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-152.png">
  <link rel="apple-touch-icon" type="image/png" sizes="180x180" href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-180.png">
  <link rel="apple-touch-icon" type="image/png" sizes="256x256" href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-256.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="https://assets.habr.com/habr-web/img/splashes/splash_1136x640.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="https://assets.habr.com/habr-web/img/splashes/splash_2436x1125.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="https://assets.habr.com/habr-web/img/splashes/splash_1792x828.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="https://assets.habr.com/habr-web/img/splashes/splash_828x1792.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="https://assets.habr.com/habr-web/img/splashes/splash_1334x750.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2668.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="https://assets.habr.com/habr-web/img/splashes/splash_2208x1242.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="https://assets.habr.com/habr-web/img/splashes/splash_1125x2436.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2208.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="https://assets.habr.com/habr-web/img/splashes/splash_2732x2048.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="https://assets.habr.com/habr-web/img/splashes/splash_2688x1242.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="https://assets.habr.com/habr-web/img/splashes/splash_2224x1668.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="https://assets.habr.com/habr-web/img/splashes/splash_750x1334.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="https://assets.habr.com/habr-web/img/splashes/splash_2048x2732.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="https://assets.habr.com/habr-web/img/splashes/splash_2388x1668.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2224.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="https://assets.habr.com/habr-web/img/splashes/splash_640x1136.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2388.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="https://assets.habr.com/habr-web/img/splashes/splash_2048x1536.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="https://assets.habr.com/habr-web/img/splashes/splash_1536x2048.png">
  <link rel="mask-icon" color="#77a2b6" href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.svg">
  <link crossorigin="use-credentials" href="/manifest.webmanifest" rel="manifest">
  <script async src="https://unpkg.com/pwacompat" crossorigin="anonymous"></script>
  <script>window.yaContextCb = window.yaContextCb || []</script>
  <script src="https://yandex.ru/ads/system/context.js" async></script>
  <link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-vendors.04465f7c.css" as="style">
  <link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-vendors.978df117.js" as="script">
  <link rel="preload" href="https://assets.habr.com/habr-web/css/app.8599692f.css" as="style">
  <link rel="preload" href="https://assets.habr.com/habr-web/js/app.58b8c457.js" as="script">
  <link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-vendors.04465f7c.css">
  <link rel="stylesheet" href="https://assets.habr.com/habr-web/css/app.8599692f.css">
 </head>
 <body>
  <div id="mount">
   <div id="app">
    <div class="tm-layout__wrapper">
     <!--[--><!---->
     <div></div><!---->
     <header class="tm-header" data-test-id="header">
      <div class="tm-page-width">
       <!--[-->
       <div class="tm-header__container">
        <!----><span class="tm-header__logo-wrap"><a class="tm-header__logo tm-header__logo_hl-ru tm-header__logo" href="/ru/">
          <svg class="tm-svg-img tm-header__icon" height="16" width="16">
           <title>
            Хабр
           </title><use xlink:href="/img/habr-logo-ru.svg#logo"></use>
          </svg></a><span style="display:none;" class="tm-header__beta-sign">β</span></span><!--[-->
        <div class="tm-dropdown tm-header__projects">
         <div class="tm-dropdown__head">
          <!--[-->
          <button class="tm-header__dropdown-toggle">
           <svg class="tm-svg-img tm-header__icon tm-header__icon_dropdown" height="16" width="16">
            <title>
             Открыть список
            </title><use xlink:href="/img/megazord-v28.7909a852..svg#arrow-down"></use>
           </svg></button><!--]-->
         </div><!---->
        </div><a href="/ru/sandbox/start/" class="tm-header__become-author-btn">Как стать автором</a>
        <div class="tm-feature tm-feature tm-feature_variant-inline tm-header__feature">
         <!---->
        </div><!----><!--]--><!---->
       </div><!--]-->
      </div>
     </header>
     <div class="tm-layout">
      <div class="tm-page-progress-bar"></div>
      <div class="tm-base-layout__header_is-sticky tm-base-layout__header" data-menu-sticky="true">
       <div class="tm-page-width">
        <!--[-->
        <div class="tm-base-layout__header-wrapper">
         <div class="tm-main-menu">
          <div class="tm-main-menu__section">
           <nav class="tm-main-menu__section-content">
            <!--[--><a class="tm-main-menu__item" data-test-id="main-menu-item" href="/ru/feed/">Моя лента</a><!--]--><!--[--><a class="tm-main-menu__item" href="/ru/articles/">Все потоки</a><!--]--><!--[--><!--[--><a class="tm-main-menu__item" data-test-id="main-menu-item" href="/ru/flows/develop/">Разработка</a><!--]--><!--[--><a class="tm-main-menu__item" data-test-id="main-menu-item" href="/ru/flows/admin/">Администрирование</a><!--]--><!--[--><a class="tm-main-menu__item" data-test-id="main-menu-item" href="/ru/flows/design/">Дизайн</a><!--]--><!--[--><a class="tm-main-menu__item" data-test-id="main-menu-item" href="/ru/flows/management/">Менеджмент</a><!--]--><!--[--><a class="tm-main-menu__item" data-test-id="main-menu-item" href="/ru/flows/marketing/">Маркетинг</a><!--]--><!--[--><a class="tm-main-menu__item" data-test-id="main-menu-item" href="/ru/flows/popsci/">Научпоп</a><!--]--><!--]-->
           </nav>
          </div>
         </div>
         <div class="tm-header-user-menu tm-base-layout__user-menu">
          <a href="/ru/search/" class="tm-header-user-menu__item tm-header-user-menu__search" data-test-id="search-button">
           <svg class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_search tm-header-user-menu__icon_dark" height="24" width="24">
            <title>
             Поиск
            </title><use xlink:href="/img/megazord-v28.7909a852..svg#search"></use>
           </svg></a><!----><!---->
          <div class="tm-header-user-menu__item tm-header-user-menu__write">
           <div>
            <svg class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_write tm-header-user-menu__icon_dark" height="24" width="24">
             <title>
              Написать публикацию
             </title><use xlink:href="/img/megazord-v28.7909a852..svg#write"></use>
            </svg>
           </div><!---->
          </div><!--[-->
          <div class="tm-header-user-menu__item">
           <button class="tm-header-user-menu__toggle" data-test-id="user-menu-settings">
            <svg class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_dark" height="24" width="24">
             <title>
              Настройки
             </title><use xlink:href="/img/megazord-v28.7909a852..svg#page-settings"></use>
            </svg></button>
          </div><a href="https://habr.com/kek/v1/auth/habrahabr/?back=/ru/articles/907316/&amp;hl=ru" rel="nofollow" class="tm-header-user-menu__item"><!--[-->
           <button class="btn btn_solid btn_small tm-header-user-menu__login" type="button"><!--[-->Войти<!--]--></button><!--]--></a><!--]--><!----><!--teleport start--><!--teleport end--><!---->
         </div>
        </div><!--]-->
       </div>
      </div><!---->
      <div class="tm-page-width">
       <!--[--><!--]-->
      </div>
      <main class="tm-layout__container">
       <div class="tm-page" hl="ru" data-async-called="true" style="--5ab2e5a8:16px;--44c4f6f6:100%;--45ba7a3b:0;">
        <div class="tm-page-width">
         <!--[--><!---->
         <div class="tm-page__wrapper">
          <div class="tm-page__main_has-sidebar tm-page__main">
           <div class="pull-down">
            <!---->
            <div class="pull-down__header" style="height:0px;">
             <div class="pull-down__content" style="bottom:10px;">
              <svg class="tm-svg-img pull-down__icon pull-down__arrow" height="24" width="24">
               <title>
                Обновить
               </title><use xlink:href="/img/megazord-v28.7909a852..svg#pull-arrow"></use>
              </svg>
             </div>
            </div><!--[--><!--[--><!---->
            <div class="tm-article-presenter">
             <!--[--><!--]-->
             <div class="tm-article-presenter__body" data-test-id="article-body">
              <div class="tm-misprint-area">
               <div class="tm-misprint-area__wrapper">
                <!--[-->
                <article class="tm-article-presenter__content tm-article-presenter__content_narrow">
                 <!--[-->
                 <div class="tm-article-presenter__header">
                  <!--[--><!--]-->
                  <div class="tm-article-snippet tm-article-snippet tm-article-presenter__snippet">
                   <!--[--><!--]-->
                   <div class="tm-article-snippet__meta-container">
                    <div class="tm-article-snippet__meta">
                     <span class="tm-user-info tm-article-snippet__author"><a href="/ru/users/apcs660/" class="tm-user-info__userpic" data-test-id="user-info-pic" title="apcs660">
                       <div class="tm-entity-image">
                        <!--[--><img alt="" class="tm-entity-image__pic" height="24" src="https://assets.habr.com/habr-web/img/avatars/180.png" width="24"><!--]-->
                       </div></a><span class="tm-user-info__user tm-user-info__user_appearance-default" data-test-id="user-info-description"><a href="/ru/users/apcs660/" class="tm-user-info__username">apcs660 <!----></a><!--[--><span class="tm-article-datetime-published"><time datetime="2025-05-06T11:15:16.000Z" title="2025-05-06, 14:15">19 часов назад</time></span><!--]--></span></span>
                    </div><!---->
                   </div>
                   <h1 class="tm-title tm-title_h1" lang="ru" data-test-id="articleTitle"><span>Пример забытого «наивного» алгоритма</span></h1>
                   <div class="tm-article-snippet__stats" data-test-id="articleStats">
                    <div class="tm-article-complexity tm-article-complexity_complexity-medium">
                     <span class="tm-svg-icon__wrapper tm-article-complexity__icon">
                      <svg class="tm-svg-img tm-svg-icon" height="24" width="24">
                       <title>
                        Уровень сложности
                       </title><use xlink:href="/img/megazord-v28.7909a852..svg#complexity-medium"></use>
                      </svg></span><span class="tm-article-complexity__label">Средний</span>
                    </div>
                    <div class="tm-article-reading-time">
                     <span class="tm-svg-icon__wrapper tm-article-reading-time__icon">
                      <svg class="tm-svg-img tm-svg-icon" height="24" width="24">
                       <title>
                        Время на прочтение
                       </title><use xlink:href="/img/megazord-v28.7909a852..svg#clock"></use>
                      </svg></span><span class="tm-article-reading-time__label">6 мин</span>
                    </div><span class="tm-icon-counter tm-data-icons__item">
                     <svg class="tm-svg-img tm-icon-counter__icon" height="24" width="24">
                      <title>
                       Количество просмотров
                      </title><use xlink:href="/img/megazord-v28.7909a852..svg#counter-views"></use>
                     </svg><span class="tm-icon-counter__value" title="5072">5.1K</span></span>
                   </div>
                   <div class="tm-publication-hubs__container" data-test-id="articleHubsList">
                    <div class="tm-publication-hubs">
                     <!--[--><span class="tm-publication-hub__link-container"><a href="/ru/hubs/java/" class="tm-publication-hub__link"><!--[--><span>Java</span><span class="tm-article-snippet__profiled-hub" title="Профильный хаб">*</span><!--]--></a></span><span class="tm-publication-hub__link-container"><a href="/ru/hubs/algorithms/" class="tm-publication-hub__link"><!--[--><span>Алгоритмы</span><span class="tm-article-snippet__profiled-hub" title="Профильный хаб">*</span><!--]--></a></span><!--]-->
                    </div>
                   </div>
                   <div class="tm-article-labels" data-test-id="articleLabels">
                    <div class="tm-article-labels__container">
                     <!----><!--[-->
                     <div class="tm-publication-label tm-publication-label_variant-sandbox">
                      <a href="/ru/sandbox/" class="">Из песочницы</a>
                     </div>
                     <div class="tm-publication-label tm-publication-label_variant-recovery">
                      <span>Recovery Mode</span>
                     </div><!--]-->
                    </div>
                   </div><!----><!---->
                  </div>
                 </div><!--[--><!---->
                 <div class="tm-article-body" data-gallery-root lang="ru">
                  <div>
                   <!--[--><!--]-->
                  </div>
                  <div id="post-content-body">
                   <div>
                    <div class="article-formatted-body article-formatted-body article-formatted-body_version-2">
                     <div xmlns="http://www.w3.org/1999/xhtml">
                      <p>Недавно написал скептический комментарий по&nbsp;поводу необходимости алгоритмических интервью. Вспомнил примеры из&nbsp;своей практики, один из&nbsp;них вполне подходящий, можно сделать патч в&nbsp;opensource проекте.</p>
                      <p>Разработчики зачастую пишут код (скелет), используя наивные алгоритмы и не&nbsp;используя валидаторы (предполагая изменить код позже&nbsp;либо ошибочно предположив что&nbsp;объем данных будет небольшим).</p>
                      <p>Не&nbsp;так давно попался один тикет с&nbsp;жалобой на&nbsp;зависание in‑house приложения которое обрабатывает adobe pdf документы (печатает в&nbsp;png изображение для&nbsp;web клиентов).</p>
                      <p>Приложение использует библиотеку apache pdfbox.</p>
                      <p>Запустил тест с&nbsp;проблемным pdf документом в&nbsp;котором использовались формы&nbsp;— компьютер «пошел на&nbsp;взлет». Похоже на&nbsp;длинный цикл, хорошо пошел.</p>
                      <p>Жду пару минут, стало интересно.</p>
                      <p>Начался тротлинг CPU (перегрев, рабочая коробочка у&nbsp;меня небольшая, мобильная, с&nbsp;воздушным охлаждением и&nbsp;быстро нагревается при&nbsp;большой длительной нагрузке).</p>
                      <p>Открыл отладчик, нашел проблемный учаток кода в&nbsp;библиотеке pdfbox который держал поток:</p>
                      <figure class="full-width ">
                       <img src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/a85/27b/61b/a8527b61bae3f95086aadc3329d433c9.png" width="1650" height="955" sizes="(max-width: 780px) 100vw, 50vw" srcset="https://habrastorage.org/r/w780/getpro/habr/upload_files/a85/27b/61b/a8527b61bae3f95086aadc3329d433c9.png 780w,
       https://habrastorage.org/r/w1560/getpro/habr/upload_files/a85/27b/61b/a8527b61bae3f95086aadc3329d433c9.png 781w" loading="lazy" decode="async">
                      </figure>
                      <details class="spoiler">
                       <summary>Полное имя класса</summary>
                       <div class="spoiler__content">
                        <p>org.apache.pdfbox.pdmodel.interactive.form.PlainText</p>
                       </div>
                      </details>
                      <p>Метод разбивает текст хранящийся в&nbsp;строковой переменной «word» на&nbsp;подстроки длиной не&nbsp;более «width» условных пикселей.</p>
                      <p>Вызов font.getStringWidth() достаточно дорогой.</p>
                      <p>Классический «наивный» алгоритм с&nbsp;циклом.</p>
                      <p>Очевидно что&nbsp;разработчики не&nbsp;предполагали что&nbsp;текст в&nbsp;форме может&nbsp;быть большим,&nbsp;либо забыли улучшить алгоритм.</p>
                      <p>В&nbsp;тестовом pdf документе от&nbsp;клиента строка оказалась больше 100&nbsp;тыс символов (хороший такой абзац в&nbsp;таблице).</p>
                      <p>Требуемая ширина столбца подходила для&nbsp;строки длиной 12&nbsp;символов.</p>
                      <h3>Стоимость наивного алгоритма</h3>
                      <p>В&nbsp;методе используется двойной цикл сканирование строки от 100&nbsp;тыс символов, до 12, в&nbsp;цикле, с&nbsp;уменьшением стартовой длины на 12&nbsp;во&nbsp;вложенном цикле.</p>
                      <p>Сумма арифметической прогрессии равно половине суммы крайних членов прогрессии на&nbsp;их количество, в&nbsp;нашем случае необходимая длина строки в&nbsp;каждой строчке 12&nbsp;элементов, для&nbsp;получения числа строк делим 100&nbsp;тысяч на 12, для&nbsp;вычисления стоимости умножаем количество строк на 50&nbsp;тыс, получаем округленно 416&nbsp;миллионов вычислений длины строки в 50&nbsp;тыс элементов (от 100&nbsp;тыс до 12&nbsp;символов, в&nbsp;среднем получается 50&nbsp;тыс символов)</p>
                      <p>Заглянул в&nbsp;Apache Jira&nbsp;— есть такой тикет: <a href="https://issues.apache.org/jira/browse/PDFBOX-5049" rel="noopener noreferrer nofollow">https://issues.apache.org/jira/browse/PDFBOX-5049</a>, висит с 2020&nbsp;года, последнее обновление в 2024. Скорее всего, исправления уже не&nbsp;будет в&nbsp;этой версии pdfbox. Глянул более свежую версию&nbsp;— то&nbsp;же самое.</p>
                      <h3>Лечение</h3>
                      <p>Первое, что&nbsp;приходит на&nbsp;ум&nbsp;— замена перебора бинарным поиском. Следующая мысль&nbsp;— использовать ожидаемое среднее и максимальное количество символов в&nbsp;столбце&nbsp;— к&nbsp;примеру, принять 20&nbsp;символов за&nbsp;среднее количество символов (принять как&nbsp;стартовое значение) и 200&nbsp;за&nbsp;максимум. Вычисление ширины столбца для 100К от&nbsp;большего к&nbsp;меньшему&nbsp;лишено смысла&nbsp;— человек не&nbsp;может читать настолько мелкий текст в&nbsp;таблице.</p>
                      <p>Можно (и нужно) использовать метрику (среднюю ширину символа) и обновлять в&nbsp;процессе.</p>
                      <p>Начинаем поиск ширины с 20&nbsp;символов, затем вычисляем метрику, рассчитываем нужное количество символов зная метрику. В&nbsp;процессе усредняем метрику зная количество символов и ширину рядов. В&nbsp;среднем, думаю что&nbsp;стоимость вычисления ряда будет от 1&nbsp;до 5&nbsp;шагов в&nbsp;зависимости от&nbsp;длины строки (ошибка выше на&nbsp;длинных строчках).</p>
                      <p>Улучшать алгоритм можно до&nbsp;бесконечности, применяя различные стратегии в&nbsp;зависимости от&nbsp;длины текста который нужно нарезать, и ширины столбца.</p>
                      <p>По&nbsp;быстрому набросал патч, перекрыл класс в&nbsp;исходниках (чтобы не&nbsp;заводить бранч и сборку всего pdfbox, хотя так&nbsp;было&nbsp;бы правильнее)&nbsp;— тест прошел меньше чем за&nbsp;секунду.</p>
                      <p>Оценим примерную разницу в&nbsp;стоимости алгоритмов (для конкретного примера документа с&nbsp;шириной строки 12&nbsp;символов в&nbsp;среднем).</p>
                      <p>Предполагаем что&nbsp;алгоритм вычисления ширины строки&nbsp;линейный, внутри него скорее всего цикл.</p>
                      <p>Расчеты делаем «на пальцах», на&nbsp;уровне порядка.</p>
                      <p><strong>Наивный алгоритм:</strong> примерно 400&nbsp;миллионов вычислений строки шириной 50&nbsp;тысяч символов или 20&nbsp;миллиардов вычислений ширины строки длиной в 1&nbsp;символ.</p>
                      <p><strong>Алгоритм с&nbsp;метрикой: </strong>8333&nbsp;строки в&nbsp;столбце, по 3&nbsp;вычисления (скорее всего будет 1) в&nbsp;каждой ряду ширины строки в 12&nbsp;символов; это будет 25к по 12&nbsp;или 300&nbsp;тыс вычислений ширины строки длиной в 1&nbsp;символ.</p>
                      <p>Разница в&nbsp;производительности алгоритмов примерно в 20&nbsp;000&nbsp;000&nbsp;000&nbsp;/ 300&nbsp;000&nbsp;= 67&nbsp;000&nbsp;раз (5&nbsp;порядков, неплохо).</p>
                      <h3>Возможные последствия</h3>
                      <p>Мы несем ответственность за&nbsp;тех кого приручили, или&nbsp;как&nbsp;может повлиять подобный просчет в&nbsp;SLA в&nbsp;библиотеке которую мы используем, на&nbsp;SLA нашего приложения, и наш карман, собственно.</p>
                      <p>Если рассуждать формально, то функциональность библиотеки pdfbox не&nbsp;нарушена&nbsp;— нарушен SLA или&nbsp;точнее, наши ожидания о&nbsp;времени выполнения. Используя pdfbox, мы предполагали определенный временные рамки обработки pdf документа, которые повлияли на&nbsp;SLA нашего приложения и которые, возможно, указаны в&nbsp;контракте (а также штрафы за&nbsp;нарушение SLA).</p>
                      <p>В&nbsp;контексте пользовательского интерфейса SLA может использовать типичный интервал времени от 0&nbsp;до 10&nbsp;секунд для&nbsp;обработки запроса от&nbsp;пользователя.</p>
                      <p>Если операция занимает длительное время, потребуется блокировка повторного выполнения и индикатор статуса (прогресса). Возможно, для&nbsp;этого придется изменить архитектуру приложения (асинхронное выполнение или&nbsp;отдавать результат сразу в&nbsp;виде потока (скачивание в&nbsp;случаe web приложение; это потребует изменения в&nbsp;коде и возможно, замену библиотек, ту&nbsp;же pdfbox на&nbsp;itext, к&nbsp;примеру и тд). В&nbsp;любом случае, длительное время выполнения скорее всего нарушит SLA если приложение декларируется как «real time» операция с&nbsp;временем выполнения до 10&nbsp;секунд.</p>
                      <h3>Оценка времени выполнения</h3>
                      <p>Оценим время выполнения: предположим что 300&nbsp;тыс вызовов по&nbsp;вычислению ширины односимвольной строки займет 10&nbsp;мсек (30&nbsp;вызовов за&nbsp;миллисекунду). Можно использовать microbenchmark и оценить точнее, но&nbsp;для&nbsp;начала посчитаем «на пальцах».</p>
                      <p>Наивный алгоритм потратит 670&nbsp;секунд (терпимо, хотя не&nbsp;факт что&nbsp;пользователь будет ждать 11&nbsp;минут). Если предположить что&nbsp;улучшенный алгоритм займет 100&nbsp;мсек (не так и плохо), то пользователь точно не&nbsp;будет ждать печать странички pdf документа 2&nbsp;часа.</p>
                      <p>От 11&nbsp;минут до 2х часов на&nbsp;документ с 100К символов? Неплохо. Под&nbsp;нагрузкой часы могут превратиться в&nbsp;дни.</p>
                      <h3>Оценка энергоэффективности</h3>
                      <p>Оценим по&nbsp;нижней планке.</p>
                      <p>Предположим что&nbsp;энергопотребление процессора 65&nbsp;ватт (моя работая станция), 16&nbsp;ядер, 4&nbsp;ядра загружены на 100&nbsp;процентов. Уменьшил энергозатраты, на&nbsp;самом деле нагрузка&nbsp;была выше, но&nbsp;для&nbsp;вычисления с&nbsp;точностью до&nbsp;порядка, это не&nbsp;имеет большого значения.</p>
                      <p>Примем потребляемую приложением мощность в 33&nbsp;Вт или 0.033&nbsp;кВт.</p>
                      <p><strong>Улучшенный алгоритм: </strong>время выполнения 100&nbsp;мсек&nbsp;— потребленная энергия 0.0&nbsp;000&nbsp;009&nbsp;кВтч (киловатт‑час)</p>
                      <p><strong>Наивный алгоритм:</strong> время выполнения 2&nbsp;часа&nbsp;— потребленная энергия 0.066&nbsp;кВтч</p>
                      <p>У&nbsp;одного из&nbsp;клиентов приложение&nbsp;было развернуто на 500&nbsp;нодах (максимальное значение). Предположим что&nbsp;документы с&nbsp;подобной формой не&nbsp;исключение а&nbsp;созданы автоматизированным средством и начали применяться массово начиная с&nbsp;определенной даты: результатом будет паралич работы, массовые жалобы, штрафы за&nbsp;нарущение SLA и&nbsp;т.&nbsp;д.</p>
                      <p><strong>Сравнение потребленной мощности в&nbsp;течении часа на 500&nbsp;нодах:</strong></p>
                      <p>0.00&nbsp;045&nbsp;кВтч против 33&nbsp;кВтч. Наивный алгоритм это отопление для&nbsp;зала площадью 300&nbsp;кв.м, а&nbsp;улучшенный алгоритм с&nbsp;потреблением 0.45&nbsp;Ваттч это тепло от&nbsp;смартфона.</p>
                      <p>33&nbsp;кВтч напомнило мне ЭВМ Урал, которую мы разбирали всей школой на&nbsp;уроках труда лет пять и набрали пару ведер припоя (а также натаскали себе много лампочек домой, к&nbsp;сожалению их рабочее напряжение&nbsp;было не&nbsp;подходящим для&nbsp;фонарика и свечение тусклое).</p>
                      <h2>Выводы</h2>
                      <p>Для&nbsp;начала, оценить качество библиотеки которую собираетесь использовать. pdfbox&nbsp;был достаточно медленным и содержал много ошибок. Не&nbsp;всегда есть возможно выбрать лучшее (по причине неподходящей&nbsp;лицензии или&nbsp;стоимости), руководство может принять решение использовать определенную библиотеку не&nbsp;по&nbsp;техническим причинам.</p>
                      <p>Второе, улучшить тестирование перед созданием SLA, для&nbsp;лучшего определения качественных характеристик.</p>
                      <p>Мониторить выполнение задачи в&nbsp;отдельном потоке и прерывать выполнение по&nbsp;таймауту и/или по&nbsp;используемым ресурсам, ограничивать выполнение разумным интервалом времени. Как&nbsp;правило, наивные алгоритмы используют циклы и не&nbsp;блокируют потоки надолго (за исключением эпических случаев использования длинных блокировок, к&nbsp;примеру сетевых вызовов, в&nbsp;цикле).</p>
                      <p>В&nbsp;данном примере критическим ресурсом оказалось время выполнения, в&nbsp;других случаях ограничением может&nbsp;быть память. Например, обработка больших изображений используя небольшой объем памяти&nbsp;— у&nbsp;меня&nbsp;был проект, в&nbsp;котором для&nbsp;обработки TIFF изображения до 300&nbsp;мегапикселей в&nbsp;Java требовалось потратить не&nbsp;более 15&nbsp;мегабайт памяти, но&nbsp;это материал для&nbsp;другой публикации.</p>
                     </div>
                    </div>
                   </div><!----><!---->
                  </div><!----><!---->
                 </div><!--]--><!---->
                 <div class="tm-article-presenter__meta" data-test-id="article-meta-links">
                  <div class="tm-separated-list tm-article-presenter__meta-list">
                   <span class="tm-separated-list__title">Теги:</span>
                   <ul class="tm-separated-list__list">
                    <!--[-->
                    <li class="tm-separated-list__item"><!--[--><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=[%D0%B0%D0%BB%D0%B3%D0%BE%D1%80%D0%B8%D1%82%D0%BC%D1%8B]" class="tm-tags-list__link"><span>алгоритмы</span></a><!--]--></li>
                    <li class="tm-separated-list__item"><!--[--><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=[java]" class="tm-tags-list__link"><span>java</span></a><!--]--></li><!--]--><!---->
                   </ul>
                  </div>
                  <div class="tm-separated-list tm-article-presenter__meta-list">
                   <span class="tm-separated-list__title">Хабы:</span>
                   <ul class="tm-separated-list__list">
                    <!--[-->
                    <li class="tm-separated-list__item"><!--[--><a href="/ru/hubs/java/" class="tm-hubs-list__link"><!--[--><span>Java</span><!--]--></a><!--]--></li>
                    <li class="tm-separated-list__item"><!--[--><a href="/ru/hubs/algorithms/" class="tm-hubs-list__link"><!--[--><span>Алгоритмы</span><!--]--></a><!--]--></li><!--]--><!---->
                   </ul>
                  </div>
                 </div><!----><!--]-->
                </article><!--]-->
               </div><!---->
              </div>
              <div style="" class="tm-article-sticky-panel" data-test-id="article-sticky-panel">
               <div class="tm-data-icons tm-data-icons tm-data-icons_space-big tm-article-sticky-panel__icons" data-test-id="article-stats-icons">
                <div class="article-rating tm-data-icons__item" data-v-86aec4a7>
                 <div class="tm-votes-lever tm-votes-lever tm-votes-lever_appearance-article votes-switcher" title="Всего голосов 10: ↑9 и ↓1" data-v-86aec4a7>
                  <button class="tm-votes-lever__button" data-test-id="votes-lever-upvote-button" title="Нравится" type="button">
                   <svg class="tm-svg-img tm-votes-lever__icon" height="24" width="24">
                    <title>
                     Нравится
                    </title><use xlink:href="/img/megazord-v28.7909a852..svg#counter-vote"></use>
                   </svg></button>
                  <div class="tm-votes-lever__score tm-votes-lever__score_appearance-article tm-votes-lever__score">
                   <!--[--><span><span class="tm-votes-lever__score-counter tm-votes-lever__score-counter_positive tm-votes-lever__score-counter" data-test-id="votes-score-counter">+9</span></span><!--]-->
                  </div>
                  <button class="tm-votes-lever__button" data-test-id="votes-lever-downvote-button" title="Не нравится" type="button">
                   <svg class="tm-svg-img tm-votes-lever__icon tm-votes-lever__icon_arrow-down" height="24" width="24">
                    <title>
                     Не нравится
                    </title><use xlink:href="/img/megazord-v28.7909a852..svg#counter-vote"></use>
                   </svg></button>
                 </div><!--teleport start--><!--teleport end--><!---->
                </div><!----><!---->
                <button class="bookmarks-button tm-data-icons__item" title="Добавить в закладки" type="button"><span class="tm-svg-icon__wrapper bookmarks-button__icon">
                  <svg class="tm-svg-img tm-svg-icon" height="24" width="24">
                   <title>
                    Добавить в закладки
                   </title><use xlink:href="/img/megazord-v28.7909a852..svg#counter-favorite"></use>
                  </svg></span><span class="bookmarks-button__counter" title="Количество пользователей, добавивших публикацию в закладки">17</span></button>
                <div class="tm-sharing tm-data-icons__item" title="Поделиться">
                 <button class="tm-sharing__button" type="button">
                  <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="tm-sharing__icon">
                   <path fill="currentColor" d="M13.8 13.8V18l7.2-6.6L13.8 5v3.9C5 8.9 3 18.6 3 18.6c2.5-4.4 6-4.8 10.8-4.8z"></path>
                  </svg></button><!--teleport start--><!--teleport end-->
                </div>
                <div class="tm-article-comments-counter-link tm-data-icons__item" title="Читать комментарии">
                 <a href="/ru/articles/907316/comments/" class="tm-article-comments-counter-link__link" data-test-id="counter-comments"><!--[-->
                  <svg class="tm-svg-img tm-article-comments-counter-link__icon" height="24" width="24">
                   <title>
                    Комментарии
                   </title><use xlink:href="/img/megazord-v28.7909a852..svg#counter-comments"></use>
                  </svg><span class="tm-article-comments-counter-link__value">4</span><!--]--></a><!---->
                </div><!--[--><!--[--><!--[--><!----><!--]--><!--]--><!--]--><!--teleport start--><!--teleport end--><!---->
               </div>
              </div>
             </div><!--[--><!--]-->
             <div class="tm-article-presenter__footer">
              <!--[--><!--[-->
              <div class="tm-article-blocks">
               <!----><!--[-->
               <section class="tm-block tm-block tm-block_spacing-bottom">
                <!----><!--[-->
                <div class="tm-block__body tm-block__body tm-block__body_variant-balanced">
                 <!--[-->
                 <div class="tm-article-author" data-test-id="article-author-info" data-async-called="true">
                  <!--[--><!--]-->
                  <div class="tm-user-card tm-user-card tm-user-card_variant-article tm-article-author__user-card" data-async-called="true">
                   <div class="tm-user-card__info-container">
                    <div class="tm-user-card__header">
                     <div class="tm-user-card__header-data">
                      <a href="/ru/users/apcs660/" class="tm-user-card__userpic tm-user-card__userpic_size-40">
                       <div class="tm-entity-image">
                        <!--[--><img alt="" class="tm-entity-image__pic" src="https://assets.habr.com/habr-web/img/avatars/180.png"><!--]-->
                       </div></a>
                      <div class="tm-user-card__meta">
                       <div class="tm-counter-container karma" title=" 28 голосов " data-v-f7c0e283>
                        <div class="tm-counter-container__header">
                         <!--[-->
                         <div class="karma-display positive" data-v-f7c0e283 data-v-7635202e>
                          4
                         </div><!----><!--]-->
                        </div>
                        <div class="tm-counter-container__footer">
                         <!--[-->
                         <div class="karma-text" data-v-f7c0e283>
                          Карма
                         </div><!--teleport start--><!--teleport end--><!--]-->
                        </div>
                       </div>
                       <div class="tm-counter-container" title="Рейтинг пользователя">
                        <div class="tm-counter-container__header">
                         <!--[--><!--[--><!--]-->
                         <div class="tm-votes-lever tm-votes-lever tm-votes-lever_appearance-rating">
                          <!---->
                          <div class="tm-votes-lever__score tm-votes-lever__score_appearance-rating tm-votes-lever__score">
                           <!--[--><span><span class="tm-votes-lever__score-counter tm-votes-lever__score-counter_rating tm-votes-lever__score-counter" data-test-id="votes-score-counter">9.4</span></span><!--]-->
                          </div><!---->
                         </div><!--]-->
                        </div>
                        <div class="tm-counter-container__footer">
                         <!--[--><span class="tm-rating__text tm-rating__text">Рейтинг</span><!--]-->
                        </div>
                       </div>
                      </div>
                     </div>
                    </div>
                    <div class="tm-user-card__info tm-user-card__info_variant-article tm-user-card__info">
                     <div class="tm-user-card__title tm-user-card__title_variant-article tm-user-card__title">
                      <!----><a href="/ru/users/apcs660/" class="tm-user-card__nickname tm-user-card__nickname tm-user-card__nickname_variant-article"> @apcs660</a><!---->
                     </div>
                     <p class="tm-user-card__short-info tm-user-card__short-info_variant-article tm-user-card__short-info" data-test-id="user-card-speciality">Пользователь</p>
                    </div>
                   </div><!---->
                   <div class="tm-user-card__buttons tm-user-card__buttons_variant-article tm-user-card__buttons">
                    <!---->
                    <div class="tm-user-card__button">
                     <div class="tm-button-follow tm-user-card__button-follow">
                      <!---->
                      <button class="tm-button-follow__button tm-button-follow__button_big" data-test-id="follow-button" type="button">Подписаться</button>
                     </div>
                    </div><!---->
                    <div class="tm-user-card__button tm-user-card__button_write" data-test-id="user-card-conversations">
                     <svg class="tm-svg-img tm-user-card__button-icon" height="16" width="16">
                      <title>
                       Отправить сообщение
                      </title><use xlink:href="/img/megazord-v28.7909a852..svg#mail"></use>
                     </svg>
                    </div><!---->
                   </div><!---->
                  </div>
                  <div class="tm-article-author__user-contacts" data-test-id="author-contacts">
                   <!----><!----><!---->
                  </div>
                 </div><!--]-->
                </div><!--]--><!---->
               </section><!----><!--[-->
               <div class="banner-wrapper leaderboard tm-page-article__banner" style="--38f3d936:200px;--78a3cd06:auto;" data-v-f4bf0d24>
                <!--[-->
                <div class="placeholder-wrapper placeholder" data-v-f4bf0d24>
                 <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!---->
                 <div class="adfox-banner-placeholder leaderboard" data-v-12f7bcca>
                  <div class="image loads" data-v-12f7bcca></div>
                  <div class="lines" data-v-12f7bcca>
                   <div class="line loads" data-v-12f7bcca></div>
                   <div class="line loads" data-v-12f7bcca></div>
                   <div class="line loads" data-v-12f7bcca></div>
                  </div>
                 </div><!----><!----><!---->
                </div>
                <div id="adfox_164725660339535756" class="tm-adfox-banner" data-v-f4bf0d24></div><!--]-->
               </div><!--]--><!--]-->
               <div class="tm-article-blocks__comments">
                <div id="publication-comments" class="tm-article-page-comments">
                 <div>
                  <!--[-->
                  <div class="tm-article-comments-counter-link tm-article-comments-counter-button">
                   <a href="/ru/articles/907316/comments/" class="tm-article-comments-counter-link__link tm-article-comments-counter-link__link_button-style" data-test-id="counter-comments"><!--[-->
                    <svg class="tm-svg-img tm-article-comments-counter-link__icon tm-article-comments-counter-link__icon_contrasted" height="24" width="24">
                     <title>
                      Комментарии
                     </title><use xlink:href="/img/megazord-v28.7909a852..svg#counter-comments"></use>
                    </svg><span class="tm-article-comments-counter-link__value tm-article-comments-counter-link__value_contrasted"> Комментарии 4 </span><!--]--></a><!---->
                  </div><!--]-->
                 </div>
                </div>
               </div><!--[--><!--[--><!--]-->
               <section class="tm-block tm-block tm-block_spacing-bottom">
                <header class="tm-block__header tm-block__header tm-block__header_variant-borderless">
                 <div class="tm-block__header-container">
                  <h2 class="tm-block__title tm-block__title tm-block__title_variant-large">Публикации</h2><!--[--><!--]-->
                 </div><!---->
                </header><!--[-->
                <div class="tm-block__body tm-block__body tm-block__body_variant-condensed-slim">
                 <!--[--><!--[-->
                 <div class="tm-tabs tm-tabs">
                  <div class="">
                   <!--[--><span class="tm-tabs__tab-item">
                    <button class="tm-tabs__tab-link tm-tabs__tab-link_active tm-tabs__tab-link_slim tm-tabs__tab-link">Лучшие за сутки</button></span><span class="tm-tabs__tab-item">
                    <button class="tm-tabs__tab-link tm-tabs__tab-link_slim tm-tabs__tab-link">Похожие</button></span><!--]-->
                  </div><!---->
                 </div>
                 <div class="similar-and-daily__tab-view">
                  <div class="daily-articles-list">
                   <ul class="tm-article-card-list">
                    <!--[--><!--]-->
                    <div class="tm-bordered-card">
                     <!----><!--[--><!--]-->
                    </div>
                   </ul>
                   <div class="daily-articles-block__button-container">
                    <button class="btn btn_transparent btn_small tm-button tm-button_color-horizon" type="button"><!--[--><!--[-->Показать лучшие за всё время<!--]--><!--]--></button>
                   </div>
                  </div><!---->
                 </div><!--]--><!--]-->
                </div><!--]--><!---->
               </section><!--[-->
               <div>
                <div class="placeholder-wrapper">
                 <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!---->
                 <div class="tm-placeholder-promo">
                  <div class="tm-placeholder-promo__header">
                   <div class="tm-placeholder__line tm-placeholder__line_promo-title"></div>
                  </div>
                  <div class="tm-placeholder-promo__body">
                   <div class="tm-placeholder-promo__posts">
                    <div class="tm-placeholder-promo__post">
                     <div class="tm-placeholder-promo__image"></div>
                     <div class="tm-placeholder__line tm-placeholder__line_post-title"></div>
                    </div>
                    <div class="tm-placeholder-promo__post">
                     <div class="tm-placeholder-promo__image"></div>
                     <div class="tm-placeholder__line tm-placeholder__line_post-title"></div>
                    </div>
                    <div class="tm-placeholder-promo__post">
                     <div class="tm-placeholder-promo__image"></div>
                     <div class="tm-placeholder__line tm-placeholder__line_post-title"></div>
                    </div>
                   </div>
                   <div class="tm-placeholder-promo__dots">
                    <div class="tm-placeholder-promo__dot"></div>
                    <div class="tm-placeholder-promo__dot"></div>
                    <div class="tm-placeholder-promo__dot"></div>
                   </div>
                  </div>
                 </div><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!---->
                </div>
               </div>
               <div class="placeholder-wrapper">
                <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!---->
                <div class="tm-placeholder-inset tm-placeholder-questions">
                 <div class="tm-placeholder-inset__header">
                  <div class="tm-placeholder__line tm-placeholder__line_inset-header loads"></div>
                 </div>
                 <div class="tm-placeholder-inset__body">
                  <ul class="tm-placeholder-list">
                   <!--[-->
                   <li class="tm-placeholder-list__item tm-placeholder-list__item_inset">
                    <div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div>
                    <div class="tm-project-block-items__properties">
                     <!--[--><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><!--]-->
                    </div></li>
                   <li class="tm-placeholder-list__item tm-placeholder-list__item_inset">
                    <div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div>
                    <div class="tm-project-block-items__properties">
                     <!--[--><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><!--]-->
                    </div></li>
                   <li class="tm-placeholder-list__item tm-placeholder-list__item_inset">
                    <div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div>
                    <div class="tm-project-block-items__properties">
                     <!--[--><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><!--]-->
                    </div></li>
                   <li class="tm-placeholder-list__item tm-placeholder-list__item_inset">
                    <div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div>
                    <div class="tm-project-block-items__properties">
                     <!--[--><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><!--]-->
                    </div></li>
                   <li class="tm-placeholder-list__item tm-placeholder-list__item_inset">
                    <div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div>
                    <div class="tm-project-block-items__properties">
                     <!--[--><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><!--]-->
                    </div></li><!--]-->
                  </ul>
                 </div>
                 <div class="tm-placeholder-inset__footer">
                  <div class="tm-placeholder__line tm-placeholder__line_inset-footer loads"></div>
                 </div>
                </div><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!---->
               </div><!--]--><!----><!--[--><!--]--><!--]-->
              </div><!--]--><!--]-->
             </div>
            </div><!--]--><!--]-->
           </div>
          </div>
          <div class="tm-page__sidebar">
           <!--[-->
           <div class="tm-layout-sidebar">
            <div class="tm-layout-sidebar__placeholder_initial"></div>
            <div class="tm-sexy-sidebar_initial tm-sexy-sidebar" style="margin-top:0px;">
             <!--[--><!--]--><!---->
             <div class="tm-layout-sidebar__ads_initial tm-layout-sidebar__ads">
              <div class="banner-wrapper half-page tm-layout-sidebar__banner tm-layout-sidebar__banner_top" style="--38f3d936:600px;--78a3cd06:auto;" data-v-f4bf0d24>
               <!--[-->
               <div class="placeholder-wrapper placeholder" data-v-f4bf0d24>
                <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!---->
                <div class="adfox-banner-placeholder half-page" data-v-12f7bcca>
                 <div class="image loads" data-v-12f7bcca></div>
                 <div class="lines" data-v-12f7bcca>
                  <div class="line loads" data-v-12f7bcca></div>
                  <div class="line loads" data-v-12f7bcca></div>
                  <div class="line loads" data-v-12f7bcca></div>
                 </div>
                </div><!----><!----><!---->
               </div>
               <div id="adfox_164725680533065327" class="tm-adfox-banner" data-v-f4bf0d24></div><!--]-->
              </div>
             </div><!--[--><!---->
             <div></div>
             <section class="tm-block tm-block tm-block_spacing-around" data-async-called="true">
              <header class="tm-block__header tm-block__header">
               <div class="tm-block__header-container">
                <h2 class="tm-block__title tm-block__title">Работа</h2><!--[--><!--]-->
               </div><!---->
              </header><!--[-->
              <div class="tm-block__body tm-block__body">
               <!--[--><!--[-->
               <div class="tm-vacancies-block__item">
                <a class="tm-vacancies-block__vacancy-title" href="https://career.habr.com/vacancies/java_developer" target="_blank">Java разработчик</a>
                <div class="tm-vacancies-block__vacancies-count">
                 196 вакансий
                </div>
               </div><!--]--><!--]-->
              </div><!--]-->
              <footer class="tm-block__footer">
               <!--[--><a class="tm-block-extralink" href="https://career.habr.com/catalog">Все вакансии</a><!--]-->
              </footer>
             </section>
             <section class="tm-block tm-block tm-block_spacing-around block" data-v-6f380946>
              <header class="tm-block__header tm-block__header">
               <div class="tm-block__header-container">
                <h2 class="tm-block__title tm-block__title">Ближайшие события</h2><!--[--><!--]-->
               </div><!---->
              </header><!--[-->
              <div class="tm-block__body tm-block__body">
               <!--[-->
               <div class="placeholder-wrapper" data-v-6f380946>
                <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!---->
                <section class="tm-block tm-block tm-block_spacing-none" tabindex="-1" data-v-9caf0b82>
                 <!----><!--[-->
                 <div class="event-card-placeholder is-widget" data-v-9caf0b82>
                  <div class="image loads" data-v-9caf0b82></div>
                  <div class="info" data-v-9caf0b82>
                   <div class="date line" data-v-9caf0b82></div>
                   <div class="title line" data-v-9caf0b82></div>
                   <div class="places line" data-v-9caf0b82></div>
                   <div class="places line" data-v-9caf0b82></div>
                  </div>
                  <div class="footer widget" data-v-9caf0b82>
                   <div class="link line" data-v-9caf0b82></div>
                   <div class="categories" data-v-9caf0b82>
                    <!--[-->
                    <div class="category line" data-v-9caf0b82></div>
                    <div class="category line" data-v-9caf0b82></div>
                    <div class="category line" data-v-9caf0b82></div><!--]-->
                   </div>
                  </div>
                 </div><!--]--><!---->
                </section><!---->
               </div><!--]-->
              </div><!--]--><!---->
             </section><!--]-->
             <div class="banner-wrapper medium-rectangle tm-layout-sidebar__banner tm-layout-sidebar__banner_bottom" style="--38f3d936:250px;--78a3cd06:auto;" data-v-f4bf0d24>
              <!--[-->
              <div class="placeholder-wrapper placeholder" data-v-f4bf0d24>
               <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!---->
               <div class="adfox-banner-placeholder medium-rectangle" data-v-12f7bcca>
                <div class="image loads" data-v-12f7bcca></div>
                <div class="lines" data-v-12f7bcca>
                 <div class="line loads" data-v-12f7bcca></div>
                 <div class="line loads" data-v-12f7bcca></div>
                 <div class="line loads" data-v-12f7bcca></div>
                </div>
               </div><!----><!----><!---->
              </div>
              <div id="adfox_164725691003361602" class="tm-adfox-banner" data-v-f4bf0d24></div><!--]-->
             </div>
            </div>
           </div><!--]-->
          </div>
         </div><!----><!--]-->
        </div>
       </div>
      </main><!---->
     </div>
     <div class="tm-footer-menu">
      <div class="tm-page-width">
       <!--[-->
       <div class="tm-footer-menu__container">
        <!--[-->
        <div class="tm-footer-menu__block">
         <p class="tm-footer-menu__block-title">Ваш аккаунт</p>
         <div class="tm-footer-menu__block-content">
          <ul class="tm-footer-menu__list">
           <!--[-->
           <li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr/?back=/ru/articles/907316/&amp;hl=ru" rel="nofollow" target="_self">Войти</a></li>
           <li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr-register/?back=/ru/articles/907316/&amp;hl=ru" rel="nofollow" target="_self">Регистрация</a></li><!--]-->
          </ul>
         </div>
        </div>
        <div class="tm-footer-menu__block">
         <p class="tm-footer-menu__block-title">Разделы</p>
         <div class="tm-footer-menu__block-content">
          <ul class="tm-footer-menu__list">
           <!--[-->
           <li class="tm-footer-menu__list-item"><a href="/ru/articles/" class="footer-menu__item-link">Статьи</a></li>
           <li class="tm-footer-menu__list-item"><a href="/ru/news/" class="footer-menu__item-link">Новости</a></li>
           <li class="tm-footer-menu__list-item"><a href="/ru/hubs/" class="footer-menu__item-link">Хабы</a></li>
           <li class="tm-footer-menu__list-item"><a href="/ru/companies/" class="footer-menu__item-link">Компании</a></li>
           <li class="tm-footer-menu__list-item"><a href="/ru/users/" class="footer-menu__item-link">Авторы</a></li>
           <li class="tm-footer-menu__list-item"><a href="/ru/sandbox/" class="footer-menu__item-link">Песочница</a></li><!--]-->
          </ul>
         </div>
        </div>
        <div class="tm-footer-menu__block">
         <p class="tm-footer-menu__block-title">Информация</p>
         <div class="tm-footer-menu__block-content">
          <ul class="tm-footer-menu__list">
           <!--[-->
           <li class="tm-footer-menu__list-item"><a href="/ru/docs/help/" class="footer-menu__item-link">Устройство сайта</a></li>
           <li class="tm-footer-menu__list-item"><a href="/ru/docs/authors/codex/" class="footer-menu__item-link">Для авторов</a></li>
           <li class="tm-footer-menu__list-item"><a href="/ru/docs/companies/corpblogs/" class="footer-menu__item-link">Для компаний</a></li>
           <li class="tm-footer-menu__list-item"><a href="/ru/docs/docs/transparency/" class="footer-menu__item-link">Документы</a></li>
           <li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/agreement/?hl=ru_RU" target="_blank">Соглашение</a></li>
           <li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/confidential/?hl=ru_RU" target="_blank">Конфиденциальность</a></li><!--]-->
          </ul>
         </div>
        </div>
        <div class="tm-footer-menu__block">
         <p class="tm-footer-menu__block-title">Услуги</p>
         <div class="tm-footer-menu__block-content">
          <ul class="tm-footer-menu__list">
           <!--[-->
           <li class="tm-footer-menu__list-item"><a href="https://company.habr.com/ru/corporate-blogs/" target="_blank">Корпоративный блог</a></li>
           <li class="tm-footer-menu__list-item"><a href="https://company.habr.com/ru/advertising/" target="_blank">Медийная реклама</a></li>
           <li class="tm-footer-menu__list-item"><a href="https://company.habr.com/ru/native-special/" target="_blank">Нативные проекты</a></li>
           <li class="tm-footer-menu__list-item"><a href="https://company.habr.com/ru/education-programs/" target="_blank">Образовательные программы</a></li>
           <li class="tm-footer-menu__list-item"><a href="https://company.habr.com/ru/hello-startup/" target="_blank">Стартапам</a></li><!--]-->
          </ul>
         </div>
        </div><!--]-->
       </div><!--]-->
      </div>
     </div>
     <div class="tm-footer">
      <div class="tm-page-width">
       <!--[-->
       <div class="tm-footer__container">
        <!---->
        <div class="tm-footer__social">
         <!--[--><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://www.facebook.com/habrahabr.ru" rel="nofollow noopener noreferrer" target="_blank">
          <svg class="tm-svg-img tm-svg-icon" height="24" width="24">
           <title>
            Facebook
           </title><use xlink:href="/img/new-social-icons-sprite.svg#social-logo-facebook"></use>
          </svg></a><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://twitter.com/habr_com" rel="nofollow noopener noreferrer" target="_blank">
          <svg class="tm-svg-img tm-svg-icon" height="24" width="24">
           <title>
            Twitter
           </title><use xlink:href="/img/new-social-icons-sprite.svg#social-logo-twitter"></use>
          </svg></a><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://vk.com/habr" rel="nofollow noopener noreferrer" target="_blank">
          <svg class="tm-svg-img tm-svg-icon" height="24" width="24">
           <title>
            VK
           </title><use xlink:href="/img/new-social-icons-sprite.svg#social-logo-vk"></use>
          </svg></a><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://telegram.me/habr_com" rel="nofollow noopener noreferrer" target="_blank">
          <svg class="tm-svg-img tm-svg-icon" height="24" width="24">
           <title>
            Telegram
           </title><use xlink:href="/img/new-social-icons-sprite.svg#social-logo-telegram"></use>
          </svg></a><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" rel="nofollow noopener noreferrer" target="_blank">
          <svg class="tm-svg-img tm-svg-icon" height="24" width="24">
           <title>
            Youtube
           </title><use xlink:href="/img/new-social-icons-sprite.svg#social-logo-youtube"></use>
          </svg></a><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://dzen.ru/habr" rel="nofollow noopener noreferrer" target="_blank">
          <svg class="tm-svg-img tm-svg-icon" height="24" width="24">
           <title>
            Яндекс Дзен
           </title><use xlink:href="/img/new-social-icons-sprite.svg#social-logo-dzen"></use>
          </svg></a><!--]-->
        </div><!--teleport start--><!--teleport end-->
        <button class="tm-footer__link"><!----> Настройка языка</button><a href="/ru/feedback/" class="tm-footer__link">Техническая поддержка</a>
        <div class="tm-footer-copyright">
         <span class="tm-copyright"><span class="tm-copyright__years">© 2006–2025, </span><span class="tm-copyright__name"><a class="tm-copyright__link" href="https://company.habr.com/" rel="noopener" target="_blank">Habr</a></span></span>
        </div>
       </div><!--]-->
      </div>
     </div><!----><!--]-->
    </div><!---->
   </div>
   <script>window.__INITIAL_STATE__={"adblock":{"hasAcceptableAdsFilter":false,"hasAdblock":false},"articlesList":{"articlesList":{"907316":{"id":"907316","timePublished":"2025-05-06T11:15:16+00:00","isCorporative":false,"lang":"ru","titleHtml":"Пример забытого «наивного» алгоритма","leadData":{"textHtml":"\u003Cp\u003E Недавно написал скептический комментарий по поводу необходимости алгоритмических интервью.  Вспомнил примеры из своей практики, один из них вполне подходящий, можно сделать патч в opensource проекте.\u003C\u002Fp\u003E\u003Cp\u003EРазработчики зачастую пишут код (скелет), используя наивные алгоритмы и не используя валидаторы (предполагая изменить код позже либо ошибочно предположив что объем данных будет небольшим).\u003C\u002Fp\u003E\u003Cp\u003EНе так давно попался один тикет с жалобой на зависание in-house приложения которое обрабатывает adobe pdf документы (печатает в png изображение для web клиентов).\u003C\u002Fp\u003E\u003Cp\u003EПриложение использует библиотеку apache pdfbox.  \u003C\u002Fp\u003E\u003Cp\u003EЗапустил тест с проблемным pdf документом в котором использовались формы  – компьютер “пошел на взлет”. Похоже на длинный цикл, хорошо пошел.\u003C\u002Fp\u003E\u003Cp\u003EЖду пару минут, стало интересно.\u003C\u002Fp\u003E\u003Cp\u003EНачался тротлинг CPU (перегрев, рабочая коробочка у меня небольшая, мобильная,  с воздушным охлаждением и быстро нагревается при большой длительной нагрузке).  \u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa85\u002F27b\u002F61b\u002Fa8527b61bae3f95086aadc3329d433c9.png","fit":"cover","positionY":0,"positionX":0}},"editorVersion":"2.0","postType":"article","postLabels":[{"type":"sandbox","typeOf":"system","title":"Из песочницы","data":{"url":null}},{"type":"recovery","typeOf":"system","title":"Recovery Mode","data":{"url":null}}],"author":{"id":"1088948","alias":"apcs660","fullname":null,"avatarUrl":null,"speciality":null,"scoreStats":{"score":4,"votesCount":28},"rating":9.4,"relatedData":null,"contacts":[],"authorContacts":[],"paymentDetails":{"paymentYandexMoney":null,"paymentPayPalMe":null,"paymentWebmoney":null},"donationsMethod":null,"isInBlacklist":null,"careerProfile":null},"statistics":{"commentsCount":4,"favoritesCount":17,"readingCount":5072,"score":9,"votesCount":10,"votesCountPlus":9,"votesCountMinus":1},"hubs":[{"id":"375","alias":"java","type":"collective","title":"Java","titleHtml":"Java","isProfiled":true,"relatedData":null},{"id":"8000","alias":"algorithms","type":"collective","title":"Алгоритмы","titleHtml":"Алгоритмы","isProfiled":true,"relatedData":null}],"flows":[{"id":"1","alias":"develop","title":"Разработка","titleHtml":"Разработка"}],"relatedData":{"vote":null,"unreadCommentsCount":0,"bookmarked":false,"canComment":false,"canEdit":false,"canViewVotes":false,"votePlus":{"canVote":false,"isChargeEnough":false,"isKarmaEnough":false,"isVotingOver":false,"isPublicationLimitEnough":false},"voteMinus":{"canVote":false,"isChargeEnough":false,"isKarmaEnough":false,"isVotingOver":false,"isPublicationLimitEnough":false},"canModerateComments":false,"trackerSubscribed":false,"emailSubscribed":false},"textHtml":"\u003Cdiv xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003E\u003Cp\u003EНедавно написал скептический комментарий по поводу необходимости алгоритмических интервью. Вспомнил примеры из своей практики, один из них вполне подходящий, можно сделать патч в opensource проекте.\u003C\u002Fp\u003E\u003Cp\u003EРазработчики зачастую пишут код (скелет), используя наивные алгоритмы и не используя валидаторы (предполагая изменить код позже либо ошибочно предположив что объем данных будет небольшим).\u003C\u002Fp\u003E\u003Cp\u003EНе так давно попался один тикет с жалобой на зависание in‑house приложения которое обрабатывает adobe pdf документы (печатает в png изображение для web клиентов).\u003C\u002Fp\u003E\u003Cp\u003EПриложение использует библиотеку apache pdfbox. \u003C\u002Fp\u003E\u003Cp\u003EЗапустил тест с проблемным pdf документом в котором использовались формы — компьютер «пошел на взлет». Похоже на длинный цикл, хорошо пошел.\u003C\u002Fp\u003E\u003Cp\u003EЖду пару минут, стало интересно.\u003C\u002Fp\u003E\u003Cp\u003EНачался тротлинг CPU (перегрев, рабочая коробочка у меня небольшая, мобильная, с воздушным охлаждением и быстро нагревается при большой длительной нагрузке). \u003C\u002Fp\u003E\u003Cp\u003EОткрыл отладчик, нашел проблемный учаток кода в библиотеке pdfbox который держал поток:\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa85\u002F27b\u002F61b\u002Fa8527b61bae3f95086aadc3329d433c9.png\" width=\"1650\" height=\"955\" sizes=\"(max-width: 780px) 100vw, 50vw\" srcset=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw780\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa85\u002F27b\u002F61b\u002Fa8527b61bae3f95086aadc3329d433c9.png 780w,&#10;       https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa85\u002F27b\u002F61b\u002Fa8527b61bae3f95086aadc3329d433c9.png 781w\" loading=\"lazy\" decode=\"async\"\u002F\u003E\u003C\u002Ffigure\u003E\u003Cdetails class=\"spoiler\"\u003E\u003Csummary\u003EПолное имя класса\u003C\u002Fsummary\u003E\u003Cdiv class=\"spoiler__content\"\u003E\u003Cp\u003Eorg.apache.pdfbox.pdmodel.interactive.form.PlainText\u003C\u002Fp\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdetails\u003E\u003Cp\u003EМетод разбивает текст хранящийся в строковой переменной «word» на подстроки длиной не более «width» условных пикселей.\u003C\u002Fp\u003E\u003Cp\u003EВызов font.getStringWidth() достаточно дорогой.\u003C\u002Fp\u003E\u003Cp\u003EКлассический «наивный» алгоритм с циклом.\u003C\u002Fp\u003E\u003Cp\u003EОчевидно что разработчики не предполагали что текст в форме может быть большим, либо забыли улучшить алгоритм.\u003C\u002Fp\u003E\u003Cp\u003EВ тестовом pdf документе от клиента строка оказалась больше 100 тыс символов (хороший такой абзац в таблице).\u003C\u002Fp\u003E\u003Cp\u003EТребуемая ширина столбца подходила для строки длиной 12 символов.\u003C\u002Fp\u003E\u003Ch3\u003E Стоимость наивного алгоритма \u003C\u002Fh3\u003E\u003Cp\u003EВ методе используется двойной цикл сканирование строки от 100 тыс символов, до 12, в цикле, с уменьшением стартовой длины на 12 во вложенном цикле. \u003C\u002Fp\u003E\u003Cp\u003EСумма арифметической прогрессии равно половине суммы крайних членов прогрессии на их количество, в нашем случае необходимая длина строки в каждой строчке 12 элементов, для получения числа строк делим 100 тысяч на 12, для вычисления стоимости умножаем количество строк на 50 тыс, получаем округленно 416 миллионов вычислений длины строки в 50 тыс элементов (от 100 тыс до 12 символов, в среднем получается 50 тыс символов)\u003C\u002Fp\u003E\u003Cp\u003EЗаглянул в Apache Jira — есть такой тикет: \u003Ca href=\"https:\u002F\u002Fissues.apache.org\u002Fjira\u002Fbrowse\u002FPDFBOX-5049\" rel=\"noopener noreferrer nofollow\"\u003Ehttps:\u002F\u002Fissues.apache.org\u002Fjira\u002Fbrowse\u002FPDFBOX-5049\u003C\u002Fa\u003E, висит с 2020 года, последнее обновление в 2024. Скорее всего, исправления уже не будет в этой версии pdfbox. Глянул более свежую версию — то же самое. \u003C\u002Fp\u003E\u003Ch3\u003E Лечение\u003C\u002Fh3\u003E\u003Cp\u003EПервое, что приходит на ум — замена перебора бинарным поиском. Следующая мысль — использовать ожидаемое среднее и максимальное количество символов в столбце — к примеру, принять 20 символов за среднее количество символов (принять как стартовое значение) и 200 за максимум. Вычисление ширины столбца для 100К от большего к меньшему лишено смысла — человек не может читать настолько мелкий текст в таблице.\u003C\u002Fp\u003E\u003Cp\u003EМожно (и нужно) использовать метрику (среднюю ширину символа) и обновлять в процессе. \u003C\u002Fp\u003E\u003Cp\u003EНачинаем поиск ширины с 20 символов, затем вычисляем метрику, рассчитываем нужное количество символов зная метрику. В процессе усредняем метрику зная количество символов и ширину рядов. В среднем, думаю что стоимость вычисления ряда будет от 1 до 5 шагов в зависимости от длины строки (ошибка выше на длинных строчках).\u003C\u002Fp\u003E\u003Cp\u003EУлучшать алгоритм можно до бесконечности, применяя различные стратегии в зависимости от длины текста который нужно нарезать, и ширины столбца.\u003C\u002Fp\u003E\u003Cp\u003EПо быстрому набросал патч, перекрыл класс в исходниках (чтобы не заводить бранч и сборку всего pdfbox, хотя так было бы правильнее) — тест прошел меньше чем за секунду. \u003C\u002Fp\u003E\u003Cp\u003EОценим примерную разницу в стоимости алгоритмов (для конкретного примера документа с шириной строки 12 символов в среднем).\u003C\u002Fp\u003E\u003Cp\u003EПредполагаем что алгоритм вычисления ширины строки линейный, внутри него скорее всего цикл.\u003C\u002Fp\u003E\u003Cp\u003EРасчеты делаем «на пальцах», на уровне порядка.\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003EНаивный алгоритм:\u003C\u002Fstrong\u003E примерно 400 миллионов вычислений строки шириной 50 тысяч символов или 20 миллиардов вычислений ширины строки длиной в 1 символ.\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003EАлгоритм с метрикой: \u003C\u002Fstrong\u003E8333 строки в столбце, по 3 вычисления (скорее всего будет 1) в каждой ряду ширины строки в 12 символов; это будет 25к по 12 или 300 тыс вычислений ширины строки длиной в 1 символ.\u003C\u002Fp\u003E\u003Cp\u003EРазница в производительности алгоритмов примерно в 20 000 000 000 \u002F 300 000 = 67 000 раз (5 порядков, неплохо). \u003C\u002Fp\u003E\u003Ch3\u003EВозможные последствия\u003C\u002Fh3\u003E\u003Cp\u003EМы несем ответственность за тех кого приручили, или как может повлиять подобный просчет в SLA в библиотеке которую мы используем, на SLA нашего приложения, и наш карман, собственно.\u003C\u002Fp\u003E\u003Cp\u003EЕсли рассуждать формально, то функциональность библиотеки pdfbox не нарушена — нарушен SLA или точнее, наши ожидания о времени выполнения. Используя pdfbox, мы предполагали определенный временные рамки обработки pdf документа, которые повлияли на SLA нашего приложения и которые, возможно, указаны в контракте (а также штрафы за нарушение SLA). \u003C\u002Fp\u003E\u003Cp\u003EВ контексте пользовательского интерфейса SLA может использовать типичный интервал времени от 0 до 10 секунд для обработки запроса от пользователя. \u003C\u002Fp\u003E\u003Cp\u003EЕсли операция занимает длительное время, потребуется блокировка повторного выполнения и индикатор статуса (прогресса). Возможно, для этого придется изменить архитектуру приложения (асинхронное выполнение или отдавать результат сразу в виде потока (скачивание в случаe web приложение; это потребует изменения в коде и возможно, замену библиотек, ту же pdfbox на itext, к примеру и тд). В любом случае, длительное время выполнения скорее всего нарушит SLA если приложение декларируется как «real time» операция с временем выполнения до 10 секунд.\u003C\u002Fp\u003E\u003Ch3\u003EОценка времени выполнения\u003C\u002Fh3\u003E\u003Cp\u003EОценим время выполнения: предположим что 300 тыс вызовов по вычислению ширины односимвольной строки займет 10 мсек (30 вызовов за миллисекунду). Можно использовать microbenchmark и оценить точнее, но для начала посчитаем «на пальцах».\u003C\u002Fp\u003E\u003Cp\u003EНаивный алгоритм потратит 670 секунд (терпимо, хотя не факт что пользователь будет ждать 11 минут). Если предположить что улучшенный алгоритм займет 100 мсек (не так и плохо), то пользователь точно не будет ждать печать странички pdf документа 2 часа.\u003C\u002Fp\u003E\u003Cp\u003EОт 11 минут до 2х часов на документ с 100К символов? Неплохо. Под нагрузкой часы могут превратиться в дни.\u003C\u002Fp\u003E\u003Ch3\u003E Оценка энергоэффективности\u003C\u002Fh3\u003E\u003Cp\u003EОценим по нижней планке.\u003C\u002Fp\u003E\u003Cp\u003EПредположим что энергопотребление процессора 65 ватт (моя работая станция), 16 ядер, 4 ядра загружены на 100 процентов. Уменьшил энергозатраты, на самом деле нагрузка была выше, но для вычисления с точностью до порядка, это не имеет большого значения.\u003C\u002Fp\u003E\u003Cp\u003EПримем потребляемую приложением мощность в 33 Вт или 0.033 кВт.\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003EУлучшенный алгоритм: \u003C\u002Fstrong\u003Eвремя выполнения 100 мсек — потребленная энергия 0.0 000 009 кВтч (киловатт‑час)\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003EНаивный алгоритм:\u003C\u002Fstrong\u003E время выполнения 2 часа — потребленная энергия 0.066 кВтч\u003C\u002Fp\u003E\u003Cp\u003EУ одного из клиентов приложение было развернуто на 500 нодах (максимальное значение). Предположим что документы с подобной формой не исключение а созданы автоматизированным средством и начали применяться массово начиная с определенной даты: результатом будет паралич работы, массовые жалобы, штрафы за нарущение SLA и т. д.\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003EСравнение потребленной мощности в течении часа на 500 нодах:\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\u003Cp\u003E0.00 045 кВтч против 33 кВтч. Наивный алгоритм это отопление для зала площадью 300 кв.м, а улучшенный алгоритм с потреблением 0.45 Ваттч это тепло от смартфона.\u003C\u002Fp\u003E\u003Cp\u003E33 кВтч напомнило мне ЭВМ Урал, которую мы разбирали всей школой на уроках труда лет пять и набрали пару ведер припоя (а также натаскали себе много лампочек домой, к сожалению их рабочее напряжение было не подходящим для фонарика и свечение тусклое).\u003C\u002Fp\u003E\u003Ch2\u003EВыводы\u003C\u002Fh2\u003E\u003Cp\u003EДля начала, оценить качество библиотеки которую собираетесь использовать. pdfbox был достаточно медленным и содержал много ошибок. Не всегда есть возможно выбрать лучшее (по причине неподходящей лицензии или стоимости), руководство может принять решение использовать определенную библиотеку не по техническим причинам.\u003C\u002Fp\u003E\u003Cp\u003EВторое, улучшить тестирование перед созданием SLA, для лучшего определения качественных характеристик. \u003C\u002Fp\u003E\u003Cp\u003EМониторить выполнение задачи в отдельном потоке и прерывать выполнение по таймауту и\u002Fили по используемым ресурсам, ограничивать выполнение разумным интервалом времени. Как правило, наивные алгоритмы используют циклы и не блокируют потоки надолго (за исключением эпических случаев использования длинных блокировок, к примеру сетевых вызовов, в цикле). \u003C\u002Fp\u003E\u003Cp\u003EВ данном примере критическим ресурсом оказалось время выполнения, в других случаях ограничением может быть память. Например, обработка больших изображений используя небольшой объем памяти — у меня был проект, в котором для обработки TIFF изображения до 300 мегапикселей в Java требовалось потратить не более 15 мегабайт памяти, но это материал для другой публикации.\u003C\u002Fp\u003E\u003C\u002Fdiv\u003E","tags":[{"titleHtml":"алгоритмы"},{"titleHtml":"java"}],"metadata":{"stylesUrls":[],"scriptUrls":[],"shareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F907316\u002F43b599d9aa921b2e438cf8b8f742bfce\u002F","shareImageWidth":1200,"shareImageHeight":630,"vkShareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F907316\u002F43b599d9aa921b2e438cf8b8f742bfce\u002F?format=vk","schemaJsonLd":"{\"@context\":\"http:\\\u002F\\\u002Fschema.org\",\"@type\":\"Article\",\"mainEntityOfPage\":{\"@type\":\"WebPage\",\"@id\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Farticles\\\u002F907316\\\u002F\"},\"headline\":\"Пример забытого «наивного» алгоритма\",\"datePublished\":\"2025-05-06T14:15:16+03:00\",\"dateModified\":\"2025-05-06T14:15:16+03:00\",\"author\":{\"@type\":\"Person\",\"name\":\"apcs660\"},\"publisher\":{\"@type\":\"Organization\",\"name\":\"Habr\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fa_\\\u002Flk\\\u002F9m\\\u002Fa_lk9mjkccjox-zccjrpfolmkmq.png\"}},\"description\":\"Недавно написал скептический комментарий по&nbsp;поводу необходимости алгоритмических интервью. Вспомнил примеры из&nbsp;своей практики, один из&nbsp;них вполне подходящий, мож...\",\"url\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Farticles\\\u002F907316\\\u002F#post-content-body\",\"about\":[\"h_java\",\"h_algorithms\",\"f_develop\"],\"image\":[\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Fa85\\\u002F27b\\\u002F61b\\\u002Fa8527b61bae3f95086aadc3329d433c9.png\"]}","metaDescription":"Недавно написал скептический комментарий по&nbsp;поводу необходимости алгоритмических интервью. Вспомнил примеры из&nbsp;своей практики, один из&nbsp;них вполне подходящий, можно сделать патч...","mainImageUrl":null,"amp":true,"customTrackerLinks":[]},"polls":[],"commentsEnabled":{"status":true,"reason":null},"rulesRemindEnabled":false,"votesEnabled":true,"status":"published","plannedPublishTime":null,"checked":null,"hasPinnedComments":false,"format":null,"banner":null,"multiwidget":null,"multiwidgetUuid":null,"readingTime":6,"complexity":"medium","isEditorial":false}},"articlesIds":{},"isLoading":false,"pagesCount":{},"route":{},"reasonsList":null,"postReasonsList":null,"view":"cards","lastVisitedRoute":{},"ssrCommentsArticleIds":[""],"viewedPosts":[],"myFeedFilter":{"complexity":"all","score":"all","types":["articles","posts","news"]},"myFeedIsApplyFilters":false,"myFeedIsForce":false,"karma":{"userReasonsList":null}},"authorContribution":{"authors":{}},"betaTest":{"currentAnnouncement":null,"announcements":{},"announcementCards":null,"announcementComments":{},"announcementCommentThreads":{},"announcementCommentingStatuses":{},"archivedList":[]},"authorStatistics":{"articleRefs":{},"articleIds":{},"pagesCount":{},"route":{},"viewsCount":[],"maxStatsCount":{}},"career":{"seoLandings":[{"title":"Java разработчик","vacanciesCount":196,"itemUrl":"https:\u002F\u002Fcareer.habr.com\u002Fvacancies\u002Fjava_developer","itemHubs":["java","javame_dev","gradle"]}],"hubs":"java,algorithms"},"comments":{"articleComments":{},"articlePinnedComments":{},"searchCommentsResults":null,"pagesCount":null,"commentAccess":{},"scrollParents":{},"pageArticleComments":{"lastViewedComment":0,"postId":null,"lastCommentTimestamp":"","moderated":[],"moderatedIds":[],"commentRoute":"","idempotenceKey":""}},"companies":{"companyRefs":{},"companyIds":{},"companyTopIds":{},"pagesCount":{},"companyProfiles":{},"companiesCategories":[],"companiesCategoriesTotalCount":0,"companiesWidgets":{},"companiesWorkers":{},"companiesFans":{},"multiwidgets":{},"route":{},"isLoading":false,"companyWorkersLoading":false,"companyFansLoading":false,"multiwidgetLoading":false,"vacancies":{},"companiesGalleries":{},"companiesBanners":{},"companiesLandingVacancies":{},"companiesTechnologies":{},"workplaceInfo":null},"companyAdmin":{"companyInfo":null,"companyInfoLoading":false,"faqArticles":null,"brandingPreviewImageUrl":null,"jivoStatus":0,"adminNotifications":null,"availableInvitesCount":{}},"companyAdd":{"currentStep":"","stepsData":{},"uncompletedSteps":[],"isStepLoading":true,"isStepCommitting":false,"isInitialized":false,"agreementContent":""},"companiesContribution":{"hubs":{},"flows":{},"companyRefs":{}},"companyHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"conversation":{"messages":[],"respondent":null,"isLoadMore":false},"conversations":{"conversations":[],"pagesCount":0},"docs":{"menu":{},"articles":{},"mainMenu":[],"loading":{"main":false,"dropdown":false,"article":false}},"feature":{"isProbablyVisible":true},"fixedBanner":{"isArticleStickyPanelVisible":false,"isArticleStickyPanelAtTheBottom":false,"isFixedBannerVisible":false,"isStickyPanelIconsHidden":false},"flows":{"updates":{}},"global":{"isPwa":false,"device":"desktop","isHabrCom":true,"requestId":"7ea8b40b241a231aa2e9558a27c36764"},"hubs":{"hubRefs":{},"hubIds":{},"pagesCount":{},"isLoading":false,"route":{}},"hubsBlock":{"hubRefs":{},"hubIds":{}},"i18n":{"fl":"ru","hl":"ru"},"info":{"welcomePage":{},"isLoading":true},"location":{"urlStruct":{"protocol":null,"slashes":null,"auth":null,"host":null,"port":null,"hostname":null,"hash":null,"query":{},"pathname":"\u002Fru\u002Farticles\u002F907316\u002F","path":"\u002Fru\u002Farticles\u002F907316\u002F","href":"\u002Fru\u002Farticles\u002F907316\u002F"}},"me":{"user":null,"uuid":null,"ppgDemanded":false,"karmaResetInfo":{"canReincarnate":null,"wasReincarnated":null,"currentScore":null},"notes":null,"userUpdates":{"feeds":{"newPostsCount":null,"newThreadsCount":null,"newNewsCount":null,"newCount":null},"conversationUnreadCount":0},"features":null},"mostReadingList":{"mostReadingListIds":[],"mostReadingListRefs":null,"promoPost":null},"onboarding":{"currentStep":null,"stepsData":{},"stepsErrors":{},"completedSteps":[],"isStepCommitting":false,"isCommitDisabled":true},"ppa":{"articles":{},"card":null,"transactions":null,"totalTransactions":null,"isAccessible":null},"projectsBlocks":{"activeBlocks":{"questions":"project-block-article"}},"promoData":{"isLoading":false,"hasLoaded":false,"featurer":null,"megaposts":null,"promoLinks":null,"promoPosts":null,"sticker":null},"publicationStatistics":{"statsInfo":{},"statsFunnels":{},"statsGraph":{},"defaultSuggest":{},"suggest":{},"timeTracker":{},"isTrackingActivity":false,"isUserActive":true,"otherPublicationStats":{}},"pullRefresh":{"shouldRefresh":false},"sandbox":{"articleIds":[],"articleRefs":{},"pagesCount":null,"route":{},"lastVisitedRoute":{},"isLoading":false},"search":{"searchQueryError":null},"settingsOther":{"inputs":{"uiLang":{"errors":[],"ref":null,"value":""},"articlesLangEnglish":{"errors":[],"ref":null,"value":false},"articlesLangRussian":{"errors":[],"ref":null,"value":false},"agreement":{"errors":[],"ref":null,"value":false},"email":{"errors":[],"ref":null,"value":true},"digest":{"errors":[],"ref":null,"value":true}}},"similarList":{"similarListIds":[],"similarListRefs":null},"ssr":{"error":null,"isDataLoaded":true,"isDataLoading":false,"isHydrationFailed":false,"isServer":false},"stories":{"stories":null},"technotext":{"years":[],"technotextDocForNominees":null,"technotextDocForWinners":null,"technotextInfo":{},"technotextInfoLoading":false,"technotextWinners":{},"technotextWinnersLoading":false},"userHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"userInvites":{"availableInvites":0,"usedInvitesIds":[],"usedInvitesRefs":{},"usedInvitesPagesCount":0,"unusedInvitesIds":[],"unusedInvitesRefs":{},"unusedInvitesPagesCount":0},"userVotes":{"karmaVotesList":[],"karmaVotesPagesCount":null,"karmaVotesListLoading":false,"commentsVotesList":[],"commentsVotesPagesCount":null,"commentsVotesListLoading":false,"postsVotesList":[],"postsVotesPagesCount":null,"postsVotesListLoading":false,"userVotesList":[],"userVotesPagesCount":null,"userVotesListLoading":false},"users":{"authorRefs":{},"authorIds":{},"pagesCount":{},"authorProfiles":{},"userHubs":{},"userInvitations":{},"authorFollowers":{},"authorFollowed":{},"userSpecialization":{},"karmaStats":[],"statistics":null,"isLoading":false,"authorFollowersLoading":false,"authorFollowedLoading":false,"userHubsLoading":false,"userInvitationsLoading":false,"route":{}},"viewport":{"prevScrollY":{},"scrollY":0,"width":0},"tracker":{"notificationsLoading":false,"notificationsList":[],"notificationsPageCount":0,"pendingMarkNotificationsRead":[],"publicationsLoading":true,"publicationsList":[],"publicationsPageCount":0,"pendingDeletePublications":false,"pendingMarkPublicationsRead":false},"events":{"eventRefs":{},"eventIds":[],"pagesCount":0,"categories":[],"cities":[],"actualEvents":null,"currentEvent":null,"eventsFilter":{"city":"all","timeStarted":null,"timeEnded":null}},"wysiwyg":{"WYSIWYGRulesRefs":null},"refs":{"specializationRefs":[]},"hint":{"hints":{}}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script>
   <script src="https://assets.habr.com/habr-web/js/chunk-vendors.978df117.js" defer></script>
   <script src="https://assets.habr.com/habr-web/js/app.58b8c457.js" defer></script>
  </div>
  <div id="overlays">
   <!----><!--teleport anchor--><!----><!--teleport anchor--><!----><!--teleport anchor--><!----><!--teleport anchor--><!----><!--teleport anchor--><!----><!--teleport anchor-->
  </div>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-S28W1WC23F"></script>
  <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    </script>
  <script type="text/javascript">
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

  </script>
  <script type="text/javascript">
      window.addEventListener('load', function () {
        setTimeout(() => {
          const img = new Image();
          img.src = 'https://vk.com/rtrg?p=VK-RTRG-421343-57vKE';
        }, 0);
      });
    </script>
 </body>
</html>